/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-essentials",
factory: function (require) {
"use strict";var plugin=(()=>{var Yy=Object.create;var bs=Object.defineProperty;var Ky=Object.getOwnPropertyDescriptor;var Vy=Object.getOwnPropertyNames;var zy=Object.getPrototypeOf,Qy=Object.prototype.hasOwnProperty;var m=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var p=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Xy=(t,e)=>{for(var r in e)bs(t,r,{get:e[r],enumerable:!0})},ho=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Vy(e))!Qy.call(t,i)&&i!==r&&bs(t,i,{get:()=>e[i],enumerable:!(s=Ky(e,i))||s.enumerable});return t};var Jy=(t,e,r)=>(r=t!=null?Yy(zy(t)):{},ho(e||!t||!t.__esModule?bs(r,"default",{value:t,enumerable:!0}):r,t)),Zy=t=>ho(bs({},"__esModule",{value:!0}),t);var le=p((bO,_s)=>{var po,fo,go,mo,yo,wo,bo,vo,xo,_o,Eo,ko,Co,vs,fi,Ro,So,Ao,St,To,Oo,Po,qo,Uo,Io,Do,No,jo,xs,$o,Lo;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(s){t(r(e,r(s)))}):typeof _s=="object"&&typeof _s.exports=="object"?t(r(e,r(_s.exports))):t(r(e));function r(s,i){return s!==e&&(typeof Object.create=="function"?Object.defineProperty(s,"__esModule",{value:!0}):s.__esModule=!0),function(n,a){return s[n]=i?i(n,a):a}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])};po=function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(i,n);function a(){this.constructor=i}i.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)},fo=Object.assign||function(i){for(var n,a=1,o=arguments.length;a<o;a++){n=arguments[a];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(i[l]=n[l])}return i},go=function(i,n){var a={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&n.indexOf(o)<0&&(a[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(a[o[l]]=i[o[l]]);return a},mo=function(i,n,a,o){var l=arguments.length,c=l<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,a):o,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,n,a,o);else for(var h=i.length-1;h>=0;h--)(u=i[h])&&(c=(l<3?u(c):l>3?u(n,a,c):u(n,a))||c);return l>3&&c&&Object.defineProperty(n,a,c),c},yo=function(i,n){return function(a,o){n(a,o,i)}},wo=function(i,n,a,o,l,c){function u(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var h=o.kind,d=h==="getter"?"get":h==="setter"?"set":"value",y=!n&&i?o.static?i:i.prototype:null,f=n||(y?Object.getOwnPropertyDescriptor(y,o.name):{}),b,g=!1,v=a.length-1;v>=0;v--){var x={};for(var w in o)x[w]=w==="access"?{}:o[w];for(var w in o.access)x.access[w]=o.access[w];x.addInitializer=function(R){if(g)throw new TypeError("Cannot add initializers after decoration has completed");c.push(u(R||null))};var C=(0,a[v])(h==="accessor"?{get:f.get,set:f.set}:f[d],x);if(h==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(b=u(C.get))&&(f.get=b),(b=u(C.set))&&(f.set=b),(b=u(C.init))&&l.unshift(b)}else(b=u(C))&&(h==="field"?l.unshift(b):f[d]=b)}y&&Object.defineProperty(y,o.name,f),g=!0},bo=function(i,n,a){for(var o=arguments.length>2,l=0;l<n.length;l++)a=o?n[l].call(i,a):n[l].call(i);return o?a:void 0},vo=function(i){return typeof i=="symbol"?i:"".concat(i)},xo=function(i,n,a){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:a?"".concat(a," ",n):n})},_o=function(i,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,n)},Eo=function(i,n,a,o){function l(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function h(f){try{y(o.next(f))}catch(b){u(b)}}function d(f){try{y(o.throw(f))}catch(b){u(b)}}function y(f){f.done?c(f.value):l(f.value).then(h,d)}y((o=o.apply(i,n||[])).next())})},ko=function(i,n){var a={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,l,c,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(y){return function(f){return d([y,f])}}function d(y){if(o)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(a=0)),a;)try{if(o=1,l&&(c=y[0]&2?l.return:y[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,y[1])).done)return c;switch(l=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return a.label++,{value:y[1],done:!1};case 5:a.label++,l=y[1],y=[0];continue;case 7:y=a.ops.pop(),a.trys.pop();continue;default:if(c=a.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){a=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){a.label=y[1];break}if(y[0]===6&&a.label<c[1]){a.label=c[1],c=y;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(y);break}c[2]&&a.ops.pop(),a.trys.pop();continue}y=n.call(i,a)}catch(f){y=[6,f],l=0}finally{o=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Co=function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&xs(n,i,a)},xs=Object.create?function(i,n,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(n,a);(!l||("get"in l?!n.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,l)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]},vs=function(i){var n=typeof Symbol=="function"&&Symbol.iterator,a=n&&i[n],o=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},fi=function(i,n){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var o=a.call(i),l,c=[],u;try{for(;(n===void 0||n-- >0)&&!(l=o.next()).done;)c.push(l.value)}catch(h){u={error:h}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(u)throw u.error}}return c},Ro=function(){for(var i=[],n=0;n<arguments.length;n++)i=i.concat(fi(arguments[n]));return i},So=function(){for(var i=0,n=0,a=arguments.length;n<a;n++)i+=arguments[n].length;for(var o=Array(i),l=0,n=0;n<a;n++)for(var c=arguments[n],u=0,h=c.length;u<h;u++,l++)o[l]=c[u];return o},Ao=function(i,n,a){if(a||arguments.length===2)for(var o=0,l=n.length,c;o<l;o++)(c||!(o in n))&&(c||(c=Array.prototype.slice.call(n,0,o)),c[o]=n[o]);return i.concat(c||Array.prototype.slice.call(n))},St=function(i){return this instanceof St?(this.v=i,this):new St(i)},To=function(i,n,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=a.apply(i,n||[]),l,c=[];return l={},u("next"),u("throw"),u("return"),l[Symbol.asyncIterator]=function(){return this},l;function u(g){o[g]&&(l[g]=function(v){return new Promise(function(x,w){c.push([g,v,x,w])>1||h(g,v)})})}function h(g,v){try{d(o[g](v))}catch(x){b(c[0][3],x)}}function d(g){g.value instanceof St?Promise.resolve(g.value.v).then(y,f):b(c[0][2],g)}function y(g){h("next",g)}function f(g){h("throw",g)}function b(g,v){g(v),c.shift(),c.length&&h(c[0][0],c[0][1])}},Oo=function(i){var n,a;return n={},o("next"),o("throw",function(l){throw l}),o("return"),n[Symbol.iterator]=function(){return this},n;function o(l,c){n[l]=i[l]?function(u){return(a=!a)?{value:St(i[l](u)),done:!1}:c?c(u):u}:c}},Po=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i[Symbol.asyncIterator],a;return n?n.call(i):(i=typeof vs=="function"?vs(i):i[Symbol.iterator](),a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a);function o(c){a[c]=i[c]&&function(u){return new Promise(function(h,d){u=i[c](u),l(h,d,u.done,u.value)})}}function l(c,u,h,d){Promise.resolve(d).then(function(y){c({value:y,done:h})},u)}},qo=function(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i};var r=Object.create?function(i,n){Object.defineProperty(i,"default",{enumerable:!0,value:n})}:function(i,n){i.default=n};Uo=function(i){if(i&&i.__esModule)return i;var n={};if(i!=null)for(var a in i)a!=="default"&&Object.prototype.hasOwnProperty.call(i,a)&&xs(n,i,a);return r(n,i),n},Io=function(i){return i&&i.__esModule?i:{default:i}},Do=function(i,n,a,o){if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?i!==n||!o:!n.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?o:a==="a"?o.call(i):o?o.value:n.get(i)},No=function(i,n,a,o,l){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?i!==n||!l:!n.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?l.call(i,a):l?l.value=a:n.set(i,a),a},jo=function(i,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?n===i:i.has(n)},$o=function(i,n,a){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var o;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=n[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=n[Symbol.dispose]}if(typeof o!="function")throw new TypeError("Object not disposable.");i.stack.push({value:n,dispose:o,async:a})}else a&&i.stack.push({async:!0});return n};var s=typeof SuppressedError=="function"?SuppressedError:function(i,n,a){var o=new Error(a);return o.name="SuppressedError",o.error=i,o.suppressed=n,o};Lo=function(i){function n(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}function a(){for(;i.stack.length;){var o=i.stack.pop();try{var l=o.dispose&&o.dispose.call(o.value);if(o.async)return Promise.resolve(l).then(a,function(c){return n(c),a()})}catch(c){n(c)}}if(i.hasError)throw i.error}return a()},t("__extends",po),t("__assign",fo),t("__rest",go),t("__decorate",mo),t("__param",yo),t("__esDecorate",wo),t("__runInitializers",bo),t("__propKey",vo),t("__setFunctionName",xo),t("__metadata",_o),t("__awaiter",Eo),t("__generator",ko),t("__exportStar",Co),t("__createBinding",xs),t("__values",vs),t("__read",fi),t("__spread",Ro),t("__spreadArrays",So),t("__spreadArray",Ao),t("__await",St),t("__asyncGenerator",To),t("__asyncDelegator",Oo),t("__asyncValues",Po),t("__makeTemplateObject",qo),t("__importStar",Uo),t("__importDefault",Io),t("__classPrivateFieldGet",Do),t("__classPrivateFieldSet",No),t("__classPrivateFieldIn",jo),t("__addDisposableResource",$o),t("__disposeResources",Lo)})});var Mo=p((vO,ew)=>{ew.exports=[{name:"Appcircle",constant:"APPCIRCLE",env:"AC_APPCIRCLE"},{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN"},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"TF_BUILD",pr:{BUILD_REASON:"PullRequest"}},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"Codefresh",constant:"CODEFRESH",env:"CF_BUILD_ID",pr:{any:["CF_PULL_REQUEST_NUMBER","CF_PULL_REQUEST_ID"]}},{name:"Codemagic",constant:"CODEMAGIC",env:"CM_BUILD_ID",pr:"CM_PULL_REQUEST"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"Expo Application Services",constant:"EAS",env:"EAS_BUILD"},{name:"Gerrit",constant:"GERRIT",env:"GERRIT_PROJECT"},{name:"GitHub Actions",constant:"GITHUB_ACTIONS",env:"GITHUB_ACTIONS",pr:{GITHUB_EVENT_NAME:"pull_request"}},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI",pr:"CI_MERGE_REQUEST_ID"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Google Cloud Build",constant:"GOOGLE_CLOUD_BUILD",env:"BUILDER_OUTPUT"},{name:"Harness CI",constant:"HARNESS",env:"HARNESS_BUILD_ID"},{name:"Heroku",constant:"HEROKU",env:{env:"NODE",includes:"/app/.heroku/node/bin/node"}},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"LayerCI",constant:"LAYERCI",env:"LAYERCI",pr:"LAYERCI_PULL_REQUEST"},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Nevercode",constant:"NEVERCODE",env:"NEVERCODE",pr:{env:"NEVERCODE_PULL_REQUEST",ne:"false"}},{name:"ReleaseHub",constant:"RELEASEHUB",env:"RELEASE_BUILD_ID"},{name:"Render",constant:"RENDER",env:"RENDER",pr:{IS_PULL_REQUEST:"true"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Screwdriver",constant:"SCREWDRIVER",env:"SCREWDRIVER",pr:{env:"SD_PULL_REQUEST",ne:"false"}},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Shippable",constant:"SHIPPABLE",env:"SHIPPABLE",pr:{IS_PULL_REQUEST:"true"}},{name:"Solano CI",constant:"SOLANO",env:"TDDIUM",pr:"TDDIUM_PR_ID"},{name:"Sourcehut",constant:"SOURCEHUT",env:{CI_NAME:"sourcehut"}},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}},{name:"Vercel",constant:"VERCEL",env:{any:["NOW_BUILDER","VERCEL"]},pr:"VERCEL_GIT_PULL_REQUEST_ID"},{name:"Visual Studio App Center",constant:"APPCENTER",env:"APPCENTER_BUILD_ID"},{name:"Woodpecker",constant:"WOODPECKER",env:{CI:"woodpecker"},pr:{CI_BUILD_EVENT:"pull_request"}},{name:"Xcode Cloud",constant:"XCODE_CLOUD",env:"CI_XCODE_PROJECT",pr:"CI_PULL_REQUEST_NUMBER"},{name:"Xcode Server",constant:"XCODE_SERVER",env:"XCS"}]});var gi=p(Ee=>{"use strict";var Ho=Mo(),ne=process.env;Object.defineProperty(Ee,"_vendors",{value:Ho.map(function(t){return t.constant})});Ee.name=null;Ee.isPR=null;Ho.forEach(function(t){let r=(Array.isArray(t.env)?t.env:[t.env]).every(function(s){return Bo(s)});if(Ee[t.constant]=r,!!r)switch(Ee.name=t.name,typeof t.pr){case"string":Ee.isPR=!!ne[t.pr];break;case"object":"env"in t.pr?Ee.isPR=t.pr.env in ne&&ne[t.pr.env]!==t.pr.ne:"any"in t.pr?Ee.isPR=t.pr.any.some(function(s){return!!ne[s]}):Ee.isPR=Bo(t.pr);break;default:Ee.isPR=null}});Ee.isCI=!!(ne.CI!=="false"&&(ne.BUILD_ID||ne.BUILD_NUMBER||ne.CI||ne.CI_APP_ID||ne.CI_BUILD_ID||ne.CI_BUILD_NUMBER||ne.CI_NAME||ne.CONTINUOUS_INTEGRATION||ne.RUN_ID||Ee.name||!1));function Bo(t){return typeof t=="string"?!!ne[t]:"env"in t?ne[t.env]&&ne[t.env].includes(t.includes):"any"in t?t.any.some(function(e){return!!ne[e]}):Object.keys(t).every(function(e){return ne[e]===t[e]})}});var Yo=p((_O,er)=>{"use strict";var tw=typeof process<"u"&&process.env.TERM_PROGRAM==="Hyper",rw=typeof process<"u"&&process.platform==="win32",Fo=typeof process<"u"&&process.platform==="linux",mi={ballotDisabled:"\u2612",ballotOff:"\u2610",ballotOn:"\u2611",bullet:"\u2022",bulletWhite:"\u25E6",fullBlock:"\u2588",heart:"\u2764",identicalTo:"\u2261",line:"\u2500",mark:"\u203B",middot:"\xB7",minus:"\uFF0D",multiplication:"\xD7",obelus:"\xF7",pencilDownRight:"\u270E",pencilRight:"\u270F",pencilUpRight:"\u2710",percent:"%",pilcrow2:"\u2761",pilcrow:"\xB6",plusMinus:"\xB1",question:"?",section:"\xA7",starsOff:"\u2606",starsOn:"\u2605",upDownArrow:"\u2195"},Go=Object.assign({},mi,{check:"\u221A",cross:"\xD7",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"\xBB",radioOff:"( )",radioOn:"(*)",warning:"\u203C"}),Wo=Object.assign({},mi,{ballotCross:"\u2718",check:"\u2714",cross:"\u2716",ellipsisLarge:"\u22EF",ellipsis:"\u2026",info:"\u2139",questionFull:"\uFF1F",questionSmall:"\uFE56",pointer:Fo?"\u25B8":"\u276F",pointerSmall:Fo?"\u2023":"\u203A",radioOff:"\u25EF",radioOn:"\u25C9",warning:"\u26A0"});er.exports=rw&&!tw?Go:Wo;Reflect.defineProperty(er.exports,"common",{enumerable:!1,value:mi});Reflect.defineProperty(er.exports,"windows",{enumerable:!1,value:Go});Reflect.defineProperty(er.exports,"other",{enumerable:!1,value:Wo})});var Es=p((EO,yi)=>{"use strict";var sw=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),iw=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,nw=()=>typeof process<"u"?process.env.FORCE_COLOR!=="0":!1,Ko=()=>{let t={enabled:nw(),visible:!0,styles:{},keys:{}},e=n=>{let a=n.open=`\x1B[${n.codes[0]}m`,o=n.close=`\x1B[${n.codes[1]}m`,l=n.regex=new RegExp(`\\u001b\\[${n.codes[1]}m`,"g");return n.wrap=(c,u)=>{c.includes(o)&&(c=c.replace(l,o+a));let h=a+c+o;return u?h.replace(/\r*\n/g,`${o}$&${a}`):h},n},r=(n,a,o)=>typeof n=="function"?n(a):n.wrap(a,o),s=(n,a)=>{if(n===""||n==null)return"";if(t.enabled===!1)return n;if(t.visible===!1)return"";let o=""+n,l=o.includes(`
`),c=a.length;for(c>0&&a.includes("unstyle")&&(a=[...new Set(["unstyle",...a])].reverse());c-- >0;)o=r(t.styles[a[c]],o,l);return o},i=(n,a,o)=>{t.styles[n]=e({name:n,codes:a}),(t.keys[o]||(t.keys[o]=[])).push(n),Reflect.defineProperty(t,n,{configurable:!0,enumerable:!0,set(c){t.alias(n,c)},get(){let c=u=>s(u,c.stack);return Reflect.setPrototypeOf(c,t),c.stack=this.stack?this.stack.concat(n):[n],c}})};return i("reset",[0,0],"modifier"),i("bold",[1,22],"modifier"),i("dim",[2,22],"modifier"),i("italic",[3,23],"modifier"),i("underline",[4,24],"modifier"),i("inverse",[7,27],"modifier"),i("hidden",[8,28],"modifier"),i("strikethrough",[9,29],"modifier"),i("black",[30,39],"color"),i("red",[31,39],"color"),i("green",[32,39],"color"),i("yellow",[33,39],"color"),i("blue",[34,39],"color"),i("magenta",[35,39],"color"),i("cyan",[36,39],"color"),i("white",[37,39],"color"),i("gray",[90,39],"color"),i("grey",[90,39],"color"),i("bgBlack",[40,49],"bg"),i("bgRed",[41,49],"bg"),i("bgGreen",[42,49],"bg"),i("bgYellow",[43,49],"bg"),i("bgBlue",[44,49],"bg"),i("bgMagenta",[45,49],"bg"),i("bgCyan",[46,49],"bg"),i("bgWhite",[47,49],"bg"),i("blackBright",[90,39],"bright"),i("redBright",[91,39],"bright"),i("greenBright",[92,39],"bright"),i("yellowBright",[93,39],"bright"),i("blueBright",[94,39],"bright"),i("magentaBright",[95,39],"bright"),i("cyanBright",[96,39],"bright"),i("whiteBright",[97,39],"bright"),i("bgBlackBright",[100,49],"bgBright"),i("bgRedBright",[101,49],"bgBright"),i("bgGreenBright",[102,49],"bgBright"),i("bgYellowBright",[103,49],"bgBright"),i("bgBlueBright",[104,49],"bgBright"),i("bgMagentaBright",[105,49],"bgBright"),i("bgCyanBright",[106,49],"bgBright"),i("bgWhiteBright",[107,49],"bgBright"),t.ansiRegex=iw,t.hasColor=t.hasAnsi=n=>(t.ansiRegex.lastIndex=0,typeof n=="string"&&n!==""&&t.ansiRegex.test(n)),t.alias=(n,a)=>{let o=typeof a=="string"?t[a]:a;if(typeof o!="function")throw new TypeError("Expected alias to be the name of an existing color (string) or a function");o.stack||(Reflect.defineProperty(o,"name",{value:n}),t.styles[n]=o,o.stack=[n]),Reflect.defineProperty(t,n,{configurable:!0,enumerable:!0,set(l){t.alias(n,l)},get(){let l=c=>s(c,l.stack);return Reflect.setPrototypeOf(l,t),l.stack=this.stack?this.stack.concat(o.stack):o.stack,l}})},t.theme=n=>{if(!sw(n))throw new TypeError("Expected theme to be an object");for(let a of Object.keys(n))t.alias(a,n[a]);return t},t.alias("unstyle",n=>typeof n=="string"&&n!==""?(t.ansiRegex.lastIndex=0,n.replace(t.ansiRegex,"")):""),t.alias("noop",n=>n),t.none=t.clear=t.noop,t.stripColor=t.unstyle,t.symbols=Yo(),t.define=i,t};yi.exports=Ko();yi.exports.create=Ko});var fe=p(B=>{"use strict";var aw=Object.prototype.toString,Te=Es(),Vo=!1,tr=new Set,zo={yellow:"blue",cyan:"red",green:"magenta",black:"white",blue:"yellow",red:"cyan",magenta:"green",white:"black"};B.longest=(t,e)=>t.reduce((r,s)=>Math.max(r,e?s[e].length:s.length),0);B.hasColor=t=>!!t&&Te.hasColor(t);var ks=B.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);B.nativeType=t=>aw.call(t).slice(8,-1).toLowerCase().replace(/\s/g,"");B.isAsyncFn=t=>B.nativeType(t)==="asyncfunction";B.isPrimitive=t=>t!=null&&typeof t!="object"&&typeof t!="function";B.resolve=(t,e,...r)=>typeof e=="function"?e.call(t,...r):e;B.scrollDown=(t=[])=>[...t.slice(1),t[0]];B.scrollUp=(t=[])=>[t.pop(),...t];B.reorder=(t=[])=>{let e=t.slice();return e.sort((r,s)=>r.index>s.index?1:r.index<s.index?-1:0),e};B.swap=(t,e,r)=>{let s=t.length,i=r===s?0:r<0?s-1:r,n=t[e];t[e]=t[i],t[i]=n};B.width=(t,e=80)=>{let r=t&&t.columns?t.columns:e;return t&&typeof t.getWindowSize=="function"&&(r=t.getWindowSize()[0]),process.platform==="win32"?r-1:r};B.height=(t,e=20)=>{let r=t&&t.rows?t.rows:e;return t&&typeof t.getWindowSize=="function"&&(r=t.getWindowSize()[1]),r};B.wordWrap=(t,e={})=>{if(!t)return t;typeof e=="number"&&(e={width:e});let{indent:r="",newline:s=`
`+r,width:i=80}=e,n=(s+r).match(/[^\S\n]/g)||[];i-=n.length;let a=`.{1,${i}}([\\s\\u200B]+|$)|[^\\s\\u200B]+?([\\s\\u200B]+|$)`,o=t.trim(),l=new RegExp(a,"g"),c=o.match(l)||[];return c=c.map(u=>u.replace(/\n$/,"")),e.padEnd&&(c=c.map(u=>u.padEnd(i," "))),e.padStart&&(c=c.map(u=>u.padStart(i," "))),r+c.join(s)};B.unmute=t=>{let e=t.stack.find(s=>Te.keys.color.includes(s));return e?Te[e]:t.stack.find(s=>s.slice(2)==="bg")?Te[e.slice(2)]:s=>s};B.pascal=t=>t?t[0].toUpperCase()+t.slice(1):"";B.inverse=t=>{if(!t||!t.stack)return t;let e=t.stack.find(s=>Te.keys.color.includes(s));if(e){let s=Te["bg"+B.pascal(e)];return s?s.black:t}let r=t.stack.find(s=>s.slice(0,2)==="bg");return r?Te[r.slice(2).toLowerCase()]||t:Te.none};B.complement=t=>{if(!t||!t.stack)return t;let e=t.stack.find(s=>Te.keys.color.includes(s)),r=t.stack.find(s=>s.slice(0,2)==="bg");if(e&&!r)return Te[zo[e]||e];if(r){let s=r.slice(2).toLowerCase(),i=zo[s];return i&&Te["bg"+B.pascal(i)]||t}return Te.none};B.meridiem=t=>{let e=t.getHours(),r=t.getMinutes(),s=e>=12?"pm":"am";e=e%12;let i=e===0?12:e,n=r<10?"0"+r:r;return i+":"+n+" "+s};B.set=(t={},e="",r)=>e.split(".").reduce((s,i,n,a)=>{let o=a.length-1>n?s[i]||{}:r;return!B.isObject(o)&&n<a.length-1&&(o={}),s[i]=o},t);B.get=(t={},e="",r)=>{let s=t[e]==null?e.split(".").reduce((i,n)=>i&&i[n],t):t[e];return s??r};B.mixin=(t,e)=>{if(!ks(t))return e;if(!ks(e))return t;for(let r of Object.keys(e)){let s=Object.getOwnPropertyDescriptor(e,r);if(hasOwnProperty.call(s,"value"))if(hasOwnProperty.call(t,r)&&ks(s.value)){let i=Object.getOwnPropertyDescriptor(t,r);ks(i.value)&&i.value!==s.value?t[r]=B.merge({},t[r],e[r]):Reflect.defineProperty(t,r,s)}else Reflect.defineProperty(t,r,s);else Reflect.defineProperty(t,r,s)}return t};B.merge=(...t)=>{let e={};for(let r of t)B.mixin(e,r);return e};B.mixinEmitter=(t,e)=>{let r=e.constructor.prototype;for(let s of Object.keys(r)){let i=r[s];typeof i=="function"?B.define(t,s,i.bind(e)):B.define(t,s,i)}};var Cs=(t,e)=>{Vo||(Vo=!0,tr.forEach(r=>r()),t===!0&&process.exit(128+e))},Qo=Cs.bind(null,!0,15),Xo=Cs.bind(null,!0,2);B.onExit=t=>(tr.size===0&&(process.once("SIGTERM",Qo),process.once("SIGINT",Xo),process.once("exit",Cs)),tr.add(t),()=>{tr.delete(t),tr.size===0&&(process.off("SIGTERM",Qo),process.off("SIGINT",Xo),process.off("exit",Cs))});B.define=(t,e,r)=>{Reflect.defineProperty(t,e,{value:r})};B.defineExport=(t,e,r)=>{let s;Reflect.defineProperty(t,e,{enumerable:!0,configurable:!0,set(i){s=i},get(){return s?s():r()}})}});var Zo=p((CO,Jo)=>{"use strict";Jo.exports=({onlyFirst:t=!1}={})=>{let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,t?void 0:"g")}});var et=p((RO,el)=>{"use strict";var ow=Zo();el.exports=t=>typeof t=="string"?t.replace(ow(),""):t});var tl=p(At=>{"use strict";At.ctrl={a:"first",b:"backward",c:"cancel",d:"deleteForward",e:"last",f:"forward",g:"reset",i:"tab",k:"cutForward",l:"reset",n:"newItem",m:"cancel",j:"submit",p:"search",r:"remove",s:"save",u:"undo",w:"cutLeft",x:"toggleCursor",v:"paste"};At.shift={up:"shiftUp",down:"shiftDown",left:"shiftLeft",right:"shiftRight",tab:"prev"};At.fn={up:"pageUp",down:"pageDown",left:"pageLeft",right:"pageRight",delete:"deleteForward"};At.option={b:"backward",f:"forward",d:"cutRight",left:"cutLeft",up:"altUp",down:"altDown"};At.keys={pageup:"pageUp",pagedown:"pageDown",home:"home",end:"end",cancel:"cancel",delete:"deleteForward",backspace:"delete",down:"down",enter:"submit",escape:"cancel",left:"left",space:"space",number:"number",return:"submit",right:"right",tab:"next",up:"up"}});var sl=p((TO,rl)=>{"use strict";rl.exports=class{_queue=[];_executing=!1;_jobRunner=null;constructor(e){this._jobRunner=e}enqueue=(...e)=>{this._queue.push(e),this._dequeue()};destroy(){this._queue.length=0,this._jobRunner=null}_dequeue(){this._executing||!this._queue.length||(this._executing=!0,this._jobRunner(...this._queue.shift()),setTimeout(()=>{this._executing=!1,this._dequeue()}))}}});var wi=p((OO,nl)=>{"use strict";var il=m("readline"),lw=tl(),cw=sl(),uw=/^(?:\x1b)([a-zA-Z0-9])$/,hw=/^(?:\x1b+)(O|N|\[|\[\[)(?:(\d+)(?:;(\d+))?([~^$])|(?:1;)?(\d+)?([a-zA-Z]))/,pw={OP:"f1",OQ:"f2",OR:"f3",OS:"f4","[11~":"f1","[12~":"f2","[13~":"f3","[14~":"f4","[[A":"f1","[[B":"f2","[[C":"f3","[[D":"f4","[[E":"f5","[15~":"f5","[17~":"f6","[18~":"f7","[19~":"f8","[20~":"f9","[21~":"f10","[23~":"f11","[24~":"f12","[A":"up","[B":"down","[C":"right","[D":"left","[E":"clear","[F":"end","[H":"home",OA:"up",OB:"down",OC:"right",OD:"left",OE:"clear",OF:"end",OH:"home","[1~":"home","[2~":"insert","[3~":"delete","[4~":"end","[5~":"pageup","[6~":"pagedown","[[5~":"pageup","[[6~":"pagedown","[7~":"home","[8~":"end","[a":"up","[b":"down","[c":"right","[d":"left","[e":"clear","[2$":"insert","[3$":"delete","[5$":"pageup","[6$":"pagedown","[7$":"home","[8$":"end",Oa:"up",Ob:"down",Oc:"right",Od:"left",Oe:"clear","[2^":"insert","[3^":"delete","[5^":"pageup","[6^":"pagedown","[7^":"home","[8^":"end","[Z":"tab"};function dw(t){return["[a","[b","[c","[d","[e","[2$","[3$","[5$","[6$","[7$","[8$","[Z"].includes(t)}function fw(t){return["Oa","Ob","Oc","Od","Oe","[2^","[3^","[5^","[6^","[7^","[8^"].includes(t)}var Rs=(t="",e={})=>{let r,s={name:e.name,ctrl:!1,meta:!1,shift:!1,option:!1,sequence:t,raw:t,...e};if(Buffer.isBuffer(t)?t[0]>127&&t[1]===void 0?(t[0]-=128,t="\x1B"+String(t)):t=String(t):t!==void 0&&typeof t!="string"?t=String(t):t||(t=s.sequence||""),s.sequence=s.sequence||t||s.name,t==="\r")s.raw=void 0,s.name="return";else if(t===`
`)s.name="enter";else if(t==="	")s.name="tab";else if(t==="\b"||t==="\x7F"||t==="\x1B\x7F"||t==="\x1B\b")s.name="backspace",s.meta=t.charAt(0)==="\x1B";else if(t==="\x1B"||t==="\x1B\x1B")s.name="escape",s.meta=t.length===2;else if(t===" "||t==="\x1B ")s.name="space",s.meta=t.length===2;else if(t<="")s.name=String.fromCharCode(t.charCodeAt(0)+"a".charCodeAt(0)-1),s.ctrl=!0;else if(t.length===1&&t>="0"&&t<="9")s.name="number";else if(t.length===1&&t>="a"&&t<="z")s.name=t;else if(t.length===1&&t>="A"&&t<="Z")s.name=t.toLowerCase(),s.shift=!0;else if(r=uw.exec(t))s.meta=!0,s.shift=/^[A-Z]$/.test(r[1]);else if(r=hw.exec(t)){let i=[...t];i[0]==="\x1B"&&i[1]==="\x1B"&&(s.option=!0);let n=[r[1],r[2],r[4],r[6]].filter(Boolean).join(""),a=(r[3]||r[5]||1)-1;s.ctrl=!!(a&4),s.meta=!!(a&10),s.shift=!!(a&1),s.code=n,s.name=pw[n],s.shift=dw(n)||s.shift,s.ctrl=fw(n)||s.ctrl}return s};Rs.listen=(t={},e)=>{let{stdin:r}=t;if(!r||r!==process.stdin&&!r.isTTY)throw new Error("Invalid stream passed");let s=il.createInterface({terminal:!0,input:r});il.emitKeypressEvents(r,s);let i=new cw((o,l)=>e(o,Rs(o,l),s)),n=r.isRaw;return r.isTTY&&r.setRawMode(!0),r.on("keypress",i.enqueue),s.resume(),()=>{r.isTTY&&r.setRawMode(n),r.removeListener("keypress",i.enqueue),i.destroy(),s.pause(),s.close()}};Rs.action=(t,e,r)=>{let s={...lw,...r};return e.ctrl?(e.action=s.ctrl[e.name],e):e.option&&s.option?(e.action=s.option[e.name],e):e.shift?(e.action=s.shift[e.name],e):(e.action=s.keys[e.name],e)};nl.exports=Rs});var ol=p((PO,al)=>{"use strict";al.exports=t=>{t.timers=t.timers||{};let e=t.options.timers;if(!!e)for(let r of Object.keys(e)){let s=e[r];typeof s=="number"&&(s={interval:s}),gw(t,r,s)}};function gw(t,e,r={}){let s=t.timers[e]={name:e,start:Date.now(),ms:0,tick:0},i=r.interval||120;s.frames=r.frames||[],s.loading=!0;let n=setInterval(()=>{s.ms=Date.now()-s.start,s.tick++,t.render()},i);return s.stop=()=>{s.loading=!1,clearInterval(n)},Reflect.defineProperty(s,"interval",{value:n}),t.once("close",()=>s.stop()),s.stop}});var cl=p((qO,ll)=>{"use strict";var{define:mw,width:yw}=fe(),bi=class{constructor(e){let r=e.options;mw(this,"_prompt",e),this.type=e.type,this.name=e.name,this.message="",this.header="",this.footer="",this.error="",this.hint="",this.input="",this.cursor=0,this.index=0,this.lines=0,this.tick=0,this.prompt="",this.buffer="",this.width=yw(r.stdout||process.stdout),Object.assign(this,r),this.name=this.name||this.message,this.message=this.message||this.name,this.symbols=e.symbols,this.styles=e.styles,this.required=new Set,this.cancelled=!1,this.submitted=!1}clone(){let e={...this};return e.status=this.status,e.buffer=Buffer.from(e.buffer),delete e.clone,e}set color(e){this._color=e}get color(){let e=this.prompt.styles;if(this.cancelled)return e.cancelled;if(this.submitted)return e.submitted;let r=this._color||e[this.status];return typeof r=="function"?r:e.pending}set loading(e){this._loading=e}get loading(){return typeof this._loading=="boolean"?this._loading:this.loadingChoices?"choices":!1}get status(){return this.cancelled?"cancelled":this.submitted?"submitted":"pending"}};ll.exports=bi});var hl=p((UO,ul)=>{"use strict";var vi=fe(),he=Es(),xi={default:he.noop,noop:he.noop,set inverse(t){this._inverse=t},get inverse(){return this._inverse||vi.inverse(this.primary)},set complement(t){this._complement=t},get complement(){return this._complement||vi.complement(this.primary)},primary:he.cyan,success:he.green,danger:he.magenta,strong:he.bold,warning:he.yellow,muted:he.dim,disabled:he.gray,dark:he.dim.gray,underline:he.underline,set info(t){this._info=t},get info(){return this._info||this.primary},set em(t){this._em=t},get em(){return this._em||this.primary.underline},set heading(t){this._heading=t},get heading(){return this._heading||this.muted.underline},set pending(t){this._pending=t},get pending(){return this._pending||this.primary},set submitted(t){this._submitted=t},get submitted(){return this._submitted||this.success},set cancelled(t){this._cancelled=t},get cancelled(){return this._cancelled||this.danger},set typing(t){this._typing=t},get typing(){return this._typing||this.dim},set placeholder(t){this._placeholder=t},get placeholder(){return this._placeholder||this.primary.dim},set highlight(t){this._highlight=t},get highlight(){return this._highlight||this.inverse}};xi.merge=(t={})=>{t.styles&&typeof t.styles.enabled=="boolean"&&(he.enabled=t.styles.enabled),t.styles&&typeof t.styles.visible=="boolean"&&(he.visible=t.styles.visible);let e=vi.merge({},xi,t.styles);delete e.merge;for(let r of Object.keys(he))hasOwnProperty.call(e,r)||Reflect.defineProperty(e,r,{get:()=>he[r]});for(let r of Object.keys(he.styles))hasOwnProperty.call(e,r)||Reflect.defineProperty(e,r,{get:()=>he[r]});return e};ul.exports=xi});var dl=p((IO,pl)=>{"use strict";var _i=process.platform==="win32",Ve=Es(),ww=fe(),Ei={...Ve.symbols,upDownDoubleArrow:"\u21D5",upDownDoubleArrow2:"\u2B0D",upDownArrow:"\u2195",asterisk:"*",asterism:"\u2042",bulletWhite:"\u25E6",electricArrow:"\u2301",ellipsisLarge:"\u22EF",ellipsisSmall:"\u2026",fullBlock:"\u2588",identicalTo:"\u2261",indicator:Ve.symbols.check,leftAngle:"\u2039",mark:"\u203B",minus:"\u2212",multiplication:"\xD7",obelus:"\xF7",percent:"%",pilcrow:"\xB6",pilcrow2:"\u2761",pencilUpRight:"\u2710",pencilDownRight:"\u270E",pencilRight:"\u270F",plus:"+",plusMinus:"\xB1",pointRight:"\u261E",rightAngle:"\u203A",section:"\xA7",hexagon:{off:"\u2B21",on:"\u2B22",disabled:"\u2B22"},ballot:{on:"\u2611",off:"\u2610",disabled:"\u2612"},stars:{on:"\u2605",off:"\u2606",disabled:"\u2606"},folder:{on:"\u25BC",off:"\u25B6",disabled:"\u25B6"},prefix:{pending:Ve.symbols.question,submitted:Ve.symbols.check,cancelled:Ve.symbols.cross},separator:{pending:Ve.symbols.pointerSmall,submitted:Ve.symbols.middot,cancelled:Ve.symbols.middot},radio:{off:_i?"( )":"\u25EF",on:_i?"(*)":"\u25C9",disabled:_i?"(|)":"\u24BE"},numbers:["\u24EA","\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246A","\u246B","\u246C","\u246D","\u246E","\u246F","\u2470","\u2471","\u2472","\u2473","\u3251","\u3252","\u3253","\u3254","\u3255","\u3256","\u3257","\u3258","\u3259","\u325A","\u325B","\u325C","\u325D","\u325E","\u325F","\u32B1","\u32B2","\u32B3","\u32B4","\u32B5","\u32B6","\u32B7","\u32B8","\u32B9","\u32BA","\u32BB","\u32BC","\u32BD","\u32BE","\u32BF"]};Ei.merge=t=>{let e=ww.merge({},Ve.symbols,Ei,t.symbols);return delete e.merge,e};pl.exports=Ei});var gl=p((DO,fl)=>{"use strict";var bw=hl(),vw=dl(),xw=fe();fl.exports=t=>{t.options=xw.merge({},t.options.theme,t.options),t.symbols=vw.merge(t.options),t.styles=bw.merge(t.options)}});var vl=p((wl,bl)=>{"use strict";var ml=process.env.TERM_PROGRAM==="Apple_Terminal",_w=et(),ki=fe(),Ne=bl.exports=wl,X="\x1B[",yl="\x07",Ci=!1,tt=Ne.code={bell:yl,beep:yl,beginning:`${X}G`,down:`${X}J`,esc:X,getPosition:`${X}6n`,hide:`${X}?25l`,line:`${X}2K`,lineEnd:`${X}K`,lineStart:`${X}1K`,restorePosition:X+(ml?"8":"u"),savePosition:X+(ml?"7":"s"),screen:`${X}2J`,show:`${X}?25h`,up:`${X}1J`},pt=Ne.cursor={get hidden(){return Ci},hide(){return Ci=!0,tt.hide},show(){return Ci=!1,tt.show},forward:(t=1)=>`${X}${t}C`,backward:(t=1)=>`${X}${t}D`,nextLine:(t=1)=>`${X}E`.repeat(t),prevLine:(t=1)=>`${X}F`.repeat(t),up:(t=1)=>t?`${X}${t}A`:"",down:(t=1)=>t?`${X}${t}B`:"",right:(t=1)=>t?`${X}${t}C`:"",left:(t=1)=>t?`${X}${t}D`:"",to(t,e){return e?`${X}${e+1};${t+1}H`:`${X}${t+1}G`},move(t=0,e=0){let r="";return r+=t<0?pt.left(-t):t>0?pt.right(t):"",r+=e<0?pt.up(-e):e>0?pt.down(e):"",r},strLen(t){for(var e=0,r=t.length,s=-1,i=0;i<r;i++)s=t.charCodeAt(i),s>=0&&s<=128?e+=1:e+=2;return e},restore(t={}){let{after:e,cursor:r,initial:s,input:i,prompt:n,size:a,value:o}=t;if(s=ki.isPrimitive(s)?String(s):"",i=ki.isPrimitive(i)?String(i):"",o=ki.isPrimitive(o)?String(o):"",a){let l=Ne.cursor.up(a)+Ne.cursor.to(this.strLen(n)),c=i.length-r;return c>0&&(l+=Ne.cursor.left(c)),l}if(o||e){let l=!i&&!!s?-this.strLen(s):-this.strLen(i)+r;return e&&(l-=this.strLen(e)),i===""&&s&&!n.includes(s)&&(l+=this.strLen(s)),Ne.cursor.move(l)}}},Ri=Ne.erase={screen:tt.screen,up:tt.up,down:tt.down,line:tt.line,lineEnd:tt.lineEnd,lineStart:tt.lineStart,lines(t){let e="";for(let r=0;r<t;r++)e+=Ne.erase.line+(r<t-1?Ne.cursor.up(1):"");return t&&(e+=Ne.code.beginning),e}};Ne.clear=(t="",e=process.stdout.columns)=>{if(!e)return Ri.line+pt.to(0);let r=n=>[..._w(n)].length,s=t.split(/\r?\n/),i=0;for(let n of s)i+=1+Math.floor(Math.max(r(n)-1,0)/e);return(Ri.line+pt.prevLine()).repeat(i-1)+Ri.line+pt.to(0)}});var Tt=p((NO,_l)=>{"use strict";var Ew=m("events"),xl=et(),Si=wi(),kw=ol(),Cw=cl(),Rw=gl(),we=fe(),dt=vl(),rr=class extends Ew{constructor(e={}){super(),this.name=e.name,this.type=e.type,this.options=e,Rw(this),kw(this),this.state=new Cw(this),this.initial=[e.initial,e.default].find(r=>r!=null),this.stdout=e.stdout||process.stdout,this.stdin=e.stdin||process.stdin,this.scale=e.scale||1,this.term=this.options.term||process.env.TERM_PROGRAM,this.margin=Aw(this.options.margin),this.setMaxListeners(0),Sw(this)}async keypress(e,r={}){this.keypressed=!0;let s=Si.action(e,Si(e,r),this.options.actions);this.state.keypress=s,this.emit("keypress",e,s),this.emit("state",this.state.clone());let i=this.options[s.action]||this[s.action]||this.dispatch;if(typeof i=="function")return await i.call(this,e,s);this.alert()}alert(){delete this.state.alert,this.options.show===!1?this.emit("alert"):this.stdout.write(dt.code.beep)}cursorHide(){this.stdout.write(dt.cursor.hide());let e=we.onExit(()=>this.cursorShow());this.on("close",()=>{this.cursorShow(),e()})}cursorShow(){this.stdout.write(dt.cursor.show())}write(e){!e||(this.stdout&&this.state.show!==!1&&this.stdout.write(e),this.state.buffer+=e)}clear(e=0){let r=this.state.buffer;this.state.buffer="",!(!r&&!e||this.options.show===!1)&&this.stdout.write(dt.cursor.down(e)+dt.clear(r,this.width))}restore(){if(this.state.closed||this.options.show===!1)return;let{prompt:e,after:r,rest:s}=this.sections(),{cursor:i,initial:n="",input:a="",value:o=""}=this,l=this.state.size=s.length,c={after:r,cursor:i,initial:n,input:a,prompt:e,size:l,value:o},u=dt.cursor.restore(c);u&&this.stdout.write(u)}sections(){let{buffer:e,input:r,prompt:s}=this.state;s=xl(s);let i=xl(e),n=i.indexOf(s),a=i.slice(0,n),l=i.slice(n).split(`
`),c=l[0],u=l[l.length-1],d=(s+(r?" "+r:"")).length,y=d<c.length?c.slice(d+1):"";return{header:a,prompt:c,after:y,rest:l.slice(1),last:u}}async submit(){this.state.submitted=!0,this.state.validating=!0,this.options.onSubmit&&await this.options.onSubmit.call(this,this.name,this.value,this);let e=this.state.error||await this.validate(this.value,this.state);if(e!==!0){let r=`
`+this.symbols.pointer+" ";typeof e=="string"?r+=e.trim():r+="Invalid input",this.state.error=`
`+this.styles.danger(r),this.state.submitted=!1,await this.render(),await this.alert(),this.state.validating=!1,this.state.error=void 0;return}this.state.validating=!1,await this.render(),await this.close(),this.value=await this.result(this.value),this.emit("submit",this.value)}async cancel(e){this.state.cancelled=this.state.submitted=!0,await this.render(),await this.close(),typeof this.options.onCancel=="function"&&await this.options.onCancel.call(this,this.name,this.value,this),this.emit("cancel",await this.error(e))}async close(){this.state.closed=!0;try{let e=this.sections(),r=Math.ceil(e.prompt.length/this.width);e.rest&&this.write(dt.cursor.down(e.rest.length)),this.write(`
`.repeat(r))}catch{}this.emit("close")}start(){!this.stop&&this.options.show!==!1&&(this.stop=Si.listen(this,this.keypress.bind(this)),this.once("close",this.stop),this.emit("start",this))}async skip(){return this.skipped=this.options.skip===!0,typeof this.options.skip=="function"&&(this.skipped=await this.options.skip.call(this,this.name,this.value)),this.skipped}async initialize(){let{format:e,options:r,result:s}=this;if(this.format=()=>e.call(this,this.value),this.result=()=>s.call(this,this.value),typeof r.initial=="function"&&(this.initial=await r.initial.call(this,this)),typeof r.onRun=="function"&&await r.onRun.call(this,this),typeof r.onSubmit=="function"){let i=r.onSubmit.bind(this),n=this.submit.bind(this);delete this.options.onSubmit,this.submit=async()=>(await i(this.name,this.value,this),n())}await this.start(),await this.render()}render(){throw new Error("expected prompt to have a custom render method")}run(){return new Promise(async(e,r)=>{if(this.once("submit",e),this.once("cancel",r),await this.skip())return this.render=()=>{},this.submit();await this.initialize(),this.emit("run")})}async element(e,r,s){let{options:i,state:n,symbols:a,timers:o}=this,l=o&&o[e];n.timer=l;let c=i[e]||n[e]||a[e],u=r&&r[e]!=null?r[e]:await c;if(u==="")return u;let h=await this.resolve(u,n,r,s);return!h&&r&&r[e]?this.resolve(c,n,r,s):h}async prefix(){let e=await this.element("prefix")||this.symbols,r=this.timers&&this.timers.prefix,s=this.state;return s.timer=r,we.isObject(e)&&(e=e[s.status]||e.pending),we.hasColor(e)?e:(this.styles[s.status]||this.styles.pending)(e)}async message(){let e=await this.element("message");return we.hasColor(e)?e:this.styles.strong(e)}async separator(){let e=await this.element("separator")||this.symbols,r=this.timers&&this.timers.separator,s=this.state;s.timer=r;let i=e[s.status]||e.pending||s.separator,n=await this.resolve(i,s);return we.isObject(n)&&(n=n[s.status]||n.pending),we.hasColor(n)?n:this.styles.muted(n)}async pointer(e,r){let s=await this.element("pointer",e,r);if(typeof s=="string"&&we.hasColor(s))return s;if(s){let i=this.styles,n=this.index===r,a=n?i.primary:c=>c,o=await this.resolve(s[n?"on":"off"]||s,this.state),l=we.hasColor(o)?o:a(o);return n?l:" ".repeat(o.length)}}async indicator(e,r){let s=await this.element("indicator",e,r);if(typeof s=="string"&&we.hasColor(s))return s;if(s){let i=this.styles,n=e.enabled===!0,a=n?i.success:i.dark,o=s[n?"on":"off"]||s;return we.hasColor(o)?o:a(o)}return""}body(){return null}footer(){if(this.state.status==="pending")return this.element("footer")}header(){if(this.state.status==="pending")return this.element("header")}async hint(){if(this.state.status==="pending"&&!this.isValue(this.state.input)){let e=await this.element("hint");return we.hasColor(e)?e:this.styles.muted(e)}}error(e){return this.state.submitted?"":e||this.state.error}format(e){return e}result(e){return e}validate(e){return this.options.required===!0?this.isValue(e):!0}isValue(e){return e!=null&&e!==""}resolve(e,...r){return we.resolve(this,e,...r)}get base(){return rr.prototype}get style(){return this.styles[this.state.status]}get height(){return this.options.rows||we.height(this.stdout,25)}get width(){return this.options.columns||we.width(this.stdout,80)}get size(){return{width:this.width,height:this.height}}set cursor(e){this.state.cursor=e}get cursor(){return this.state.cursor}set input(e){this.state.input=e}get input(){return this.state.input}set value(e){this.state.value=e}get value(){let{input:e,value:r}=this.state,s=[r,e].find(this.isValue.bind(this));return this.isValue(s)?s:this.initial}static get prompt(){return e=>new this(e).run()}};function Sw(t){let e=i=>t[i]===void 0||typeof t[i]=="function",r=["actions","choices","initial","margin","roles","styles","symbols","theme","timers","value"],s=["body","footer","error","header","hint","indicator","message","prefix","separator","skip"];for(let i of Object.keys(t.options)){if(r.includes(i)||/^on[A-Z]/.test(i))continue;let n=t.options[i];typeof n=="function"&&e(i)?s.includes(i)||(t[i]=n.bind(t)):typeof t[i]!="function"&&(t[i]=n)}}function Aw(t){typeof t=="number"&&(t=[t,t,t,t]);let e=[].concat(t||[]),r=i=>i%2===0?`
`:" ",s=[];for(let i=0;i<4;i++){let n=r(i);e[i]?s.push(n.repeat(e[i])):s.push("")}return s}_l.exports=rr});var Cl=p((jO,kl)=>{"use strict";var Tw=fe(),El={default(t,e){return e},checkbox(t,e){throw new Error("checkbox role is not implemented yet")},editable(t,e){throw new Error("editable role is not implemented yet")},expandable(t,e){throw new Error("expandable role is not implemented yet")},heading(t,e){return e.disabled="",e.indicator=[e.indicator," "].find(r=>r!=null),e.message=e.message||"",e},input(t,e){throw new Error("input role is not implemented yet")},option(t,e){return El.default(t,e)},radio(t,e){throw new Error("radio role is not implemented yet")},separator(t,e){return e.disabled="",e.indicator=[e.indicator," "].find(r=>r!=null),e.message=e.message||t.symbols.line.repeat(5),e},spacer(t,e){return e}};kl.exports=(t,e={})=>{let r=Tw.merge({},El,e.roles);return r[t]||r.default}});var sr=p(($O,Al)=>{"use strict";var Ow=et(),Pw=Tt(),qw=Cl(),Ss=fe(),{reorder:Ai,scrollUp:Uw,scrollDown:Iw,isObject:Rl,swap:Dw}=Ss,Ti=class extends Pw{constructor(e){super(e),this.cursorHide(),this.maxSelected=e.maxSelected||1/0,this.multiple=e.multiple||!1,this.initial=e.initial||0,this.delay=e.delay||0,this.longest=0,this.num=""}async initialize(){typeof this.options.initial=="function"&&(this.initial=await this.options.initial.call(this)),await this.reset(!0),await super.initialize()}async reset(){let{choices:e,initial:r,autofocus:s,suggest:i}=this.options;if(this.state._choices=[],this.state.choices=[],this.choices=await Promise.all(await this.toChoices(e)),this.choices.forEach(n=>n.enabled=!1),typeof i!="function"&&this.selectable.length===0)throw new Error("At least one choice must be selectable");Rl(r)&&(r=Object.keys(r)),Array.isArray(r)?(s!=null&&(this.index=this.findIndex(s)),r.forEach(n=>this.enable(this.find(n))),await this.render()):(s!=null&&(r=s),typeof r=="string"&&(r=this.findIndex(r)),typeof r=="number"&&r>-1&&(this.index=Math.max(0,Math.min(r,this.choices.length)),this.enable(this.find(this.index)))),this.isDisabled(this.focused)&&await this.down()}async toChoices(e,r){this.state.loadingChoices=!0;let s=[],i=0,n=async(a,o)=>{typeof a=="function"&&(a=await a.call(this)),a instanceof Promise&&(a=await a);for(let l=0;l<a.length;l++){let c=a[l]=await this.toChoice(a[l],i++,o);s.push(c),c.choices&&await n(c.choices,c)}return s};return n(e,r).then(a=>(this.state.loadingChoices=!1,a))}async toChoice(e,r,s){if(typeof e=="function"&&(e=await e.call(this,this)),e instanceof Promise&&(e=await e),typeof e=="string"&&(e={name:e}),e.normalized)return e;e.normalized=!0;let i=e.value;if(e=qw(e.role,this.options)(this,e),typeof e.disabled=="string"&&!e.hint&&(e.hint=e.disabled,e.disabled=!0),e.disabled===!0&&e.hint==null&&(e.hint="(disabled)"),e.index!=null)return e;e.name=e.name||e.key||e.title||e.value||e.message,e.message=e.message||e.name||"",e.value=[e.value,e.name].find(this.isValue.bind(this)),e.input="",e.index=r,e.cursor=0,Ss.define(e,"parent",s),e.level=s?s.level+1:1,e.indent==null&&(e.indent=s?s.indent+"  ":e.indent||""),e.path=s?s.path+"."+e.name:e.name,e.enabled=!!(this.multiple&&!this.isDisabled(e)&&(e.enabled||this.isSelected(e))),this.isDisabled(e)||(this.longest=Math.max(this.longest,Ow(e.message).length));let a={...e};return e.reset=(o=a.input,l=a.value)=>{for(let c of Object.keys(a))e[c]=a[c];e.input=o,e.value=l},i==null&&typeof e.initial=="function"&&(e.input=await e.initial.call(this,this.state,e,r)),e}async onChoice(e,r){this.emit("choice",e,r,this),typeof e.onChoice=="function"&&await e.onChoice.call(this,this.state,e,r)}async addChoice(e,r,s){let i=await this.toChoice(e,r,s);return this.choices.push(i),this.index=this.choices.length-1,this.limit=this.choices.length,i}async newItem(e,r,s){let i={name:"New choice name?",editable:!0,newChoice:!0,...e},n=await this.addChoice(i,r,s);return n.updateChoice=()=>{delete n.newChoice,n.name=n.message=n.input,n.input="",n.cursor=0},this.render()}indent(e){return e.indent==null?e.level>1?"  ".repeat(e.level-1):"":e.indent}dispatch(e,r){if(this.multiple&&this[r.name])return this[r.name]();this.alert()}focus(e,r){return typeof r!="boolean"&&(r=e.enabled),r&&!e.enabled&&this.selected.length>=this.maxSelected?this.alert():(this.index=e.index,e.enabled=r&&!this.isDisabled(e),e)}space(){if(!this.multiple)return this.alert();if(!!this.focused)return this.toggle(this.focused),this.render()}a(){if(this.maxSelected<this.choices.length)return this.alert();let e=this.selectable.every(r=>r.enabled);return this.choices.forEach(r=>r.enabled=!e),this.render()}i(){return this.choices.length-this.selected.length>this.maxSelected?this.alert():(this.choices.forEach(e=>e.enabled=!e.enabled),this.render())}g(){if(!this.choices.some(r=>!!r.parent))return this.a();let e=this.focused;return this.toggle(e.parent&&!e.choices?e.parent:e),this.render()}toggle(e,r){if(!e.enabled&&this.selected.length>=this.maxSelected)return this.alert();typeof r!="boolean"&&(r=!e.enabled),e.enabled=r,e.choices&&e.choices.forEach(i=>this.toggle(i,r));let s=e.parent;for(;s;){let i=s.choices.filter(n=>this.isDisabled(n));s.enabled=i.every(n=>n.enabled===!0),s=s.parent}return Sl(this,this.choices),this.emit("toggle",e,this),e}enable(e){return this.selected.length>=this.maxSelected?this.alert():(e.enabled=!this.isDisabled(e),e.choices&&e.choices.forEach(this.enable.bind(this)),e)}disable(e){return e.enabled=!1,e.choices&&e.choices.forEach(this.disable.bind(this)),e}number(e){this.num+=e;let r=s=>{let i=Number(s);if(i>this.choices.length-1)return this.alert();let n=this.focused,a=this.choices.find(o=>i===o.index);if(!a.enabled&&this.selected.length>=this.maxSelected)return this.alert();if(this.visible.indexOf(a)===-1){let o=Ai(this.choices),l=o.indexOf(a);if(n.index>l){let c=o.slice(l,l+this.limit),u=o.filter(h=>!c.includes(h));this.choices=c.concat(u)}else{let c=l-this.limit+1;this.choices=o.slice(c).concat(o.slice(0,c))}}return this.index=this.choices.indexOf(a),this.toggle(this.focused),this.render()};return clearTimeout(this.numberTimeout),new Promise(s=>{let i=this.choices.length,n=this.num,a=(o=!1,l)=>{clearTimeout(this.numberTimeout),o&&(l=r(n)),this.num="",s(l)};if(n==="0"||n.length===1&&Number(n+"0")>i)return a(!0);if(Number(n)>i)return a(!1,this.alert());this.numberTimeout=setTimeout(()=>a(!0),this.delay)})}home(){return this.choices=Ai(this.choices),this.index=0,this.render()}end(){let e=this.choices.length-this.limit,r=Ai(this.choices);return this.choices=r.slice(e).concat(r.slice(0,e)),this.index=this.limit-1,this.render()}first(){return this.index=0,this.render()}last(){return this.index=this.visible.length-1,this.render()}prev(){return this.visible.length<=1?this.alert():this.up()}next(){return this.visible.length<=1?this.alert():this.down()}right(){return this.cursor>=this.input.length?this.alert():(this.cursor++,this.render())}left(){return this.cursor<=0?this.alert():(this.cursor--,this.render())}up(){let e=this.choices.length,r=this.visible.length,s=this.index;return this.options.scroll===!1&&s===0?this.alert():e>r&&s===0?this.scrollUp():(this.index=(s-1%e+e)%e,this.isDisabled()&&!this.allChoicesAreDisabled()?this.up():this.render())}down(){let e=this.choices.length,r=this.visible.length,s=this.index;return this.options.scroll===!1&&s===r-1?this.alert():e>r&&s===r-1?this.scrollDown():(this.index=(s+1)%e,this.isDisabled()&&!this.allChoicesAreDisabled()?this.down():this.render())}scrollUp(e=0){return this.choices=Uw(this.choices),this.index=e,this.isDisabled()?this.up():this.render()}scrollDown(e=this.visible.length-1){return this.choices=Iw(this.choices),this.index=e,this.isDisabled()?this.down():this.render()}async shiftUp(){if(this.options.sort===!0){this.sorting=!0,this.swap(this.index-1),await this.up(),this.sorting=!1;return}return this.scrollUp(this.index)}async shiftDown(){if(this.options.sort===!0){this.sorting=!0,this.swap(this.index+1),await this.down(),this.sorting=!1;return}return this.scrollDown(this.index)}pageUp(){return this.visible.length<=1?this.alert():(this.limit=Math.max(this.limit-1,0),this.index=Math.min(this.limit-1,this.index),this._limit=this.limit,this.isDisabled()?this.up():this.render())}pageDown(){return this.visible.length>=this.choices.length?this.alert():(this.index=Math.max(0,this.index),this.limit=Math.min(this.limit+1,this.choices.length),this._limit=this.limit,this.isDisabled()?this.down():this.render())}swap(e){Dw(this.choices,this.index,e)}allChoicesAreDisabled(e=this.choices){return e.every(r=>this.isDisabled(r))}isDisabled(e=this.focused){return e&&["disabled","collapsed","hidden","completing","readonly"].some(s=>e[s]===!0)?!0:e&&e.role==="heading"}isEnabled(e=this.focused){if(Array.isArray(e))return e.every(r=>this.isEnabled(r));if(e.choices){let r=e.choices.filter(s=>!this.isDisabled(s));return e.enabled&&r.every(s=>this.isEnabled(s))}return e.enabled&&!this.isDisabled(e)}isChoice(e,r){return e.name===r||e.index===Number(r)}isSelected(e){return Array.isArray(this.initial)?this.initial.some(r=>this.isChoice(e,r)):this.isChoice(e,this.initial)}map(e=[],r="value"){return[].concat(e||[]).reduce((s,i)=>(s[i]=this.find(i,r),s),{})}filter(e,r){let i=typeof e=="function"?e:(o,l)=>[o.name,l].includes(e),a=(this.options.multiple?this.state._choices:this.choices).filter(i);return r?a.map(o=>o[r]):a}find(e,r){if(Rl(e))return r?e[r]:e;let i=typeof e=="function"?e:(a,o)=>[a.name,o].includes(e),n=this.choices.find(i);if(n)return r?n[r]:n}findIndex(e){return this.choices.indexOf(this.find(e))}async submit(){let e=this.focused;if(!e)return this.alert();if(e.newChoice)return e.input?(e.updateChoice(),this.render()):this.alert();if(this.choices.some(a=>a.newChoice))return this.alert();let{reorder:r,sort:s}=this.options,i=this.multiple===!0,n=this.selected;return n===void 0?this.alert():(Array.isArray(n)&&r!==!1&&s!==!0&&(n=Ss.reorder(n)),this.value=i?n.map(a=>a.name):n.name,super.submit())}set choices(e=[]){this.state._choices=this.state._choices||[],this.state.choices=e;for(let r of e)this.state._choices.some(s=>s.name===r.name)||this.state._choices.push(r);if(!this._initial&&this.options.initial){this._initial=!0;let r=this.initial;if(typeof r=="string"||typeof r=="number"){let s=this.find(r);s&&(this.initial=s.index,this.focus(s,!0))}}}get choices(){return Sl(this,this.state.choices||[])}set visible(e){this.state.visible=e}get visible(){return(this.state.visible||this.choices).slice(0,this.limit)}set limit(e){this.state.limit=e}get limit(){let{state:e,options:r,choices:s}=this,i=e.limit||this._limit||r.limit||s.length;return Math.min(i,this.height)}set value(e){super.value=e}get value(){return typeof super.value!="string"&&super.value===this.initial?this.input:super.value}set index(e){this.state.index=e}get index(){return Math.max(0,this.state?this.state.index:0)}get enabled(){return this.filter(this.isEnabled.bind(this))}get focused(){let e=this.choices[this.index];return e&&this.state.submitted&&this.multiple!==!0&&(e.enabled=!0),e}get selectable(){return this.choices.filter(e=>!this.isDisabled(e))}get selected(){return this.multiple?this.enabled:this.focused}};function Sl(t,e){if(e instanceof Promise)return e;if(typeof e=="function"){if(Ss.isAsyncFn(e))return e;e=e.call(t,t)}for(let r of e){if(Array.isArray(r.choices)){let s=r.choices.filter(i=>!t.isDisabled(i));r.enabled=s.every(i=>i.enabled===!0)}t.isDisabled(r)===!0&&delete r.enabled}return e}Al.exports=Ti});var rt=p((LO,Tl)=>{"use strict";var Nw=sr(),Oi=fe(),Pi=class extends Nw{constructor(e){super(e),this.emptyError=this.options.emptyError||"No items were selected"}async dispatch(e,r){if(this.multiple)return this[r.name]?await this[r.name](e,r):await super.dispatch(e,r);this.alert()}separator(){if(this.options.separator)return super.separator();let e=this.styles.muted(this.symbols.ellipsis);return this.state.submitted?super.separator():e}pointer(e,r){return!this.multiple||this.options.pointer?super.pointer(e,r):""}indicator(e,r){return this.multiple?super.indicator(e,r):""}choiceMessage(e,r){let s=this.resolve(e.message,this.state,e,r);return e.role==="heading"&&!Oi.hasColor(s)&&(s=this.styles.strong(s)),this.resolve(s,this.state,e,r)}choiceSeparator(){return":"}async renderChoice(e,r){await this.onChoice(e,r);let s=this.index===r,i=await this.pointer(e,r),n=await this.indicator(e,r)+(e.pad||""),a=await this.resolve(e.hint,this.state,e,r);a&&!Oi.hasColor(a)&&(a=this.styles.muted(a));let o=this.indent(e),l=await this.choiceMessage(e,r),c=()=>[this.margin[3],o+i+n,l,this.margin[1],a].filter(Boolean).join(" ");return e.role==="heading"?c():e.disabled?(Oi.hasColor(l)||(l=this.styles.disabled(l)),c()):(s&&(l=this.styles.em(l)),c())}async renderChoices(){if(this.state.loading==="choices")return this.styles.warning("Loading choices");if(this.state.submitted)return"";let e=this.visible.map(async(n,a)=>await this.renderChoice(n,a)),r=await Promise.all(e);r.length||r.push(this.styles.danger("No matching choices"));let s=this.margin[0]+r.join(`
`),i;return this.options.choicesHeader&&(i=await this.resolve(this.options.choicesHeader,this.state)),[i,s].filter(Boolean).join(`
`)}format(){return!this.state.submitted||this.state.cancelled?"":Array.isArray(this.selected)?this.selected.map(e=>this.styles.primary(e.name)).join(", "):this.styles.primary(this.selected.name)}async render(){let{submitted:e,size:r}=this.state,s="",i=await this.header(),n=await this.prefix(),a=await this.separator(),o=await this.message();this.options.promptLine!==!1&&(s=[n,o,a,""].join(" "),this.state.prompt=s);let l=await this.format(),c=await this.error()||await this.hint(),u=await this.renderChoices(),h=await this.footer();l&&(s+=l),c&&!s.includes(c)&&(s+=" "+c),e&&!l&&!u.trim()&&this.multiple&&this.emptyError!=null&&(s+=this.styles.danger(this.emptyError)),this.clear(r),this.write([i,s,u,h].filter(Boolean).join(`
`)),this.write(this.margin[2]),this.restore()}};Tl.exports=Pi});var Pl=p((MO,Ol)=>{"use strict";var jw=rt(),$w=(t,e)=>{let r=t?new RegExp(t,"ig"):/$^/;return s=>t?s.replace(r,i=>e(i)):s},qi=class extends jw{constructor(e){super(e),this.cursorShow()}moveCursor(e){this.state.cursor+=e}dispatch(e){return this.append(e)}space(e){return this.options.multiple?super.space(e):this.append(e)}append(e){let{cursor:r,input:s}=this.state;return this.input=s.slice(0,r)+e+s.slice(r),this.moveCursor(1),this.complete()}delete(){let{cursor:e,input:r}=this.state;return r?(this.input=r.slice(0,e-1)+r.slice(e),this.moveCursor(-1),this.complete()):this.alert()}deleteForward(){let{cursor:e,input:r}=this.state;return r[e]===void 0?this.alert():(this.input=`${r}`.slice(0,e)+`${r}`.slice(e+1),this.complete())}number(e){return this.append(e)}async complete(){this.completing=!0,this.choices=await this.suggest(this.input,this.state._choices),this.state.limit=void 0,this.index=Math.min(Math.max(this.visible.length-1,0),this.index),await this.render(),this.completing=!1}suggest(e=this.input,r=this.state._choices){if(typeof this.options.suggest=="function")return this.options.suggest.call(this,e,r);let s=e.toLowerCase();return r.filter(i=>i.message.toLowerCase().includes(s))}pointer(){return""}format(){if(!this.focused)return this.input;if(this.options.multiple&&this.state.submitted)return this.selected.map(e=>this.styles.primary(e.message)).join(", ");if(this.state.submitted){let e=this.value=this.input=this.focused.value;return this.styles.primary(e)}return this.input}async render(){if(this.state.status!=="pending")return super.render();let e=this.options.highlight||this.styles.complement,r=(n,a)=>n&&(e.stack?e(n):e.call(this,n)),s=$w(this.input,r),i=this.choices;this.choices=i.map(n=>({...n,message:s(n.message)})),await super.render(),this.choices=i}submit(){return this.options.multiple&&(this.value=this.selected.map(e=>e.name)),super.submit()}};Ol.exports=qi});var Ii=p((BO,ql)=>{"use strict";var Ui=fe();ql.exports=(t,e={})=>{t.cursorHide();let{input:r="",initial:s="",pos:i,showCursor:n=!0,color:a}=e,o=a||t.styles.placeholder,l=Ui.inverse(t.styles.primary),c=b=>l(t.styles.black(b)),u=r,h=" ",d=c(h);if(t.blink&&t.blink.off===!0&&(c=b=>b,d=""),n&&i===0&&s===""&&r==="")return c(h);if(n&&i===0&&(r===s||r===""))return c(s[0])+o(s.slice(1));s=Ui.isPrimitive(s)?`${s}`:"",r=Ui.isPrimitive(r)?`${r}`:"";let y=s&&s.startsWith(r)&&s!==r,f=y?c(s[r.length]):d;if(i!==r.length&&n===!0&&(u=r.slice(0,i)+c(r[i])+r.slice(i+1),f=""),n===!1&&(f=""),y){let b=t.styles.unstyle(u+f);return u+f+o(s.slice(b.length))}return u+f}});var As=p((HO,Ul)=>{"use strict";var Lw=et(),Mw=rt(),Bw=Ii(),Di=class extends Mw{constructor(e){super({...e,multiple:!0}),this.type="form",this.initial=this.options.initial,this.align=[this.options.align,"right"].find(r=>r!=null),this.emptyError="",this.values={}}async reset(e){return await super.reset(),e===!0&&(this._index=this.index),this.index=this._index,this.values={},this.choices.forEach(r=>r.reset&&r.reset()),this.render()}dispatch(e){return!!e&&this.append(e)}append(e){let r=this.focused;if(!r)return this.alert();let{cursor:s,input:i}=r;return r.value=r.input=i.slice(0,s)+e+i.slice(s),r.cursor++,this.render()}delete(){let e=this.focused;if(!e||e.cursor<=0)return this.alert();let{cursor:r,input:s}=e;return e.value=e.input=s.slice(0,r-1)+s.slice(r),e.cursor--,this.render()}deleteForward(){let e=this.focused;if(!e)return this.alert();let{cursor:r,input:s}=e;if(s[r]===void 0)return this.alert();let i=`${s}`.slice(0,r)+`${s}`.slice(r+1);return e.value=e.input=i,this.render()}right(){let e=this.focused;return e?e.cursor>=e.input.length?this.alert():(e.cursor++,this.render()):this.alert()}left(){let e=this.focused;return e?e.cursor<=0?this.alert():(e.cursor--,this.render()):this.alert()}space(e,r){return this.dispatch(e,r)}number(e,r){return this.dispatch(e,r)}next(){let e=this.focused;if(!e)return this.alert();let{initial:r,input:s}=e;return r&&r.startsWith(s)&&s!==r?(e.value=e.input=r,e.cursor=e.value.length,this.render()):super.next()}prev(){let e=this.focused;return e?e.cursor===0?super.prev():(e.value=e.input="",e.cursor=0,this.render()):this.alert()}separator(){return""}format(e){return this.state.submitted?"":super.format(e)}pointer(){return""}indicator(e){return e.input?"\u29BF":"\u2299"}async choiceSeparator(e,r){let s=await this.resolve(e.separator,this.state,e,r)||":";return s?" "+this.styles.disabled(s):""}async renderChoice(e,r){await this.onChoice(e,r);let{state:s,styles:i}=this,{cursor:n,initial:a="",name:o,input:l=""}=e,{muted:c,submitted:u,primary:h,danger:d}=i,y=this.index===r,f=e.validate||(()=>!0),b=await this.choiceSeparator(e,r),g=e.message;this.align==="right"&&(g=g.padStart(this.longest+1," ")),this.align==="left"&&(g=g.padEnd(this.longest+1," "));let v=this.values[o]=l||a,x=l?"success":"dark";await f.call(e,v,this.state)!==!0&&(x="danger");let w=i[x],C=w(await this.indicator(e,r))+(e.pad||""),R=this.indent(e),P=()=>[R,C,g+b,l].filter(Boolean).join(" ");if(s.submitted)return g=Lw(g),l=u(l),P();if(e.format)l=await e.format.call(this,l,e,r);else{let q=this.styles.muted;l=Bw(this,{input:l,initial:a,pos:n,showCursor:y,color:q})}return this.isValue(l)||(l=this.styles.muted(this.symbols.ellipsis)),e.result&&(this.values[o]=await e.result.call(this,v,e,r)),y&&(g=h(g)),e.error?l+=(l?" ":"")+d(e.error.trim()):e.hint&&(l+=(l?" ":"")+c(e.hint.trim())),P()}async submit(){return this.value=this.values,super.base.submit.call(this)}};Ul.exports=Di});var Ni=p((FO,Dl)=>{"use strict";var Hw=As(),Fw=()=>{throw new Error("expected prompt to have a custom authenticate method")},Il=(t=Fw)=>{class e extends Hw{constructor(s){super(s)}async submit(){this.value=await t.call(this,this.values,this.state),super.base.submit.call(this)}static create(s){return Il(s)}}return e};Dl.exports=Il()});var $l=p((GO,jl)=>{"use strict";var Gw=Ni();function Ww(t,e){return t.username===this.options.username&&t.password===this.options.password}var Nl=(t=Ww)=>{let e=[{name:"username",message:"username"},{name:"password",message:"password",format(s){return this.options.showPassword?s:(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(s.length))}}];class r extends Gw.create(t){constructor(i){super({...i,choices:e})}static create(i){return Nl(i)}}return r};jl.exports=Nl()});var Ts=p((WO,Ll)=>{"use strict";var Yw=Tt(),{isPrimitive:Kw,hasColor:Vw}=fe(),ji=class extends Yw{constructor(e){super(e),this.cursorHide()}async initialize(){let e=await this.resolve(this.initial,this.state);this.input=await this.cast(e),await super.initialize()}dispatch(e){return this.isValue(e)?(this.input=e,this.submit()):this.alert()}format(e){let{styles:r,state:s}=this;return s.submitted?r.success(e):r.primary(e)}cast(e){return this.isTrue(e)}isTrue(e){return/^[ty1]/i.test(e)}isFalse(e){return/^[fn0]/i.test(e)}isValue(e){return Kw(e)&&(this.isTrue(e)||this.isFalse(e))}async hint(){if(this.state.status==="pending"){let e=await this.element("hint");return Vw(e)?e:this.styles.muted(e)}}async render(){let{input:e,size:r}=this.state,s=await this.prefix(),i=await this.separator(),n=await this.message(),a=this.styles.muted(this.default),o=[s,n,a,i].filter(Boolean).join(" ");this.state.prompt=o;let l=await this.header(),c=this.value=this.cast(e),u=await this.format(c),h=await this.error()||await this.hint(),d=await this.footer();h&&!o.includes(h)&&(u+=" "+h),o+=" "+u,this.clear(r),this.write([l,o,d].filter(Boolean).join(`
`)),this.restore()}set value(e){super.value=e}get value(){return this.cast(super.value)}};Ll.exports=ji});var Bl=p((YO,Ml)=>{"use strict";var zw=Ts(),$i=class extends zw{constructor(e){super(e),this.default=this.options.default||(this.initial?"(Y/n)":"(y/N)")}};Ml.exports=$i});var Fl=p((KO,Hl)=>{"use strict";var Qw=rt(),Xw=As(),Ot=Xw.prototype,Li=class extends Qw{constructor(e){super({...e,multiple:!0}),this.align=[this.options.align,"left"].find(r=>r!=null),this.emptyError="",this.values={}}dispatch(e,r){let s=this.focused,i=s.parent||{};return!s.editable&&!i.editable&&(e==="a"||e==="i")?super[e]():Ot.dispatch.call(this,e,r)}append(e,r){return Ot.append.call(this,e,r)}delete(e,r){return Ot.delete.call(this,e,r)}space(e){return this.focused.editable?this.append(e):super.space()}number(e){return this.focused.editable?this.append(e):super.number(e)}next(){return this.focused.editable?Ot.next.call(this):super.next()}prev(){return this.focused.editable?Ot.prev.call(this):super.prev()}async indicator(e,r){let s=e.indicator||"",i=e.editable?s:super.indicator(e,r);return await this.resolve(i,this.state,e,r)||""}indent(e){return e.role==="heading"?"":e.editable?" ":"  "}async renderChoice(e,r){return e.indent="",e.editable?Ot.renderChoice.call(this,e,r):super.renderChoice(e,r)}error(){return""}footer(){return this.state.error}async validate(){let e=!0;for(let r of this.choices){if(typeof r.validate!="function"||r.role==="heading")continue;let s=r.parent?this.value[r.parent.name]:this.value;if(r.editable?s=r.value===r.name?r.initial||"":r.value:this.isDisabled(r)||(s=r.enabled===!0),e=await r.validate(s,this.state),e!==!0)break}return e!==!0&&(this.state.error=typeof e=="string"?e:"Invalid Input"),e}submit(){if(this.focused.newChoice===!0)return super.submit();if(this.choices.some(e=>e.newChoice))return this.alert();this.value={};for(let e of this.choices){let r=e.parent?this.value[e.parent.name]:this.value;if(e.role==="heading"){this.value[e.name]={};continue}e.editable?r[e.name]=e.value===e.name?e.initial||"":e.value:this.isDisabled(e)||(r[e.name]=e.enabled===!0)}return this.base.submit.call(this)}};Hl.exports=Li});var ft=p((VO,Gl)=>{"use strict";var Jw=Tt(),Zw=wi(),eb=Ii(),{isPrimitive:tb}=fe(),Mi=class extends Jw{constructor(e){super(e),this.initial=tb(this.initial)?String(this.initial):"",this.initial&&this.cursorHide(),this.state.prevCursor=0,this.state.clipboard=[],this.keypressTimeout=this.options.keypressTimeout!==void 0?this.options.keypressTimeout:null}async keypress(e,r=e?Zw(e,{}):{}){let s=Date.now(),i=s-this.lastKeypress;this.lastKeypress=s;let n=r.name==="return"||r.name==="enter",a=this.state.prevKeypress,o;if(this.state.prevKeypress=r,this.keypressTimeout!=null&&n){if(i<this.keypressTimeout)return this.submit();this.state.multilineBuffer=this.state.multilineBuffer||"",this.state.multilineBuffer+=e,o=!0,a=null}return(o||this.options.multiline&&n)&&(!a||a.name!=="return")?this.append(`
`,r):super.keypress(e,r)}moveCursor(e){this.cursor+=e}reset(){return this.input=this.value="",this.cursor=0,this.render()}dispatch(e,r){if(!e||r.ctrl||r.code)return this.alert();this.append(e)}append(e){let{cursor:r,input:s}=this.state;this.input=`${s}`.slice(0,r)+e+`${s}`.slice(r),this.moveCursor(String(e).length),this.render()}insert(e){this.append(e)}delete(){let{cursor:e,input:r}=this.state;if(e<=0)return this.alert();this.input=`${r}`.slice(0,e-1)+`${r}`.slice(e),this.moveCursor(-1),this.render()}deleteForward(){let{cursor:e,input:r}=this.state;if(r[e]===void 0)return this.alert();this.input=`${r}`.slice(0,e)+`${r}`.slice(e+1),this.render()}cutForward(){let e=this.cursor;if(this.input.length<=e)return this.alert();this.state.clipboard.push(this.input.slice(e)),this.input=this.input.slice(0,e),this.render()}cutLeft(){let e=this.cursor;if(e===0)return this.alert();let r=this.input.slice(0,e),s=this.input.slice(e),i=r.split(" ");this.state.clipboard.push(i.pop()),this.input=i.join(" "),this.cursor=this.input.length,this.input+=s,this.render()}paste(){if(!this.state.clipboard.length)return this.alert();this.insert(this.state.clipboard.pop()),this.render()}toggleCursor(){this.state.prevCursor?(this.cursor=this.state.prevCursor,this.state.prevCursor=0):(this.state.prevCursor=this.cursor,this.cursor=0),this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.input.length-1,this.render()}next(){let e=this.initial!=null?String(this.initial):"";if(!e||!e.startsWith(this.input))return this.alert();this.input=this.initial,this.cursor=this.initial.length,this.render()}prev(){if(!this.input)return this.alert();this.reset()}backward(){return this.left()}forward(){return this.right()}right(){return this.cursor>=this.input.length?this.alert():(this.moveCursor(1),this.render())}left(){return this.cursor<=0?this.alert():(this.moveCursor(-1),this.render())}isValue(e){return!!e}async format(e=this.value){let r=await this.resolve(this.initial,this.state);return this.state.submitted?this.styles.submitted(e||r):eb(this,{input:e,initial:r,pos:this.cursor})}async render(){let e=this.state.size,r=await this.prefix(),s=await this.separator(),i=await this.message(),n=[r,i,s].filter(Boolean).join(" ");this.state.prompt=n;let a=await this.header(),o=await this.format(),l=await this.error()||await this.hint(),c=await this.footer();l&&!o.includes(l)&&(o+=" "+l),n+=" "+o,this.clear(e),this.write([a,n,c].filter(Boolean).join(`
`)),this.restore()}};Gl.exports=Mi});var Yl=p((zO,Wl)=>{"use strict";var rb=t=>t.filter((e,r)=>t.lastIndexOf(e)===r),Os=t=>rb(t).filter(Boolean);Wl.exports=(t,e={},r="")=>{let{past:s=[],present:i=""}=e,n,a;switch(t){case"prev":case"undo":return n=s.slice(0,s.length-1),a=s[s.length-1]||"",{past:Os([r,...n]),present:a};case"next":case"redo":return n=s.slice(1),a=s[0]||"",{past:Os([...n,r]),present:a};case"save":return{past:Os([...s,r]),present:""};case"remove":return a=Os(s.filter(o=>o!==r)),i="",a.length&&(i=a.pop()),{past:a,present:i};default:throw new Error(`Invalid action: "${t}"`)}}});var Hi=p((QO,Vl)=>{"use strict";var sb=ft(),Kl=Yl(),Bi=class extends sb{constructor(e){super(e);let r=this.options.history;if(r&&r.store){let s=r.values||this.initial;this.autosave=!!r.autosave,this.store=r.store,this.data=this.store.get("values")||{past:[],present:s},this.initial=this.data.present||this.data.past[this.data.past.length-1]}}completion(e){return this.store?(this.data=Kl(e,this.data,this.input),this.data.present?(this.input=this.data.present,this.cursor=this.input.length,this.render()):this.alert()):this.alert()}altUp(){return this.completion("prev")}altDown(){return this.completion("next")}prev(){return this.save(),super.prev()}save(){!this.store||(this.data=Kl("save",this.data,this.input),this.store.set("values",this.data))}submit(){return this.store&&this.autosave===!0&&this.save(),super.submit()}};Vl.exports=Bi});var Ql=p((XO,zl)=>{"use strict";var ib=ft(),Fi=class extends ib{format(){return""}};zl.exports=Fi});var Jl=p((JO,Xl)=>{"use strict";var nb=ft(),Gi=class extends nb{constructor(e={}){super(e),this.sep=this.options.separator||/, */,this.initial=e.initial||""}split(e=this.value){return e?String(e).split(this.sep):[]}format(){let e=this.state.submitted?this.styles.primary:r=>r;return this.list.map(e).join(", ")}async submit(e){let r=this.state.error||await this.validate(this.list,this.state);return r!==!0?(this.state.error=r,super.submit()):(this.value=this.list,super.submit())}get list(){return this.split()}};Xl.exports=Gi});var ec=p((ZO,Zl)=>{"use strict";var ab=rt(),Wi=class extends ab{constructor(e){super({...e,multiple:!0})}};Zl.exports=Wi});var Ki=p((eP,tc)=>{"use strict";var ob=ft(),Yi=class extends ob{constructor(e={}){super({style:"number",...e}),this.min=this.isValue(e.min)?this.toNumber(e.min):-1/0,this.max=this.isValue(e.max)?this.toNumber(e.max):1/0,this.delay=e.delay!=null?e.delay:1e3,this.float=e.float!==!1,this.round=e.round===!0||e.float===!1,this.major=e.major||10,this.minor=e.minor||1,this.initial=e.initial!=null?e.initial:"",this.input=String(this.initial),this.cursor=this.input.length,this.cursorShow()}append(e){return!/[-+.]/.test(e)||e==="."&&this.input.includes(".")?this.alert("invalid number"):super.append(e)}number(e){return super.append(e)}next(){return this.input&&this.input!==this.initial?this.alert():this.isValue(this.initial)?(this.input=this.initial,this.cursor=String(this.initial).length,this.render()):this.alert()}up(e){let r=e||this.minor,s=this.toNumber(this.input);return s>this.max+r?this.alert():(this.input=`${s+r}`,this.render())}down(e){let r=e||this.minor,s=this.toNumber(this.input);return s<this.min-r?this.alert():(this.input=`${s-r}`,this.render())}shiftDown(){return this.down(this.major)}shiftUp(){return this.up(this.major)}format(e=this.input){return typeof this.options.format=="function"?this.options.format.call(this,e):this.styles.info(e)}toNumber(e=""){return this.float?+e:Math.round(+e)}isValue(e){return/^[-+]?[0-9]+((\.)|(\.[0-9]+))?$/.test(e)}submit(){let e=[this.input,this.initial].find(r=>this.isValue(r));return this.value=this.toNumber(e||0),super.submit()}};tc.exports=Yi});var sc=p((tP,rc)=>{rc.exports=Ki()});var nc=p((rP,ic)=>{"use strict";var lb=ft(),Vi=class extends lb{constructor(e){super(e),this.cursorShow()}format(e=this.input){return this.keypressed?(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(e.length)):""}};ic.exports=Vi});var lc=p((sP,oc)=>{"use strict";var cb=et(),ub=sr(),ac=fe(),zi=class extends ub{constructor(e={}){super(e),this.widths=[].concat(e.messageWidth||50),this.align=[].concat(e.align||"left"),this.linebreak=e.linebreak||!1,this.edgeLength=e.edgeLength||3,this.newline=e.newline||`
   `;let r=e.startNumber||1;typeof this.scale=="number"&&(this.scaleKey=!1,this.scale=Array(this.scale).fill(0).map((s,i)=>({name:i+r})))}async reset(){return this.tableized=!1,await super.reset(),this.render()}tableize(){if(this.tableized===!0)return;this.tableized=!0;let e=0;for(let r of this.choices){e=Math.max(e,r.message.length),r.scaleIndex=r.initial||2,r.scale=[];for(let s=0;s<this.scale.length;s++)r.scale.push({index:s})}this.widths[0]=Math.min(this.widths[0],e+3)}async dispatch(e,r){if(this.multiple)return this[r.name]?await this[r.name](e,r):await super.dispatch(e,r);this.alert()}heading(e,r,s){return this.styles.strong(e)}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let e=this.focused;return e.scaleIndex>=this.scale.length-1?this.alert():(e.scaleIndex++,this.render())}left(){let e=this.focused;return e.scaleIndex<=0?this.alert():(e.scaleIndex--,this.render())}indent(){return""}format(){return this.state.submitted?this.choices.map(r=>this.styles.info(r.index)).join(", "):""}pointer(){return""}renderScaleKey(){return this.scaleKey===!1||this.state.submitted?"":["",...this.scale.map(s=>`   ${s.name} - ${s.message}`)].map(s=>this.styles.muted(s)).join(`
`)}renderScaleHeading(e){let r=this.scale.map(l=>l.name);typeof this.options.renderScaleHeading=="function"&&(r=this.options.renderScaleHeading.call(this,e));let s=this.scaleLength-r.join("").length,i=Math.round(s/(r.length-1)),a=r.map(l=>this.styles.strong(l)).join(" ".repeat(i)),o=" ".repeat(this.widths[0]);return this.margin[3]+o+this.margin[1]+a}scaleIndicator(e,r,s){if(typeof this.options.scaleIndicator=="function")return this.options.scaleIndicator.call(this,e,r,s);let i=e.scaleIndex===r.index;return r.disabled?this.styles.hint(this.symbols.radio.disabled):i?this.styles.success(this.symbols.radio.on):this.symbols.radio.off}renderScale(e,r){let s=e.scale.map(n=>this.scaleIndicator(e,n,r)),i=this.term==="Hyper"?"":" ";return s.join(i+this.symbols.line.repeat(this.edgeLength))}async renderChoice(e,r){await this.onChoice(e,r);let s=this.index===r,i=await this.pointer(e,r),n=await e.hint;n&&!ac.hasColor(n)&&(n=this.styles.muted(n));let a=f=>this.margin[3]+f.replace(/\s+$/,"").padEnd(this.widths[0]," "),o=this.newline,l=this.indent(e),c=await this.resolve(e.message,this.state,e,r),u=await this.renderScale(e,r),h=this.margin[1]+this.margin[3];this.scaleLength=cb(u).length,this.widths[0]=Math.min(this.widths[0],this.width-this.scaleLength-h.length);let y=ac.wordWrap(c,{width:this.widths[0],newline:o}).split(`
`).map(f=>a(f)+this.margin[1]);return s&&(u=this.styles.info(u),y=y.map(f=>this.styles.info(f))),y[0]+=u,this.linebreak&&y.push(""),[l+i,y.join(`
`)].filter(Boolean)}async renderChoices(){if(this.state.submitted)return"";this.tableize();let e=this.visible.map(async(i,n)=>await this.renderChoice(i,n)),r=await Promise.all(e),s=await this.renderScaleHeading();return this.margin[0]+[s,...r.map(i=>i.join(" "))].join(`
`)}async render(){let{submitted:e,size:r}=this.state,s=await this.prefix(),i=await this.separator(),n=await this.message(),a="";this.options.promptLine!==!1&&(a=[s,n,i,""].join(" "),this.state.prompt=a);let o=await this.header(),l=await this.format(),c=await this.renderScaleKey(),u=await this.error()||await this.hint(),h=await this.renderChoices(),d=await this.footer(),y=this.emptyError;l&&(a+=l),u&&!a.includes(u)&&(a+=" "+u),e&&!l&&!h.trim()&&this.multiple&&y!=null&&(a+=this.styles.danger(y)),this.clear(r),this.write([o,a,c,h,d].filter(Boolean).join(`
`)),this.state.submitted||this.write(this.margin[2]),this.restore()}submit(){this.value={};for(let e of this.choices)this.value[e.name]=e.scaleIndex;return this.base.submit.call(this)}};oc.exports=zi});var hc=p((iP,uc)=>{"use strict";var cc=et(),hb=(t="")=>typeof t=="string"?t.replace(/^['"]|['"]$/g,""):"",Xi=class{constructor(e){this.name=e.key,this.field=e.field||{},this.value=hb(e.initial||this.field.initial||""),this.message=e.message||this.name,this.cursor=0,this.input="",this.lines=[]}},pb=async(t={},e={},r=s=>s)=>{let s=new Set,i=t.fields||[],n=t.template,a=[],o=[],l=[],c=1;typeof n=="function"&&(n=await n());let u=-1,h=()=>n[++u],d=()=>n[u+1],y=f=>{f.line=c,a.push(f)};for(y({type:"bos",value:""});u<n.length-1;){let f=h();if(/^[^\S\n ]$/.test(f)){y({type:"text",value:f});continue}if(f===`
`){y({type:"newline",value:f}),c++;continue}if(f==="\\"){f+=h(),y({type:"text",value:f});continue}if((f==="$"||f==="#"||f==="{")&&d()==="{"){let g=h();f+=g;let v={type:"template",open:f,inner:"",close:"",value:f},x;for(;x=h();){if(x==="}"){d()==="}"&&(x+=h()),v.value+=x,v.close=x;break}x===":"?(v.initial="",v.key=v.inner):v.initial!==void 0&&(v.initial+=x),v.value+=x,v.inner+=x}v.template=v.open+(v.initial||v.inner)+v.close,v.key=v.key||v.inner,hasOwnProperty.call(e,v.key)&&(v.initial=e[v.key]),v=r(v),y(v),l.push(v.key),s.add(v.key);let w=o.find(C=>C.name===v.key);v.field=i.find(C=>C.name===v.key),w||(w=new Xi(v),o.push(w)),w.lines.push(v.line-1);continue}let b=a[a.length-1];b.type==="text"&&b.line===c?b.value+=f:y({type:"text",value:f})}return y({type:"eos",value:""}),{input:n,tabstops:a,unique:s,keys:l,items:o}};uc.exports=async t=>{let e=t.options,r=new Set(e.required===!0?[]:e.required||[]),s={...e.values,...e.initial},{tabstops:i,items:n,keys:a}=await pb(e,s),o=Qi("result",t,e),l=Qi("format",t,e),c=Qi("validate",t,e,!0),u=t.isValue.bind(t);return async(h={},d=!1)=>{let y=0;h.required=r,h.items=n,h.keys=a,h.output="";let f=async(x,w,C,R)=>{let P=await c(x,w,C,R);return P===!1?"Invalid field "+C.name:P};for(let x of i){let w=x.value,C=x.key;if(x.type!=="template"){w&&(h.output+=w);continue}if(x.type==="template"){let R=n.find(D=>D.name===C);e.required===!0&&h.required.add(R.name);let P=[R.input,h.values[R.value],R.value,w].find(u),A=(R.field||{}).message||x.inner;if(d){let D=await f(h.values[C],h,R,y);if(D&&typeof D=="string"||D===!1){h.invalid.set(C,D);continue}h.invalid.delete(C);let _=await o(h.values[C],h,R,y);h.output+=cc(_);continue}R.placeholder=!1;let I=w;w=await l(w,h,R,y),P!==w?(h.values[C]=P,w=t.styles.typing(P),h.missing.delete(A)):(h.values[C]=void 0,P=`<${A}>`,w=t.styles.primary(P),R.placeholder=!0,h.required.has(C)&&h.missing.add(A)),h.missing.has(A)&&h.validating&&(w=t.styles.warning(P)),h.invalid.has(C)&&h.validating&&(w=t.styles.danger(P)),y===h.index&&(I!==w?w=t.styles.underline(w):w=t.styles.heading(cc(w))),y++}w&&(h.output+=w)}let b=h.output.split(`
`).map(x=>" "+x),g=n.length,v=0;for(let x of n)h.invalid.has(x.name)&&x.lines.forEach(w=>{b[w][0]===" "&&(b[w]=h.styles.danger(h.symbols.bullet)+b[w].slice(1))}),t.isValue(h.values[x.name])&&v++;return h.completed=(v/g*100).toFixed(0),h.output=b.join(`
`),h.output}};function Qi(t,e,r,s){return(i,n,a,o)=>typeof a.field[t]=="function"?a.field[t].call(e,i,n,a,o):[s,i].find(l=>e.isValue(l))}});var dc=p((nP,pc)=>{"use strict";var db=et(),fb=hc(),gb=Tt(),Ji=class extends gb{constructor(e){super(e),this.cursorHide(),this.reset(!0)}async initialize(){this.interpolate=await fb(this),await super.initialize()}async reset(e){this.state.keys=[],this.state.invalid=new Map,this.state.missing=new Set,this.state.completed=0,this.state.values={},e!==!0&&(await this.initialize(),await this.render())}moveCursor(e){let r=this.getItem();this.cursor+=e,r.cursor+=e}dispatch(e,r){if(!r.code&&!r.ctrl&&e!=null&&this.getItem()){this.append(e,r);return}this.alert()}append(e,r){let s=this.getItem(),i=s.input.slice(0,this.cursor),n=s.input.slice(this.cursor);this.input=s.input=`${i}${e}${n}`,this.moveCursor(1),this.render()}delete(){let e=this.getItem();if(this.cursor<=0||!e.input)return this.alert();let r=e.input.slice(this.cursor),s=e.input.slice(0,this.cursor-1);this.input=e.input=`${s}${r}`,this.moveCursor(-1),this.render()}increment(e){return e>=this.state.keys.length-1?0:e+1}decrement(e){return e<=0?this.state.keys.length-1:e-1}first(){this.state.index=0,this.render()}last(){this.state.index=this.state.keys.length-1,this.render()}right(){if(this.cursor>=this.input.length)return this.alert();this.moveCursor(1),this.render()}left(){if(this.cursor<=0)return this.alert();this.moveCursor(-1),this.render()}prev(){this.state.index=this.decrement(this.state.index),this.getItem(),this.render()}next(){this.state.index=this.increment(this.state.index),this.getItem(),this.render()}up(){this.prev()}down(){this.next()}format(e){let r=this.state.completed<100?this.styles.warning:this.styles.success;return this.state.submitted===!0&&this.state.completed!==100&&(r=this.styles.danger),r(`${this.state.completed}% completed`)}async render(){let{index:e,keys:r=[],submitted:s,size:i}=this.state,n=[this.options.newline,`
`].find(x=>x!=null),a=await this.prefix(),o=await this.separator(),l=await this.message(),c=[a,l,o].filter(Boolean).join(" ");this.state.prompt=c;let u=await this.header(),h=await this.error()||"",d=await this.hint()||"",y=s?"":await this.interpolate(this.state),f=this.state.key=r[e]||"",b=await this.format(f),g=await this.footer();b&&(c+=" "+b),d&&!b&&this.state.completed===0&&(c+=" "+d),this.clear(i);let v=[u,c,y,g,h.trim()];this.write(v.filter(Boolean).join(n)),this.restore()}getItem(e){let{items:r,keys:s,index:i}=this.state,n=r.find(a=>a.name===s[i]);return n&&n.input!=null&&(this.input=n.input,this.cursor=n.cursor),n}async submit(){typeof this.interpolate!="function"&&await this.initialize(),await this.interpolate(this.state,!0);let{invalid:e,missing:r,output:s,values:i}=this.state;if(e.size){let o="";for(let[l,c]of e)o+=`Invalid ${l}: ${c}
`;return this.state.error=o,super.submit()}if(r.size)return this.state.error="Required: "+[...r.keys()].join(", "),super.submit();let a=db(s).split(`
`).map(o=>o.slice(1)).join(`
`);return this.value={values:i,result:a},super.submit()}};pc.exports=Ji});var gc=p((aP,fc)=>{"use strict";var mb="(Use <shift>+<up/down> to sort)",yb=rt(),Zi=class extends yb{constructor(e){super({...e,reorder:!1,sort:!0,multiple:!0}),this.state.hint=[this.options.hint,mb].find(this.isValue.bind(this))}indicator(){return""}async renderChoice(e,r){let s=await super.renderChoice(e,r),i=this.symbols.identicalTo+" ",n=this.index===r&&this.sorting?this.styles.muted(i):"  ";return this.options.drag===!1&&(n=""),this.options.numbered===!0?n+`${r+1} - `+s:n+s}get selected(){return this.choices}submit(){return this.value=this.choices.map(e=>e.value),super.submit()}};fc.exports=Zi});var yc=p((oP,mc)=>{"use strict";var wb=sr(),en=class extends wb{constructor(e={}){if(super(e),this.emptyError=e.emptyError||"No items were selected",this.term=process.env.TERM_PROGRAM,!this.options.header){let r=["","4 - Strongly Agree","3 - Agree","2 - Neutral","1 - Disagree","0 - Strongly Disagree",""];r=r.map(s=>this.styles.muted(s)),this.state.header=r.join(`
   `)}}async toChoices(...e){if(this.createdScales)return!1;this.createdScales=!0;let r=await super.toChoices(...e);for(let s of r)s.scale=bb(5,this.options),s.scaleIdx=2;return r}dispatch(){this.alert()}space(){let e=this.focused,r=e.scale[e.scaleIdx],s=r.selected;return e.scale.forEach(i=>i.selected=!1),r.selected=!s,this.render()}indicator(){return""}pointer(){return""}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let e=this.focused;return e.scaleIdx>=e.scale.length-1?this.alert():(e.scaleIdx++,this.render())}left(){let e=this.focused;return e.scaleIdx<=0?this.alert():(e.scaleIdx--,this.render())}indent(){return"   "}async renderChoice(e,r){await this.onChoice(e,r);let s=this.index===r,i=this.term==="Hyper",n=i?9:8,a=i?"":" ",o=this.symbols.line.repeat(n),l=" ".repeat(n+(i?0:1)),c=w=>(w?this.styles.success("\u25C9"):"\u25EF")+a,u=r+1+".",h=s?this.styles.heading:this.styles.noop,d=await this.resolve(e.message,this.state,e,r),y=this.indent(e),f=y+e.scale.map((w,C)=>c(C===e.scaleIdx)).join(o),b=w=>w===e.scaleIdx?h(w):w,g=y+e.scale.map((w,C)=>b(C)).join(l),v=()=>[u,d].filter(Boolean).join(" "),x=()=>[v(),f,g," "].filter(Boolean).join(`
`);return s&&(f=this.styles.cyan(f),g=this.styles.cyan(g)),x()}async renderChoices(){if(this.state.submitted)return"";let e=this.visible.map(async(s,i)=>await this.renderChoice(s,i)),r=await Promise.all(e);return r.length||r.push(this.styles.danger("No matching choices")),r.join(`
`)}format(){return this.state.submitted?this.choices.map(r=>this.styles.info(r.scaleIdx)).join(", "):""}async render(){let{submitted:e,size:r}=this.state,s=await this.prefix(),i=await this.separator(),n=await this.message(),a=[s,n,i].filter(Boolean).join(" ");this.state.prompt=a;let o=await this.header(),l=await this.format(),c=await this.error()||await this.hint(),u=await this.renderChoices(),h=await this.footer();(l||!c)&&(a+=" "+l),c&&!a.includes(c)&&(a+=" "+c),e&&!l&&!u&&this.multiple&&this.type!=="form"&&(a+=this.styles.danger(this.emptyError)),this.clear(r),this.write([a,o,u,h].filter(Boolean).join(`
`)),this.restore()}submit(){this.value={};for(let e of this.choices)this.value[e.name]=e.scaleIdx;return this.base.submit.call(this)}};function bb(t,e={}){if(Array.isArray(e.scale))return e.scale.map(s=>({...s}));let r=[];for(let s=1;s<t+1;s++)r.push({i:s,selected:!1});return r}mc.exports=en});var bc=p((lP,wc)=>{wc.exports=Hi()});var xc=p((cP,vc)=>{"use strict";var vb=Ts(),tn=class extends vb{async initialize(){await super.initialize(),this.value=this.initial=this.resolve(this.options.initial),this.disabled=this.options.disabled||"no",this.enabled=this.options.enabled||"yes",await this.render()}reset(){this.value=this.initial,this.render()}delete(){this.alert()}toggle(){this.value=!this.value,this.render()}enable(){if(this.value===!0)return this.alert();this.value=!0,this.render()}disable(){if(this.value===!1)return this.alert();this.value=!1,this.render()}up(){this.toggle()}down(){this.toggle()}right(){this.toggle()}left(){this.toggle()}next(){this.toggle()}prev(){this.toggle()}dispatch(e="",r){switch(e.toLowerCase()){case" ":return this.toggle();case"1":case"y":case"t":return this.enable();case"0":case"n":case"f":return this.disable();default:return this.alert()}}format(){let e=s=>this.styles.primary.underline(s);return[this.value?this.disabled:e(this.disabled),this.value?e(this.enabled):this.enabled].join(this.styles.muted(" / "))}async render(){let{size:e}=this.state,r=await this.header(),s=await this.prefix(),i=await this.separator(),n=await this.message(),a=await this.format(),o=await this.error()||await this.hint(),l=await this.footer(),c=[s,n,i,a].join(" ");this.state.prompt=c,o&&!c.includes(o)&&(c+=" "+o),this.clear(e),this.write([r,c,l].filter(Boolean).join(`
`)),this.write(this.margin[2]),this.restore()}};vc.exports=tn});var Ec=p((uP,_c)=>{"use strict";var xb=rt(),rn=class extends xb{constructor(e){if(super(e),typeof this.options.correctChoice!="number"||this.options.correctChoice<0)throw new Error("Please specify the index of the correct answer from the list of choices")}async toChoices(e,r){let s=await super.toChoices(e,r);if(s.length<2)throw new Error("Please give at least two choices to the user");if(this.options.correctChoice>s.length)throw new Error("Please specify the index of the correct answer from the list of choices");return s}check(e){return e.index===this.options.correctChoice}async result(e){return{selectedAnswer:e,correctAnswer:this.options.choices[this.options.correctChoice].value,correct:await this.check(this.state)}}};_c.exports=rn});var Cc=p(sn=>{"use strict";var kc=fe(),ae=(t,e)=>{kc.defineExport(sn,t,e),kc.defineExport(sn,t.toLowerCase(),e)};ae("AutoComplete",()=>Pl());ae("BasicAuth",()=>$l());ae("Confirm",()=>Bl());ae("Editable",()=>Fl());ae("Form",()=>As());ae("Input",()=>Hi());ae("Invisible",()=>Ql());ae("List",()=>Jl());ae("MultiSelect",()=>ec());ae("Numeral",()=>sc());ae("Password",()=>nc());ae("Scale",()=>lc());ae("Select",()=>rt());ae("Snippet",()=>dc());ae("Sort",()=>gc());ae("Survey",()=>yc());ae("Text",()=>bc());ae("Toggle",()=>xc());ae("Quiz",()=>Ec())});var Sc=p((pP,Rc)=>{Rc.exports={ArrayPrompt:sr(),AuthPrompt:Ni(),BooleanPrompt:Ts(),NumberPrompt:Ki(),StringPrompt:ft()}});var on=p((dP,Tc)=>{"use strict";var Ac=m("assert"),an=m("events"),st=fe(),je=class extends an{constructor(e,r){super(),this.options=st.merge({},e),this.answers={...r}}register(e,r){if(st.isObject(e)){for(let i of Object.keys(e))this.register(i,e[i]);return this}Ac.equal(typeof r,"function","expected a function");let s=e.toLowerCase();return r.prototype instanceof this.Prompt?this.prompts[s]=r:this.prompts[s]=r(this.Prompt,this),this}async prompt(e=[]){for(let r of[].concat(e))try{typeof r=="function"&&(r=await r.call(this)),await this.ask(st.merge({},this.options,r))}catch(s){return Promise.reject(s)}return this.answers}async ask(e){typeof e=="function"&&(e=await e.call(this));let r=st.merge({},this.options,e),{type:s,name:i}=e,{set:n,get:a}=st;if(typeof s=="function"&&(s=await s.call(this,e,this.answers)),!s)return this.answers[i];s==="number"&&(s="numeral"),Ac(this.prompts[s],`Prompt "${s}" is not registered`);let o=new this.prompts[s](r),l=a(this.answers,i);o.state.answers=this.answers,o.enquirer=this,i&&o.on("submit",u=>{this.emit("answer",i,u,o),n(this.answers,i,u)});let c=o.emit.bind(o);return o.emit=(...u)=>(this.emit.call(this,...u),c(...u)),this.emit("prompt",o,this),r.autofill&&l!=null?(o.value=o.input=l,r.autofill==="show"&&await o.submit()):l=o.value=await o.run(),l}use(e){return e.call(this,this),this}set Prompt(e){this._Prompt=e}get Prompt(){return this._Prompt||this.constructor.Prompt}get prompts(){return this.constructor.prompts}static set Prompt(e){this._Prompt=e}static get Prompt(){return this._Prompt||Tt()}static get prompts(){return Cc()}static get types(){return Sc()}static get prompt(){let e=(r,...s)=>{let i=new this(...s),n=i.emit.bind(i);return i.emit=(...a)=>(e.emit(...a),n(...a)),i.prompt(r)};return st.mixinEmitter(e,new an),e}};st.mixinEmitter(je,new an);var nn=je.prompts;for(let t of Object.keys(nn)){let e=t.toLowerCase(),r=s=>new nn[t](s).run();je.prompt[e]=r,je[e]=r,je[t]||Reflect.defineProperty(je,t,{get:()=>nn[t]})}var ir=t=>{st.defineExport(je,t,()=>je.types[t])};ir("ArrayPrompt");ir("AuthPrompt");ir("BooleanPrompt");ir("NumberPrompt");ir("StringPrompt");Tc.exports=je});var lr=p(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.Strategy=oe.WorkspaceModifier=oe.Modifier=oe.Target=void 0;oe.getModifier=kb;oe.extractRangeModifier=Pc;oe.applyModifier=Rb;oe.toWorkspaceModifier=qc;oe.makeWorkspaceDescriptor=Uc;oe.findProjectDescriptors=Ic;oe.extractDescriptorFromPath=Sb;oe.getSuggestedDescriptors=Ab;oe.fetchDescriptorFrom=ln;var _b=le(),ar=m("@yarnpkg/core"),W=m("@yarnpkg/core"),Ps=m("@yarnpkg/fslib"),Oc=_b.__importDefault(m("semver")),Eb="workspace:",or;(function(t){t.REGULAR="dependencies",t.DEVELOPMENT="devDependencies",t.PEER="peerDependencies"})(or||(oe.Target=or={}));var nt;(function(t){t.CARET="^",t.TILDE="~",t.EXACT=""})(nt||(oe.Modifier=nt={}));var nr;(function(t){t.CARET="^",t.TILDE="~",t.EXACT="*"})(nr||(oe.WorkspaceModifier=nr={}));var it;(function(t){t.KEEP="keep",t.REUSE="reuse",t.PROJECT="project",t.LATEST="latest",t.CACHE="cache"})(it||(oe.Strategy=it={}));function kb(t,e){return t.exact?nt.EXACT:t.caret?nt.CARET:t.tilde?nt.TILDE:e.configuration.get("defaultSemverRangePrefix")}var Cb=/^([\^~]?)[0-9]+(?:\.[0-9]+){0,2}(?:-\S+)?$/;function Pc(t,{project:e}){let r=t.match(Cb);return r?r[1]:e.configuration.get("defaultSemverRangePrefix")}function Rb(t,e){let{protocol:r,source:s,params:i,selector:n}=W.structUtils.parseRange(t.range);return Oc.default.valid(n)&&(n=`${e}${t.range}`),W.structUtils.makeDescriptor(t,W.structUtils.makeRange({protocol:r,source:s,params:i,selector:n}))}function qc(t){switch(t){case nt.CARET:return nr.CARET;case nt.TILDE:return nr.TILDE;case nt.EXACT:return nr.EXACT;default:throw new Error(`Assertion failed: Unknown modifier: "${t}"`)}}function Uc(t,e){return W.structUtils.makeDescriptor(t.anchoredDescriptor,`${Eb}${qc(e)}`)}async function Ic(t,{project:e,target:r}){let s=new Map,i=n=>{let a=s.get(n.descriptorHash);return a||s.set(n.descriptorHash,a={descriptor:n,locators:[]}),a};for(let n of e.workspaces)if(r===or.PEER){let a=n.manifest.peerDependencies.get(t.identHash);a!==void 0&&i(a).locators.push(n.anchoredLocator)}else{let a=n.manifest.dependencies.get(t.identHash),o=n.manifest.devDependencies.get(t.identHash);r===or.DEVELOPMENT?o!==void 0?i(o).locators.push(n.anchoredLocator):a!==void 0&&i(a).locators.push(n.anchoredLocator):a!==void 0?i(a).locators.push(n.anchoredLocator):o!==void 0&&i(o).locators.push(n.anchoredLocator)}return s}async function Sb(t,{cwd:e,workspace:r}){return await Tb(async s=>{Ps.ppath.isAbsolute(t)||(t=Ps.ppath.relative(r.cwd,Ps.ppath.resolve(e,t)),t.match(/^\.{0,2}\//)||(t=`./${t}`));let{project:i}=r,n=await ln(W.structUtils.makeIdent(null,"archive"),t,{project:r.project,cache:s,workspace:r});if(!n)throw new Error("Assertion failed: The descriptor should have been found");let a=new ar.ThrowReport,o=i.configuration.makeResolver(),l=i.configuration.makeFetcher(),c={checksums:i.storedChecksums,project:i,cache:s,fetcher:l,report:a,resolver:o},u=o.bindDescriptor(n,r.anchoredLocator,c),h=W.structUtils.convertDescriptorToLocator(u),d=await l.fetch(h,c),y=await ar.Manifest.find(d.prefixPath,{baseFs:d.packageFs});if(!y.name)throw new Error("Target path doesn't have a name");return W.structUtils.makeDescriptor(y.name,t)})}async function Ab(t,{project:e,workspace:r,cache:s,target:i,fixed:n,modifier:a,strategies:o,maxResults:l=1/0}){if(!(l>=0))throw new Error(`Invalid maxResults (${l})`);let[c,u]=t.range!=="unknown"?n||W.semverUtils.validRange(t.range)||!t.range.match(/^[a-z0-9._-]+$/i)?[t.range,"latest"]:["unknown",t.range]:["unknown","latest"];if(c!=="unknown")return{suggestions:[{descriptor:t,name:`Use ${W.structUtils.prettyDescriptor(e.configuration,t)}`,reason:"(unambiguous explicit request)"}],rejections:[]};let h=typeof r<"u"&&r!==null&&r.manifest[i].get(t.identHash)||null,d=[],y=[],f=async b=>{try{await b()}catch(g){y.push(g)}};for(let b of o){if(d.length>=l)break;switch(b){case it.KEEP:await f(async()=>{h&&d.push({descriptor:h,name:`Keep ${W.structUtils.prettyDescriptor(e.configuration,h)}`,reason:"(no changes)"})});break;case it.REUSE:await f(async()=>{for(let{descriptor:g,locators:v}of(await Ic(t,{project:e,target:i})).values()){if(v.length===1&&v[0].locatorHash===r.anchoredLocator.locatorHash&&o.includes(it.KEEP))continue;let x=`(originally used by ${W.structUtils.prettyLocator(e.configuration,v[0])}`;x+=v.length>1?` and ${v.length-1} other${v.length>2?"s":""})`:")",d.push({descriptor:g,name:`Reuse ${W.structUtils.prettyDescriptor(e.configuration,g)}`,reason:x})}});break;case it.CACHE:await f(async()=>{for(let g of e.storedDescriptors.values())g.identHash===t.identHash&&d.push({descriptor:g,name:`Reuse ${W.structUtils.prettyDescriptor(e.configuration,g)}`,reason:"(already used somewhere in the lockfile)"})});break;case it.PROJECT:await f(async()=>{if(r.manifest.name!==null&&t.identHash===r.manifest.name.identHash)return;let g=e.tryWorkspaceByIdent(t);if(g===null)return;let v=Uc(g,a);d.push({descriptor:v,name:`Attach ${W.structUtils.prettyDescriptor(e.configuration,v)}`,reason:`(local workspace at ${W.formatUtils.pretty(e.configuration,g.relativeCwd,W.formatUtils.Type.PATH)})`})});break;case it.LATEST:{let g=e.configuration.get("enableNetwork"),v=e.configuration.get("enableOfflineMode");await f(async()=>{if(i===or.PEER)d.push({descriptor:W.structUtils.makeDescriptor(t,"*"),name:"Use *",reason:"(catch-all peer dependency pattern)"});else if(!g&&!v)d.push({descriptor:null,name:"Resolve from latest",reason:W.formatUtils.pretty(e.configuration,"(unavailable because enableNetwork is toggled off)","grey")});else{let x=await ln(t,u,{project:e,cache:s,workspace:r,modifier:a});x&&d.push({descriptor:x,name:`Use ${W.structUtils.prettyDescriptor(e.configuration,x)}`,reason:`(resolved from ${v?"the cache":"latest"})`})}})}break}}return{suggestions:d.slice(0,l),rejections:y.slice(0,l)}}async function ln(t,e,{project:r,cache:s,workspace:i,preserveModifier:n=!0,modifier:a}){let o=r.configuration.normalizeDependency(W.structUtils.makeDescriptor(t,e)),l=new ar.ThrowReport,c=r.configuration.makeFetcher(),u=r.configuration.makeResolver(),h={project:r,fetcher:c,cache:s,checksums:r.storedChecksums,report:l,cacheOptions:{skipIntegrityCheck:!0}},d={...h,resolver:u,fetchOptions:h},y=u.bindDescriptor(o,i.anchoredLocator,d),f=await u.getCandidates(y,{},d);if(f.length===0)return null;let b=f[0],{protocol:g,source:v,params:x,selector:w}=W.structUtils.parseRange(W.structUtils.convertToManifestRange(b.reference));if(g===r.configuration.get("defaultProtocol")&&(g=null),Oc.default.valid(w)){let C=w;if(typeof a<"u")w=a+w;else if(n!==!1){let q=typeof n=="string"?n:o.range;w=Pc(q,{project:r})+w}let R=W.structUtils.makeDescriptor(b,W.structUtils.makeRange({protocol:g,source:v,params:x,selector:w}));(await u.getCandidates(r.configuration.normalizeDependency(R),{},d)).length!==1&&(w=C)}return W.structUtils.makeDescriptor(b,W.structUtils.makeRange({protocol:g,source:v,params:x,selector:w}))}async function Tb(t){return await Ps.xfs.mktempPromise(async e=>{let r=ar.Configuration.create(e);return r.useWithSource(e,{enableMirror:!1,compressionLevel:0},e,{overwrite:!0}),await t(new ar.Cache(e,{configuration:r,check:!1,immutable:!1}))})}});var $c=p(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});var jc=le(),Dc=m("@yarnpkg/cli"),ke=m("@yarnpkg/core"),Nc=m("@yarnpkg/core"),$e=m("@yarnpkg/core"),J=m("clipanion"),Ob=on(),Pb=jc.__importStar(m("typanion")),ge=jc.__importStar(lr()),cr=class extends Dc.BaseCommand{constructor(){super(...arguments),this.json=J.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"}),this.fixed=J.Option.Boolean("-F,--fixed",!1,{description:"Store dependency tags as-is instead of resolving them"}),this.exact=J.Option.Boolean("-E,--exact",!1,{description:"Don't use any semver modifier on the resolved range"}),this.tilde=J.Option.Boolean("-T,--tilde",!1,{description:"Use the `~` semver modifier on the resolved range"}),this.caret=J.Option.Boolean("-C,--caret",!1,{description:"Use the `^` semver modifier on the resolved range"}),this.dev=J.Option.Boolean("-D,--dev",!1,{description:"Add a package as a dev dependency"}),this.peer=J.Option.Boolean("-P,--peer",!1,{description:"Add a package as a peer dependency"}),this.optional=J.Option.Boolean("-O,--optional",!1,{description:"Add / upgrade a package to an optional regular / peer dependency"}),this.preferDev=J.Option.Boolean("--prefer-dev",!1,{description:"Add / upgrade a package to a dev dependency"}),this.interactive=J.Option.Boolean("-i,--interactive",{description:"Reuse the specified package from other workspaces in the project"}),this.cached=J.Option.Boolean("--cached",!1,{description:"Reuse the highest version already used somewhere within the project"}),this.mode=J.Option.String("--mode",{description:"Change what artifacts installs generate",validator:Pb.isEnum(Nc.InstallMode)}),this.silent=J.Option.Boolean("--silent",{hidden:!0}),this.packages=J.Option.Rest()}async execute(){let e=await ke.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await Nc.Project.find(e,this.context.cwd),i=await ke.Cache.find(e);if(!s)throw new Dc.WorkspaceRequiredError(r.cwd,this.context.cwd);await r.restoreInstallState({restoreResolutions:!1});let n=this.fixed,a=this.interactive??e.get("preferInteractive"),o=a||e.get("preferReuse"),l=ge.getModifier(this,r),c=[o?ge.Strategy.REUSE:void 0,ge.Strategy.PROJECT,this.cached?ge.Strategy.CACHE:void 0,ge.Strategy.LATEST].filter(g=>typeof g<"u"),u=a?1/0:1,h=await Promise.all(this.packages.map(async g=>{let v=g.match(/^\.{0,2}\//)?await ge.extractDescriptorFromPath(g,{cwd:this.context.cwd,workspace:s}):$e.structUtils.tryParseDescriptor(g),x=g.match(/^(https?:|git@github)/);if(x)throw new J.UsageError(`It seems you are trying to add a package using a ${ke.formatUtils.pretty(e,`${x[0]}...`,ke.formatUtils.Type.RANGE)} url; we now require package names to be explicitly specified.
Try running the command again with the package name prefixed: ${ke.formatUtils.pretty(e,"yarn add",ke.formatUtils.Type.CODE)} ${ke.formatUtils.pretty(e,$e.structUtils.makeDescriptor($e.structUtils.makeIdent(null,"my-package"),`${x[0]}...`),ke.formatUtils.Type.DESCRIPTOR)}`);if(!v)throw new J.UsageError(`The ${ke.formatUtils.pretty(e,g,ke.formatUtils.Type.CODE)} string didn't match the required format (package-name@range). Did you perhaps forget to explicitly reference the package name?`);let w=qb(s,v,{dev:this.dev,peer:this.peer,preferDev:this.preferDev,optional:this.optional});return await Promise.all(w.map(async R=>{let P=await ge.getSuggestedDescriptors(v,{project:r,workspace:s,cache:i,fixed:n,target:R,modifier:l,strategies:c,maxResults:u});return{request:v,suggestedDescriptors:P,target:R}}))})).then(g=>g.flat()),d=await ke.LightReport.start({configuration:e,stdout:this.context.stdout,suggestInstall:!1},async g=>{for(let{request:v,suggestedDescriptors:{suggestions:x,rejections:w}}of h)if(x.filter(R=>R.descriptor!==null).length===0){let[R]=w;if(typeof R>"u")throw new Error("Assertion failed: Expected an error to have been set");r.configuration.get("enableNetwork")?g.reportError(ke.MessageName.CANT_SUGGEST_RESOLUTIONS,`${$e.structUtils.prettyDescriptor(e,v)} can't be resolved to a satisfying range`):g.reportError(ke.MessageName.CANT_SUGGEST_RESOLUTIONS,`${$e.structUtils.prettyDescriptor(e,v)} can't be resolved to a satisfying range (note: network resolution has been disabled)`),g.reportSeparator(),g.reportExceptionOnce(R)}});if(d.hasErrors())return d.exitCode();let y=!1,f=[],b=[];for(let{suggestedDescriptors:{suggestions:g},target:v}of h){let x,w=g.filter(q=>q.descriptor!==null),C=w[0].descriptor,R=w.every(q=>$e.structUtils.areDescriptorsEqual(q.descriptor,C));w.length===1||R?x=C:(y=!0,{answer:x}=await(0,Ob.prompt)({type:"select",name:"answer",message:"Which range do you want to use?",choices:g.map(({descriptor:q,name:A,reason:I})=>q?{name:A,hint:I,descriptor:q}:{name:A,hint:I,disabled:!0}),onCancel:()=>process.exit(130),result(q){return this.find(q,"descriptor")},stdin:this.context.stdin,stdout:this.context.stdout}));let P=s.manifest[v].get(x.identHash);(typeof P>"u"||P.descriptorHash!==x.descriptorHash)&&(s.manifest[v].set(x.identHash,x),this.optional&&(v==="dependencies"?s.manifest.ensureDependencyMeta({...x,range:"unknown"}).optional=!0:v==="peerDependencies"&&(s.manifest.ensurePeerDependencyMeta({...x,range:"unknown"}).optional=!0)),typeof P>"u"?f.push([s,v,x,c]):b.push([s,v,P,x]))}return await e.triggerMultipleHooks(g=>g.afterWorkspaceDependencyAddition,f),await e.triggerMultipleHooks(g=>g.afterWorkspaceDependencyReplacement,b),y&&this.context.stdout.write(`
`),await r.installWithNewReport({json:this.json,stdout:this.context.stdout,quiet:this.context.quiet},{cache:i,mode:this.mode})}};cr.paths=[["add"]];cr.usage=J.Command.Usage({description:"add dependencies to the project",details:"\n      This command adds a package to the package.json for the nearest workspace.\n\n      - If it didn't exist before, the package will by default be added to the regular `dependencies` field, but this behavior can be overriden thanks to the `-D,--dev` flag (which will cause the dependency to be added to the `devDependencies` field instead) and the `-P,--peer` flag (which will do the same but for `peerDependencies`).\n\n      - If the package was already listed in your dependencies, it will by default be upgraded whether it's part of your `dependencies` or `devDependencies` (it won't ever update `peerDependencies`, though).\n\n      - If set, the `--prefer-dev` flag will operate as a more flexible `-D,--dev` in that it will add the package to your `devDependencies` if it isn't already listed in either `dependencies` or `devDependencies`, but it will also happily upgrade your `dependencies` if that's what you already use (whereas `-D,--dev` would throw an exception).\n\n      - If set, the `-O,--optional` flag will add the package to the `optionalDependencies` field and, in combination with the `-P,--peer` flag, it will add the package as an optional peer dependency. If the package was already listed in your `dependencies`, it will be upgraded to `optionalDependencies`. If the package was already listed in your `peerDependencies`, in combination with the `-P,--peer` flag, it will be upgraded to an optional peer dependency: `\"peerDependenciesMeta\": { \"<package>\": { \"optional\": true } }`\n\n      - If the added package doesn't specify a range at all its `latest` tag will be resolved and the returned version will be used to generate a new semver range (using the `^` modifier by default unless otherwise configured via the `defaultSemverRangePrefix` configuration, or the `~` modifier if `-T,--tilde` is specified, or no modifier at all if `-E,--exact` is specified). Two exceptions to this rule: the first one is that if the package is a workspace then its local version will be used, and the second one is that if you use `-P,--peer` the default range will be `*` and won't be resolved at all.\n\n      - If the added package specifies a range (such as `^1.0.0`, `latest`, or `rc`), Yarn will add this range as-is in the resulting package.json entry (in particular, tags such as `rc` will be encoded as-is rather than being converted into a semver range).\n\n      If the `--cached` option is used, Yarn will preferably reuse the highest version already used somewhere within the project, even if through a transitive dependency.\n\n      If the `-i,--interactive` option is used (or if the `preferInteractive` settings is toggled on) the command will first try to check whether other workspaces in the project use the specified package and, if so, will offer to reuse them.\n\n      If the `--mode=<mode>` option is set, Yarn will change which artifacts are generated. The modes currently supported are:\n\n      - `skip-build` will not run the build scripts at all. Note that this is different from setting `enableScripts` to false because the latter will disable build scripts, and thus affect the content of the artifacts generated on disk, whereas the former will just disable the build step - but not the scripts themselves, which just won't run.\n\n      - `update-lockfile` will skip the link step altogether, and only fetch packages that are missing from the lockfile (or that have no associated checksums). This mode is typically used by tools like Renovate or Dependabot to keep a lockfile up-to-date without incurring the full install cost.\n\n      For a compilation of all the supported protocols, please consult the dedicated page from our website: https://yarnpkg.com/protocols.\n    ",examples:[["Add a regular package to the current workspace","$0 add lodash"],["Add a specific version for a package to the current workspace","$0 add lodash@1.2.3"],["Add a package from a GitHub repository (the master branch) to the current workspace using a URL","$0 add lodash@https://github.com/lodash/lodash"],["Add a package from a GitHub repository (the master branch) to the current workspace using the GitHub protocol","$0 add lodash@github:lodash/lodash"],["Add a package from a GitHub repository (the master branch) to the current workspace using the GitHub protocol (shorthand)","$0 add lodash@lodash/lodash"],["Add a package from a specific branch of a GitHub repository to the current workspace using the GitHub protocol (shorthand)","$0 add lodash-es@lodash/lodash#es"]]});cn.default=cr;function qb(t,e,{dev:r,peer:s,preferDev:i,optional:n}){let a=t.manifest[ge.Target.REGULAR].has(e.identHash),o=t.manifest[ge.Target.DEVELOPMENT].has(e.identHash),l=t.manifest[ge.Target.PEER].has(e.identHash);if((r||s)&&a)throw new J.UsageError(`Package "${$e.structUtils.prettyIdent(t.project.configuration,e)}" is already listed as a regular dependency - remove the -D,-P flags or remove it from your dependencies first`);if(!r&&!s&&l)throw new J.UsageError(`Package "${$e.structUtils.prettyIdent(t.project.configuration,e)}" is already listed as a peer dependency - use either of -D or -P, or remove it from your peer dependencies first`);if(n&&o)throw new J.UsageError(`Package "${$e.structUtils.prettyIdent(t.project.configuration,e)}" is already listed as a dev dependency - remove the -O flag or remove it from your dev dependencies first`);if(n&&!s&&l)throw new J.UsageError(`Package "${$e.structUtils.prettyIdent(t.project.configuration,e)}" is already listed as a peer dependency - remove the -O flag or add the -P flag or remove it from your peer dependencies first`);if((r||i)&&n)throw new J.UsageError(`Package "${$e.structUtils.prettyIdent(t.project.configuration,e)}" cannot simultaneously be a dev dependency and an optional dependency`);let c=[];return s&&c.push(ge.Target.PEER),(r||i)&&c.push(ge.Target.DEVELOPMENT),n&&c.push(ge.Target.REGULAR),c.length>0?c:o?[ge.Target.DEVELOPMENT]:l?[ge.Target.PEER]:[ge.Target.REGULAR]}});var Lc=p(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});var Ub=m("@yarnpkg/cli"),un=m("@yarnpkg/core"),ur=m("@yarnpkg/core"),hr=m("clipanion"),pr=class extends Ub.BaseCommand{constructor(){super(...arguments),this.verbose=hr.Option.Boolean("-v,--verbose",!1,{description:"Print both the binary name and the locator of the package that provides the binary"}),this.json=hr.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"}),this.name=hr.Option.String({required:!1})}async execute(){let e=await un.Configuration.find(this.context.cwd,this.context.plugins),{project:r,locator:s}=await un.Project.find(e,this.context.cwd);if(await r.restoreInstallState(),this.name){let a=(await ur.scriptUtils.getPackageAccessibleBinaries(s,{project:r})).get(this.name);if(!a)throw new hr.UsageError(`Couldn't find a binary named "${this.name}" for package "${ur.structUtils.prettyLocator(e,s)}"`);let[,o]=a;return this.context.stdout.write(`${o}
`),0}return(await un.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout},async n=>{let a=await ur.scriptUtils.getPackageAccessibleBinaries(s,{project:r}),l=Array.from(a.keys()).reduce((c,u)=>Math.max(c,u.length),0);for(let[c,[u,h]]of a)n.reportJson({name:c,source:ur.structUtils.stringifyIdent(u),path:h});if(this.verbose)for(let[c,[u]]of a)n.reportInfo(null,`${c.padEnd(l," ")}   ${ur.structUtils.prettyLocator(e,u)}`);else for(let c of a.keys())n.reportInfo(null,c)})).exitCode()}};pr.paths=[["bin"]];pr.usage=hr.Command.Usage({description:"get the path to a binary script",details:`
      When used without arguments, this command will print the list of all the binaries available in the current workspace. Adding the \`-v,--verbose\` flag will cause the output to contain both the binary name and the locator of the package that provides the binary.

      When an argument is specified, this command will just print the path to the binary on the standard output and exit. Note that the reported path may be stored within a zip archive.
    `,examples:[["List all the available binaries","$0 bin"],["Print the path to a specific binary","$0 bin eslint"]]});hn.default=pr});var Bc=p(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var Ib=m("@yarnpkg/cli"),pn=m("@yarnpkg/core"),Mc=m("@yarnpkg/fslib"),dn=m("clipanion"),dr=class extends Ib.BaseCommand{constructor(){super(...arguments),this.mirror=dn.Option.Boolean("--mirror",!1,{description:"Remove the global cache files instead of the local cache files"}),this.all=dn.Option.Boolean("--all",!1,{description:"Remove both the global cache files and the local cache files of the current project"})}async execute(){let e=await pn.Configuration.find(this.context.cwd,this.context.plugins),r=await pn.Cache.find(e);return(await pn.StreamReport.start({configuration:e,stdout:this.context.stdout},async()=>{let i=(this.all||this.mirror)&&r.mirrorCwd!==null,n=!this.mirror;i&&(await Mc.xfs.removePromise(r.mirrorCwd),await e.triggerHook(a=>a.cleanGlobalArtifacts,e)),n&&await Mc.xfs.removePromise(r.cwd)})).exitCode()}};dr.paths=[["cache","clean"],["cache","clear"]];dr.usage=dn.Command.Usage({description:"remove the shared cache files",details:`
      This command will remove all the files from the cache.
    `,examples:[["Remove all the local archives","$0 cache clean"],["Remove all the archives stored in the ~/.yarn directory","$0 cache clean --mirror"]]});fn.default=dr});var at=p((wP,Hc)=>{var Db=Array.isArray;Hc.exports=Db});var gn=p((bP,Fc)=>{var Nb=typeof global=="object"&&global&&global.Object===Object&&global;Fc.exports=Nb});var Le=p((vP,Gc)=>{var jb=gn(),$b=typeof self=="object"&&self&&self.Object===Object&&self,Lb=jb||$b||Function("return this")();Gc.exports=Lb});var fr=p((xP,Wc)=>{var Mb=Le(),Bb=Mb.Symbol;Wc.exports=Bb});var zc=p((_P,Vc)=>{var Yc=fr(),Kc=Object.prototype,Hb=Kc.hasOwnProperty,Fb=Kc.toString,gr=Yc?Yc.toStringTag:void 0;function Gb(t){var e=Hb.call(t,gr),r=t[gr];try{t[gr]=void 0;var s=!0}catch{}var i=Fb.call(t);return s&&(e?t[gr]=r:delete t[gr]),i}Vc.exports=Gb});var Xc=p((EP,Qc)=>{var Wb=Object.prototype,Yb=Wb.toString;function Kb(t){return Yb.call(t)}Qc.exports=Kb});var Pt=p((kP,eu)=>{var Jc=fr(),Vb=zc(),zb=Xc(),Qb="[object Null]",Xb="[object Undefined]",Zc=Jc?Jc.toStringTag:void 0;function Jb(t){return t==null?t===void 0?Xb:Qb:Zc&&Zc in Object(t)?Vb(t):zb(t)}eu.exports=Jb});var gt=p((CP,tu)=>{function Zb(t){return t!=null&&typeof t=="object"}tu.exports=Zb});var qs=p((RP,ru)=>{var ev=Pt(),tv=gt(),rv="[object Symbol]";function sv(t){return typeof t=="symbol"||tv(t)&&ev(t)==rv}ru.exports=sv});var iu=p((SP,su)=>{var iv=at(),nv=qs(),av=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ov=/^\w*$/;function lv(t,e){if(iv(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||nv(t)?!0:ov.test(t)||!av.test(t)||e!=null&&t in Object(e)}su.exports=lv});var mt=p((AP,nu)=>{function cv(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}nu.exports=cv});var mn=p((TP,au)=>{var uv=Pt(),hv=mt(),pv="[object AsyncFunction]",dv="[object Function]",fv="[object GeneratorFunction]",gv="[object Proxy]";function mv(t){if(!hv(t))return!1;var e=uv(t);return e==dv||e==fv||e==pv||e==gv}au.exports=mv});var lu=p((OP,ou)=>{var yv=Le(),wv=yv["__core-js_shared__"];ou.exports=wv});var hu=p((PP,uu)=>{var yn=lu(),cu=function(){var t=/[^.]+$/.exec(yn&&yn.keys&&yn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function bv(t){return!!cu&&cu in t}uu.exports=bv});var wn=p((qP,pu)=>{var vv=Function.prototype,xv=vv.toString;function _v(t){if(t!=null){try{return xv.call(t)}catch{}try{return t+""}catch{}}return""}pu.exports=_v});var fu=p((UP,du)=>{var Ev=mn(),kv=hu(),Cv=mt(),Rv=wn(),Sv=/[\\^$.*+?()[\]{}|]/g,Av=/^\[object .+?Constructor\]$/,Tv=Function.prototype,Ov=Object.prototype,Pv=Tv.toString,qv=Ov.hasOwnProperty,Uv=RegExp("^"+Pv.call(qv).replace(Sv,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Iv(t){if(!Cv(t)||kv(t))return!1;var e=Ev(t)?Uv:Av;return e.test(Rv(t))}du.exports=Iv});var mu=p((IP,gu)=>{function Dv(t,e){return t?.[e]}gu.exports=Dv});var ot=p((DP,yu)=>{var Nv=fu(),jv=mu();function $v(t,e){var r=jv(t,e);return Nv(r)?r:void 0}yu.exports=$v});var mr=p((NP,wu)=>{var Lv=ot(),Mv=Lv(Object,"create");wu.exports=Mv});var xu=p((jP,vu)=>{var bu=mr();function Bv(){this.__data__=bu?bu(null):{},this.size=0}vu.exports=Bv});var Eu=p(($P,_u)=>{function Hv(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}_u.exports=Hv});var Cu=p((LP,ku)=>{var Fv=mr(),Gv="__lodash_hash_undefined__",Wv=Object.prototype,Yv=Wv.hasOwnProperty;function Kv(t){var e=this.__data__;if(Fv){var r=e[t];return r===Gv?void 0:r}return Yv.call(e,t)?e[t]:void 0}ku.exports=Kv});var Su=p((MP,Ru)=>{var Vv=mr(),zv=Object.prototype,Qv=zv.hasOwnProperty;function Xv(t){var e=this.__data__;return Vv?e[t]!==void 0:Qv.call(e,t)}Ru.exports=Xv});var Tu=p((BP,Au)=>{var Jv=mr(),Zv="__lodash_hash_undefined__";function ex(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Jv&&e===void 0?Zv:e,this}Au.exports=ex});var Pu=p((HP,Ou)=>{var tx=xu(),rx=Eu(),sx=Cu(),ix=Su(),nx=Tu();function qt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}qt.prototype.clear=tx;qt.prototype.delete=rx;qt.prototype.get=sx;qt.prototype.has=ix;qt.prototype.set=nx;Ou.exports=qt});var Uu=p((FP,qu)=>{function ax(){this.__data__=[],this.size=0}qu.exports=ax});var bn=p((GP,Iu)=>{function ox(t,e){return t===e||t!==t&&e!==e}Iu.exports=ox});var yr=p((WP,Du)=>{var lx=bn();function cx(t,e){for(var r=t.length;r--;)if(lx(t[r][0],e))return r;return-1}Du.exports=cx});var ju=p((YP,Nu)=>{var ux=yr(),hx=Array.prototype,px=hx.splice;function dx(t){var e=this.__data__,r=ux(e,t);if(r<0)return!1;var s=e.length-1;return r==s?e.pop():px.call(e,r,1),--this.size,!0}Nu.exports=dx});var Lu=p((KP,$u)=>{var fx=yr();function gx(t){var e=this.__data__,r=fx(e,t);return r<0?void 0:e[r][1]}$u.exports=gx});var Bu=p((VP,Mu)=>{var mx=yr();function yx(t){return mx(this.__data__,t)>-1}Mu.exports=yx});var Fu=p((zP,Hu)=>{var wx=yr();function bx(t,e){var r=this.__data__,s=wx(r,t);return s<0?(++this.size,r.push([t,e])):r[s][1]=e,this}Hu.exports=bx});var wr=p((QP,Gu)=>{var vx=Uu(),xx=ju(),_x=Lu(),Ex=Bu(),kx=Fu();function Ut(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}Ut.prototype.clear=vx;Ut.prototype.delete=xx;Ut.prototype.get=_x;Ut.prototype.has=Ex;Ut.prototype.set=kx;Gu.exports=Ut});var Us=p((XP,Wu)=>{var Cx=ot(),Rx=Le(),Sx=Cx(Rx,"Map");Wu.exports=Sx});var Vu=p((JP,Ku)=>{var Yu=Pu(),Ax=wr(),Tx=Us();function Ox(){this.size=0,this.__data__={hash:new Yu,map:new(Tx||Ax),string:new Yu}}Ku.exports=Ox});var Qu=p((ZP,zu)=>{function Px(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}zu.exports=Px});var br=p((eq,Xu)=>{var qx=Qu();function Ux(t,e){var r=t.__data__;return qx(e)?r[typeof e=="string"?"string":"hash"]:r.map}Xu.exports=Ux});var Zu=p((tq,Ju)=>{var Ix=br();function Dx(t){var e=Ix(this,t).delete(t);return this.size-=e?1:0,e}Ju.exports=Dx});var th=p((rq,eh)=>{var Nx=br();function jx(t){return Nx(this,t).get(t)}eh.exports=jx});var sh=p((sq,rh)=>{var $x=br();function Lx(t){return $x(this,t).has(t)}rh.exports=Lx});var nh=p((iq,ih)=>{var Mx=br();function Bx(t,e){var r=Mx(this,t),s=r.size;return r.set(t,e),this.size+=r.size==s?0:1,this}ih.exports=Bx});var vn=p((nq,ah)=>{var Hx=Vu(),Fx=Zu(),Gx=th(),Wx=sh(),Yx=nh();function It(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}It.prototype.clear=Hx;It.prototype.delete=Fx;It.prototype.get=Gx;It.prototype.has=Wx;It.prototype.set=Yx;ah.exports=It});var ch=p((aq,lh)=>{var oh=vn(),Kx="Expected a function";function xn(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Kx);var r=function(){var s=arguments,i=e?e.apply(this,s):s[0],n=r.cache;if(n.has(i))return n.get(i);var a=t.apply(this,s);return r.cache=n.set(i,a)||n,a};return r.cache=new(xn.Cache||oh),r}xn.Cache=oh;lh.exports=xn});var hh=p((oq,uh)=>{var Vx=ch(),zx=500;function Qx(t){var e=Vx(t,function(s){return r.size===zx&&r.clear(),s}),r=e.cache;return e}uh.exports=Qx});var dh=p((lq,ph)=>{var Xx=hh(),Jx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zx=/\\(\\)?/g,e_=Xx(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Jx,function(r,s,i,n){e.push(i?n.replace(Zx,"$1"):s||r)}),e});ph.exports=e_});var gh=p((cq,fh)=>{function t_(t,e){for(var r=-1,s=t==null?0:t.length,i=Array(s);++r<s;)i[r]=e(t[r],r,t);return i}fh.exports=t_});var xh=p((uq,vh)=>{var mh=fr(),r_=gh(),s_=at(),i_=qs(),n_=1/0,yh=mh?mh.prototype:void 0,wh=yh?yh.toString:void 0;function bh(t){if(typeof t=="string")return t;if(s_(t))return r_(t,bh)+"";if(i_(t))return wh?wh.call(t):"";var e=t+"";return e=="0"&&1/t==-n_?"-0":e}vh.exports=bh});var Eh=p((hq,_h)=>{var a_=xh();function o_(t){return t==null?"":a_(t)}_h.exports=o_});var vr=p((pq,kh)=>{var l_=at(),c_=iu(),u_=dh(),h_=Eh();function p_(t,e){return l_(t)?t:c_(t,e)?[t]:u_(h_(t))}kh.exports=p_});var xr=p((dq,Ch)=>{var d_=qs(),f_=1/0;function g_(t){if(typeof t=="string"||d_(t))return t;var e=t+"";return e=="0"&&1/t==-f_?"-0":e}Ch.exports=g_});var _n=p((fq,Rh)=>{var m_=vr(),y_=xr();function w_(t,e){e=m_(e,t);for(var r=0,s=e.length;t!=null&&r<s;)t=t[y_(e[r++])];return r&&r==s?t:void 0}Rh.exports=w_});var En=p((gq,Sh)=>{var b_=_n();function v_(t,e,r){var s=t==null?void 0:b_(t,e);return s===void 0?r:s}Sh.exports=v_});var Th=p(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});var x_=le(),__=m("@yarnpkg/cli"),kn=m("@yarnpkg/core"),Dt=m("clipanion"),E_=x_.__importDefault(En()),Ah=m("util"),_r=class extends __.BaseCommand{constructor(){super(...arguments),this.why=Dt.Option.Boolean("--why",!1,{description:"Print the explanation for why a setting has its value"}),this.json=Dt.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"}),this.unsafe=Dt.Option.Boolean("--no-redacted",!1,{description:"Don't redact secrets (such as tokens) from the output"}),this.name=Dt.Option.String()}async execute(){let e=await kn.Configuration.find(this.context.cwd,this.context.plugins),r=this.name.replace(/[.[].*$/,""),s=this.name.replace(/^[^.[]*/,"");if(typeof e.settings.get(r)>"u")throw new Dt.UsageError(`Couldn't find a configuration settings named "${r}"`);let n=e.getSpecial(r,{hideSecrets:!this.unsafe,getNativePaths:!0}),a=kn.miscUtils.convertMapsToIndexableObjects(n),o=s?(0,E_.default)(a,s):a,l=await kn.StreamReport.start({configuration:e,includeFooter:!1,json:this.json,stdout:this.context.stdout},async c=>{c.reportJson(o)});if(!this.json){if(typeof o=="string")return this.context.stdout.write(`${o}
`),l.exitCode();Ah.inspect.styles.name="cyan",this.context.stdout.write(`${(0,Ah.inspect)(o,{depth:1/0,colors:e.get("enableColors"),compact:!1})}
`)}return l.exitCode()}};_r.paths=[["config","get"]];_r.usage=Dt.Command.Usage({description:"read a configuration settings",details:`
      This command will print a configuration setting.

      Secrets (such as tokens) will be redacted from the output by default. If this behavior isn't desired, set the \`--no-redacted\` to get the untransformed value.
    `,examples:[["Print a simple configuration setting","yarn config get yarnPath"],["Print a complex configuration setting","yarn config get packageExtensions"],["Print a nested field from the configuration",`yarn config get 'npmScopes["my-company"].npmRegistryServer'`],["Print a token from the configuration","yarn config get npmAuthToken --no-redacted"],["Print a configuration setting as JSON","yarn config get packageExtensions --json"]]});Cn.default=_r});var Ph=p((yq,Oh)=>{var k_=wr();function C_(){this.__data__=new k_,this.size=0}Oh.exports=C_});var Uh=p((wq,qh)=>{function R_(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}qh.exports=R_});var Dh=p((bq,Ih)=>{function S_(t){return this.__data__.get(t)}Ih.exports=S_});var jh=p((vq,Nh)=>{function A_(t){return this.__data__.has(t)}Nh.exports=A_});var Lh=p((xq,$h)=>{var T_=wr(),O_=Us(),P_=vn(),q_=200;function U_(t,e){var r=this.__data__;if(r instanceof T_){var s=r.__data__;if(!O_||s.length<q_-1)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new P_(s)}return r.set(t,e),this.size=r.size,this}$h.exports=U_});var Bh=p((_q,Mh)=>{var I_=wr(),D_=Ph(),N_=Uh(),j_=Dh(),$_=jh(),L_=Lh();function Nt(t){var e=this.__data__=new I_(t);this.size=e.size}Nt.prototype.clear=D_;Nt.prototype.delete=N_;Nt.prototype.get=j_;Nt.prototype.has=$_;Nt.prototype.set=L_;Mh.exports=Nt});var Fh=p((Eq,Hh)=>{function M_(t,e){for(var r=-1,s=t==null?0:t.length;++r<s&&e(t[r],r,t)!==!1;);return t}Hh.exports=M_});var Wh=p((kq,Gh)=>{var B_=ot(),H_=function(){try{var t=B_(Object,"defineProperty");return t({},"",{}),t}catch{}}();Gh.exports=H_});var Rn=p((Cq,Kh)=>{var Yh=Wh();function F_(t,e,r){e=="__proto__"&&Yh?Yh(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}Kh.exports=F_});var Is=p((Rq,Vh)=>{var G_=Rn(),W_=bn(),Y_=Object.prototype,K_=Y_.hasOwnProperty;function V_(t,e,r){var s=t[e];(!(K_.call(t,e)&&W_(s,r))||r===void 0&&!(e in t))&&G_(t,e,r)}Vh.exports=V_});var Er=p((Sq,zh)=>{var z_=Is(),Q_=Rn();function X_(t,e,r,s){var i=!r;r||(r={});for(var n=-1,a=e.length;++n<a;){var o=e[n],l=s?s(r[o],t[o],o,r,t):void 0;l===void 0&&(l=t[o]),i?Q_(r,o,l):z_(r,o,l)}return r}zh.exports=X_});var Xh=p((Aq,Qh)=>{function J_(t,e){for(var r=-1,s=Array(t);++r<t;)s[r]=e(r);return s}Qh.exports=J_});var Zh=p((Tq,Jh)=>{var Z_=Pt(),eE=gt(),tE="[object Arguments]";function rE(t){return eE(t)&&Z_(t)==tE}Jh.exports=rE});var Sn=p((Oq,rp)=>{var ep=Zh(),sE=gt(),tp=Object.prototype,iE=tp.hasOwnProperty,nE=tp.propertyIsEnumerable,aE=ep(function(){return arguments}())?ep:function(t){return sE(t)&&iE.call(t,"callee")&&!nE.call(t,"callee")};rp.exports=aE});var ip=p((Pq,sp)=>{function oE(){return!1}sp.exports=oE});var An=p((kr,jt)=>{var lE=Le(),cE=ip(),op=typeof kr=="object"&&kr&&!kr.nodeType&&kr,np=op&&typeof jt=="object"&&jt&&!jt.nodeType&&jt,uE=np&&np.exports===op,ap=uE?lE.Buffer:void 0,hE=ap?ap.isBuffer:void 0,pE=hE||cE;jt.exports=pE});var Ds=p((qq,lp)=>{var dE=9007199254740991,fE=/^(?:0|[1-9]\d*)$/;function gE(t,e){var r=typeof t;return e=e??dE,!!e&&(r=="number"||r!="symbol"&&fE.test(t))&&t>-1&&t%1==0&&t<e}lp.exports=gE});var Ns=p((Uq,cp)=>{var mE=9007199254740991;function yE(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=mE}cp.exports=yE});var hp=p((Iq,up)=>{var wE=Pt(),bE=Ns(),vE=gt(),xE="[object Arguments]",_E="[object Array]",EE="[object Boolean]",kE="[object Date]",CE="[object Error]",RE="[object Function]",SE="[object Map]",AE="[object Number]",TE="[object Object]",OE="[object RegExp]",PE="[object Set]",qE="[object String]",UE="[object WeakMap]",IE="[object ArrayBuffer]",DE="[object DataView]",NE="[object Float32Array]",jE="[object Float64Array]",$E="[object Int8Array]",LE="[object Int16Array]",ME="[object Int32Array]",BE="[object Uint8Array]",HE="[object Uint8ClampedArray]",FE="[object Uint16Array]",GE="[object Uint32Array]",V={};V[NE]=V[jE]=V[$E]=V[LE]=V[ME]=V[BE]=V[HE]=V[FE]=V[GE]=!0;V[xE]=V[_E]=V[IE]=V[EE]=V[DE]=V[kE]=V[CE]=V[RE]=V[SE]=V[AE]=V[TE]=V[OE]=V[PE]=V[qE]=V[UE]=!1;function WE(t){return vE(t)&&bE(t.length)&&!!V[wE(t)]}up.exports=WE});var js=p((Dq,pp)=>{function YE(t){return function(e){return t(e)}}pp.exports=YE});var $s=p((Cr,$t)=>{var KE=gn(),dp=typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,Rr=dp&&typeof $t=="object"&&$t&&!$t.nodeType&&$t,VE=Rr&&Rr.exports===dp,Tn=VE&&KE.process,zE=function(){try{var t=Rr&&Rr.require&&Rr.require("util").types;return t||Tn&&Tn.binding&&Tn.binding("util")}catch{}}();$t.exports=zE});var yp=p((Nq,mp)=>{var QE=hp(),XE=js(),fp=$s(),gp=fp&&fp.isTypedArray,JE=gp?XE(gp):QE;mp.exports=JE});var On=p((jq,wp)=>{var ZE=Xh(),ek=Sn(),tk=at(),rk=An(),sk=Ds(),ik=yp(),nk=Object.prototype,ak=nk.hasOwnProperty;function ok(t,e){var r=tk(t),s=!r&&ek(t),i=!r&&!s&&rk(t),n=!r&&!s&&!i&&ik(t),a=r||s||i||n,o=a?ZE(t.length,String):[],l=o.length;for(var c in t)(e||ak.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||n&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||sk(c,l)))&&o.push(c);return o}wp.exports=ok});var Ls=p(($q,bp)=>{var lk=Object.prototype;function ck(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||lk;return t===r}bp.exports=ck});var Pn=p((Lq,vp)=>{function uk(t,e){return function(r){return t(e(r))}}vp.exports=uk});var _p=p((Mq,xp)=>{var hk=Pn(),pk=hk(Object.keys,Object);xp.exports=pk});var kp=p((Bq,Ep)=>{var dk=Ls(),fk=_p(),gk=Object.prototype,mk=gk.hasOwnProperty;function yk(t){if(!dk(t))return fk(t);var e=[];for(var r in Object(t))mk.call(t,r)&&r!="constructor"&&e.push(r);return e}Ep.exports=yk});var qn=p((Hq,Cp)=>{var wk=mn(),bk=Ns();function vk(t){return t!=null&&bk(t.length)&&!wk(t)}Cp.exports=vk});var Ms=p((Fq,Rp)=>{var xk=On(),_k=kp(),Ek=qn();function kk(t){return Ek(t)?xk(t):_k(t)}Rp.exports=kk});var Ap=p((Gq,Sp)=>{var Ck=Er(),Rk=Ms();function Sk(t,e){return t&&Ck(e,Rk(e),t)}Sp.exports=Sk});var Op=p((Wq,Tp)=>{function Ak(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}Tp.exports=Ak});var qp=p((Yq,Pp)=>{var Tk=mt(),Ok=Ls(),Pk=Op(),qk=Object.prototype,Uk=qk.hasOwnProperty;function Ik(t){if(!Tk(t))return Pk(t);var e=Ok(t),r=[];for(var s in t)s=="constructor"&&(e||!Uk.call(t,s))||r.push(s);return r}Pp.exports=Ik});var Bs=p((Kq,Up)=>{var Dk=On(),Nk=qp(),jk=qn();function $k(t){return jk(t)?Dk(t,!0):Nk(t)}Up.exports=$k});var Dp=p((Vq,Ip)=>{var Lk=Er(),Mk=Bs();function Bk(t,e){return t&&Lk(e,Mk(e),t)}Ip.exports=Bk});var Mp=p((Sr,Lt)=>{var Hk=Le(),Lp=typeof Sr=="object"&&Sr&&!Sr.nodeType&&Sr,Np=Lp&&typeof Lt=="object"&&Lt&&!Lt.nodeType&&Lt,Fk=Np&&Np.exports===Lp,jp=Fk?Hk.Buffer:void 0,$p=jp?jp.allocUnsafe:void 0;function Gk(t,e){if(e)return t.slice();var r=t.length,s=$p?$p(r):new t.constructor(r);return t.copy(s),s}Lt.exports=Gk});var Hp=p((zq,Bp)=>{function Wk(t,e){var r=-1,s=t.length;for(e||(e=Array(s));++r<s;)e[r]=t[r];return e}Bp.exports=Wk});var Gp=p((Qq,Fp)=>{function Yk(t,e){for(var r=-1,s=t==null?0:t.length,i=0,n=[];++r<s;){var a=t[r];e(a,r,t)&&(n[i++]=a)}return n}Fp.exports=Yk});var Un=p((Xq,Wp)=>{function Kk(){return[]}Wp.exports=Kk});var Hs=p((Jq,Kp)=>{var Vk=Gp(),zk=Un(),Qk=Object.prototype,Xk=Qk.propertyIsEnumerable,Yp=Object.getOwnPropertySymbols,Jk=Yp?function(t){return t==null?[]:(t=Object(t),Vk(Yp(t),function(e){return Xk.call(t,e)}))}:zk;Kp.exports=Jk});var zp=p((Zq,Vp)=>{var Zk=Er(),eC=Hs();function tC(t,e){return Zk(t,eC(t),e)}Vp.exports=tC});var In=p((e1,Qp)=>{function rC(t,e){for(var r=-1,s=e.length,i=t.length;++r<s;)t[i+r]=e[r];return t}Qp.exports=rC});var Dn=p((t1,Xp)=>{var sC=Pn(),iC=sC(Object.getPrototypeOf,Object);Xp.exports=iC});var Nn=p((r1,Jp)=>{var nC=In(),aC=Dn(),oC=Hs(),lC=Un(),cC=Object.getOwnPropertySymbols,uC=cC?function(t){for(var e=[];t;)nC(e,oC(t)),t=aC(t);return e}:lC;Jp.exports=uC});var ed=p((s1,Zp)=>{var hC=Er(),pC=Nn();function dC(t,e){return hC(t,pC(t),e)}Zp.exports=dC});var jn=p((i1,td)=>{var fC=In(),gC=at();function mC(t,e,r){var s=e(t);return gC(t)?s:fC(s,r(t))}td.exports=mC});var sd=p((n1,rd)=>{var yC=jn(),wC=Hs(),bC=Ms();function vC(t){return yC(t,bC,wC)}rd.exports=vC});var nd=p((a1,id)=>{var xC=jn(),_C=Nn(),EC=Bs();function kC(t){return xC(t,EC,_C)}id.exports=kC});var od=p((o1,ad)=>{var CC=ot(),RC=Le(),SC=CC(RC,"DataView");ad.exports=SC});var cd=p((l1,ld)=>{var AC=ot(),TC=Le(),OC=AC(TC,"Promise");ld.exports=OC});var hd=p((c1,ud)=>{var PC=ot(),qC=Le(),UC=PC(qC,"Set");ud.exports=UC});var dd=p((u1,pd)=>{var IC=ot(),DC=Le(),NC=IC(DC,"WeakMap");pd.exports=NC});var Fs=p((h1,vd)=>{var $n=od(),Ln=Us(),Mn=cd(),Bn=hd(),Hn=dd(),bd=Pt(),Mt=wn(),fd="[object Map]",jC="[object Object]",gd="[object Promise]",md="[object Set]",yd="[object WeakMap]",wd="[object DataView]",$C=Mt($n),LC=Mt(Ln),MC=Mt(Mn),BC=Mt(Bn),HC=Mt(Hn),yt=bd;($n&&yt(new $n(new ArrayBuffer(1)))!=wd||Ln&&yt(new Ln)!=fd||Mn&&yt(Mn.resolve())!=gd||Bn&&yt(new Bn)!=md||Hn&&yt(new Hn)!=yd)&&(yt=function(t){var e=bd(t),r=e==jC?t.constructor:void 0,s=r?Mt(r):"";if(s)switch(s){case $C:return wd;case LC:return fd;case MC:return gd;case BC:return md;case HC:return yd}return e});vd.exports=yt});var _d=p((p1,xd)=>{var FC=Object.prototype,GC=FC.hasOwnProperty;function WC(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&GC.call(t,"index")&&(r.index=t.index,r.input=t.input),r}xd.exports=WC});var kd=p((d1,Ed)=>{var YC=Le(),KC=YC.Uint8Array;Ed.exports=KC});var Gs=p((f1,Rd)=>{var Cd=kd();function VC(t){var e=new t.constructor(t.byteLength);return new Cd(e).set(new Cd(t)),e}Rd.exports=VC});var Ad=p((g1,Sd)=>{var zC=Gs();function QC(t,e){var r=e?zC(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}Sd.exports=QC});var Od=p((m1,Td)=>{var XC=/\w*$/;function JC(t){var e=new t.constructor(t.source,XC.exec(t));return e.lastIndex=t.lastIndex,e}Td.exports=JC});var Dd=p((y1,Id)=>{var Pd=fr(),qd=Pd?Pd.prototype:void 0,Ud=qd?qd.valueOf:void 0;function ZC(t){return Ud?Object(Ud.call(t)):{}}Id.exports=ZC});var jd=p((w1,Nd)=>{var eR=Gs();function tR(t,e){var r=e?eR(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}Nd.exports=tR});var Ld=p((b1,$d)=>{var rR=Gs(),sR=Ad(),iR=Od(),nR=Dd(),aR=jd(),oR="[object Boolean]",lR="[object Date]",cR="[object Map]",uR="[object Number]",hR="[object RegExp]",pR="[object Set]",dR="[object String]",fR="[object Symbol]",gR="[object ArrayBuffer]",mR="[object DataView]",yR="[object Float32Array]",wR="[object Float64Array]",bR="[object Int8Array]",vR="[object Int16Array]",xR="[object Int32Array]",_R="[object Uint8Array]",ER="[object Uint8ClampedArray]",kR="[object Uint16Array]",CR="[object Uint32Array]";function RR(t,e,r){var s=t.constructor;switch(e){case gR:return rR(t);case oR:case lR:return new s(+t);case mR:return sR(t,r);case yR:case wR:case bR:case vR:case xR:case _R:case ER:case kR:case CR:return aR(t,r);case cR:return new s;case uR:case dR:return new s(t);case hR:return iR(t);case pR:return new s;case fR:return nR(t)}}$d.exports=RR});var Hd=p((v1,Bd)=>{var SR=mt(),Md=Object.create,AR=function(){function t(){}return function(e){if(!SR(e))return{};if(Md)return Md(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();Bd.exports=AR});var Gd=p((x1,Fd)=>{var TR=Hd(),OR=Dn(),PR=Ls();function qR(t){return typeof t.constructor=="function"&&!PR(t)?TR(OR(t)):{}}Fd.exports=qR});var Yd=p((_1,Wd)=>{var UR=Fs(),IR=gt(),DR="[object Map]";function NR(t){return IR(t)&&UR(t)==DR}Wd.exports=NR});var Qd=p((E1,zd)=>{var jR=Yd(),$R=js(),Kd=$s(),Vd=Kd&&Kd.isMap,LR=Vd?$R(Vd):jR;zd.exports=LR});var Jd=p((k1,Xd)=>{var MR=Fs(),BR=gt(),HR="[object Set]";function FR(t){return BR(t)&&MR(t)==HR}Xd.exports=FR});var rf=p((C1,tf)=>{var GR=Jd(),WR=js(),Zd=$s(),ef=Zd&&Zd.isSet,YR=ef?WR(ef):GR;tf.exports=YR});var lf=p((R1,of)=>{var KR=Bh(),VR=Fh(),zR=Is(),QR=Ap(),XR=Dp(),JR=Mp(),ZR=Hp(),eS=zp(),tS=ed(),rS=sd(),sS=nd(),iS=Fs(),nS=_d(),aS=Ld(),oS=Gd(),lS=at(),cS=An(),uS=Qd(),hS=mt(),pS=rf(),dS=Ms(),fS=Bs(),gS=1,mS=2,yS=4,sf="[object Arguments]",wS="[object Array]",bS="[object Boolean]",vS="[object Date]",xS="[object Error]",nf="[object Function]",_S="[object GeneratorFunction]",ES="[object Map]",kS="[object Number]",af="[object Object]",CS="[object RegExp]",RS="[object Set]",SS="[object String]",AS="[object Symbol]",TS="[object WeakMap]",OS="[object ArrayBuffer]",PS="[object DataView]",qS="[object Float32Array]",US="[object Float64Array]",IS="[object Int8Array]",DS="[object Int16Array]",NS="[object Int32Array]",jS="[object Uint8Array]",$S="[object Uint8ClampedArray]",LS="[object Uint16Array]",MS="[object Uint32Array]",Y={};Y[sf]=Y[wS]=Y[OS]=Y[PS]=Y[bS]=Y[vS]=Y[qS]=Y[US]=Y[IS]=Y[DS]=Y[NS]=Y[ES]=Y[kS]=Y[af]=Y[CS]=Y[RS]=Y[SS]=Y[AS]=Y[jS]=Y[$S]=Y[LS]=Y[MS]=!0;Y[xS]=Y[nf]=Y[TS]=!1;function Ws(t,e,r,s,i,n){var a,o=e&gS,l=e&mS,c=e&yS;if(r&&(a=i?r(t,s,i,n):r(t)),a!==void 0)return a;if(!hS(t))return t;var u=lS(t);if(u){if(a=nS(t),!o)return ZR(t,a)}else{var h=iS(t),d=h==nf||h==_S;if(cS(t))return JR(t,o);if(h==af||h==sf||d&&!i){if(a=l||d?{}:oS(t),!o)return l?tS(t,XR(a,t)):eS(t,QR(a,t))}else{if(!Y[h])return i?t:{};a=aS(t,h,o)}}n||(n=new KR);var y=n.get(t);if(y)return y;n.set(t,a),pS(t)?t.forEach(function(g){a.add(Ws(g,e,r,g,t,n))}):uS(t)&&t.forEach(function(g,v){a.set(v,Ws(g,e,r,v,t,n))});var f=c?l?sS:rS:l?fS:dS,b=u?void 0:f(t);return VR(b||t,function(g,v){b&&(v=g,g=t[v]),zR(a,v,Ws(g,e,r,v,t,n))}),a}of.exports=Ws});var Fn=p((S1,cf)=>{var BS=lf(),HS=1,FS=4;function GS(t){return BS(t,HS|FS)}cf.exports=GS});var pf=p((A1,hf)=>{var WS=Is(),YS=vr(),KS=Ds(),uf=mt(),VS=xr();function zS(t,e,r,s){if(!uf(t))return t;e=YS(e,t);for(var i=-1,n=e.length,a=n-1,o=t;o!=null&&++i<n;){var l=VS(e[i]),c=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=a){var u=o[l];c=s?s(u,l,o):void 0,c===void 0&&(c=uf(u)?u:KS(e[i+1])?[]:{})}WS(o,l,c),o=o[l]}return t}hf.exports=zS});var ff=p((T1,df)=>{var QS=pf();function XS(t,e,r){return t==null?t:QS(t,e,r)}df.exports=XS});var mf=p(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});var Gn=le(),JS=m("@yarnpkg/cli"),wt=m("@yarnpkg/core"),lt=m("clipanion"),ZS=Gn.__importDefault(Fn()),eA=Gn.__importDefault(En()),tA=Gn.__importDefault(ff()),gf=m("util"),Ar=class extends JS.BaseCommand{constructor(){super(...arguments),this.json=lt.Option.Boolean("--json",!1,{description:"Set complex configuration settings to JSON values"}),this.home=lt.Option.Boolean("-H,--home",!1,{description:"Update the home configuration instead of the project configuration"}),this.name=lt.Option.String(),this.value=lt.Option.String()}async execute(){let e=await wt.Configuration.find(this.context.cwd,this.context.plugins),r=()=>{if(!e.projectCwd)throw new lt.UsageError("This command must be run from within a project folder");return e.projectCwd},s=this.name.replace(/[.[].*$/,""),i=this.name.replace(/^[^.[]*\.?/,"");if(typeof e.settings.get(s)>"u")throw new lt.UsageError(`Couldn't find a configuration settings named "${s}"`);if(s==="enableStrictSettings")throw new lt.UsageError("This setting only affects the file it's in, and thus cannot be set from the CLI");let a=this.json?JSON.parse(this.value):this.value;await(this.home?y=>wt.Configuration.updateHomeConfiguration(y):y=>wt.Configuration.updateConfiguration(r(),y))(y=>{if(i){let f=(0,ZS.default)(y);return(0,tA.default)(f,this.name,a),f}else return{...y,[s]:a}});let c=(await wt.Configuration.find(this.context.cwd,this.context.plugins)).getSpecial(s,{hideSecrets:!0,getNativePaths:!0}),u=wt.miscUtils.convertMapsToIndexableObjects(c),h=i?(0,eA.default)(u,i):u;return(await wt.StreamReport.start({configuration:e,includeFooter:!1,stdout:this.context.stdout},async y=>{gf.inspect.styles.name="cyan",y.reportInfo(wt.MessageName.UNNAMED,`Successfully set ${this.name} to ${(0,gf.inspect)(h,{depth:1/0,colors:e.get("enableColors"),compact:!1})}`)})).exitCode()}};Ar.paths=[["config","set"]];Ar.usage=lt.Command.Usage({description:"change a configuration settings",details:`
      This command will set a configuration setting.

      When used without the \`--json\` flag, it can only set a simple configuration setting (a string, a number, or a boolean).

      When used with the \`--json\` flag, it can set both simple and complex configuration settings, including Arrays and Objects.
    `,examples:[["Set a simple configuration setting (a string, a number, or a boolean)","yarn config set initScope myScope"],["Set a simple configuration setting (a string, a number, or a boolean) using the `--json` flag",'yarn config set initScope --json \\"myScope\\"'],["Set a complex configuration setting (an Array) using the `--json` flag",`yarn config set unsafeHttpWhitelist --json '["*.example.com", "example.com"]'`],["Set a complex configuration setting (an Object) using the `--json` flag",`yarn config set packageExtensions --json '{ "@babel/parser@*": { "dependencies": { "@babel/types": "*" } } }'`],["Set a nested configuration setting",'yarn config set npmScopes.company.npmRegistryServer "https://npm.example.com"'],["Set a nested configuration setting using indexed access for non-simple keys",`yarn config set 'npmRegistries["//npm.example.com"].npmAuthToken' "ffffffff-ffff-ffff-ffff-ffffffffffff"`]]});Wn.default=Ar});var wf=p((P1,yf)=>{var rA=Object.prototype,sA=rA.hasOwnProperty;function iA(t,e){return t!=null&&sA.call(t,e)}yf.exports=iA});var vf=p((q1,bf)=>{var nA=vr(),aA=Sn(),oA=at(),lA=Ds(),cA=Ns(),uA=xr();function hA(t,e,r){e=nA(e,t);for(var s=-1,i=e.length,n=!1;++s<i;){var a=uA(e[s]);if(!(n=t!=null&&r(t,a)))break;t=t[a]}return n||++s!=i?n:(i=t==null?0:t.length,!!i&&cA(i)&&lA(a,i)&&(oA(t)||aA(t)))}bf.exports=hA});var _f=p((U1,xf)=>{var pA=wf(),dA=vf();function fA(t,e){return t!=null&&dA(t,e,pA)}xf.exports=fA});var kf=p((I1,Ef)=>{function gA(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}Ef.exports=gA});var Rf=p((D1,Cf)=>{function mA(t,e,r){var s=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var n=Array(i);++s<i;)n[s]=t[s+e];return n}Cf.exports=mA});var Af=p((N1,Sf)=>{var yA=_n(),wA=Rf();function bA(t,e){return e.length<2?t:yA(t,wA(e,0,-1))}Sf.exports=bA});var Of=p((j1,Tf)=>{var vA=vr(),xA=kf(),_A=Af(),EA=xr();function kA(t,e){return e=vA(e,t),t=_A(t,e),t==null||delete t[EA(xA(e))]}Tf.exports=kA});var qf=p(($1,Pf)=>{var CA=Of();function RA(t,e){return t==null?!0:CA(t,e)}Pf.exports=RA});var Uf=p(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});var Yn=le(),SA=m("@yarnpkg/cli"),Bt=m("@yarnpkg/core"),Tr=m("clipanion"),AA=Yn.__importDefault(Fn()),TA=Yn.__importDefault(_f()),OA=Yn.__importDefault(qf()),Or=class extends SA.BaseCommand{constructor(){super(...arguments),this.home=Tr.Option.Boolean("-H,--home",!1,{description:"Update the home configuration instead of the project configuration"}),this.name=Tr.Option.String()}async execute(){let e=await Bt.Configuration.find(this.context.cwd,this.context.plugins),r=()=>{if(!e.projectCwd)throw new Tr.UsageError("This command must be run from within a project folder");return e.projectCwd},s=this.name.replace(/[.[].*$/,""),i=this.name.replace(/^[^.[]*\.?/,"");if(typeof e.settings.get(s)>"u")throw new Tr.UsageError(`Couldn't find a configuration settings named "${s}"`);let a=this.home?l=>Bt.Configuration.updateHomeConfiguration(l):l=>Bt.Configuration.updateConfiguration(r(),l);return(await Bt.StreamReport.start({configuration:e,includeFooter:!1,stdout:this.context.stdout},async l=>{let c=!1;await a(u=>{if(!(0,TA.default)(u,this.name))return l.reportWarning(Bt.MessageName.UNNAMED,`Configuration doesn't contain setting ${this.name}; there is nothing to unset`),c=!0,u;let h=i?(0,AA.default)(u):{...u};return(0,OA.default)(h,this.name),h}),c||l.reportInfo(Bt.MessageName.UNNAMED,`Successfully unset ${this.name}`)})).exitCode()}};Or.paths=[["config","unset"]];Or.usage=Tr.Command.Usage({description:"unset a configuration setting",details:`
      This command will unset a configuration setting.
    `,examples:[["Unset a simple configuration setting","yarn config unset initScope"],["Unset a complex configuration setting","yarn config unset packageExtensions"],["Unset a nested configuration setting","yarn config unset npmScopes.company.npmRegistryServer"]]});Kn.default=Or});var If=p(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});var PA=m("@yarnpkg/cli"),pe=m("@yarnpkg/core"),qA=m("@yarnpkg/fslib"),Ht=m("clipanion"),Vn=m("util"),Pr=class extends PA.BaseCommand{constructor(){super(...arguments),this.noDefaults=Ht.Option.Boolean("--no-defaults",!1,{description:"Omit the default values from the display"}),this.json=Ht.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"}),this.verbose=Ht.Option.Boolean("-v,--verbose",{hidden:!0}),this.why=Ht.Option.Boolean("--why",{hidden:!0}),this.names=Ht.Option.Rest()}async execute(){let e=await pe.Configuration.find(this.context.cwd,this.context.plugins,{strict:!1}),r=await(0,pe.reportOptionDeprecations)({configuration:e,stdout:this.context.stdout,forceError:this.json},[{option:this.verbose,message:"The --verbose option is deprecated, the settings' descriptions are now always displayed"},{option:this.why,message:"The --why option is deprecated, the settings' sources are now always displayed"}]);if(r!==null)return r;let s=this.names.length>0?[...new Set(this.names)].sort():[...e.settings.keys()].sort(),i,n=await pe.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout,includeFooter:!1},async a=>{if(e.invalid.size>0&&!this.json){for(let[o,l]of e.invalid)a.reportError(pe.MessageName.INVALID_CONFIGURATION_KEY,`Invalid configuration key "${o}" in ${l}`);a.reportSeparator()}if(this.json)for(let o of s){let l=e.settings.get(o);typeof l>"u"&&a.reportError(pe.MessageName.INVALID_CONFIGURATION_KEY,`No configuration key named "${o}"`);let c=e.getSpecial(o,{hideSecrets:!0,getNativePaths:!0}),u=e.sources.get(o)??"<default>",h=u&&u[0]!=="<"?qA.npath.fromPortablePath(u):u;a.reportJson({key:o,effective:c,source:h,...l})}else{let o={breakLength:1/0,colors:e.get("enableColors"),maxArrayLength:2},l={},c={children:l};for(let u of s){if(this.noDefaults&&!e.sources.has(u))continue;let h=e.settings.get(u),d=e.sources.get(u)??"<default>",y=e.getSpecial(u,{hideSecrets:!0,getNativePaths:!0}),f={Description:{label:"Description",value:pe.formatUtils.tuple(pe.formatUtils.Type.MARKDOWN,{text:h.description,format:this.cli.format(),paragraphs:!1})},Source:{label:"Source",value:pe.formatUtils.tuple(d[0]==="<"?pe.formatUtils.Type.CODE:pe.formatUtils.Type.PATH,d)}};l[u]={value:pe.formatUtils.tuple(pe.formatUtils.Type.CODE,u),children:f};let b=(g,v)=>{for(let[x,w]of v)if(w instanceof Map){let C={};g[x]={children:C},b(C,w)}else g[x]={label:x,value:pe.formatUtils.tuple(pe.formatUtils.Type.NO_HINT,(0,Vn.inspect)(w,o))}};y instanceof Map?b(f,y):f.Value={label:"Value",value:pe.formatUtils.tuple(pe.formatUtils.Type.NO_HINT,(0,Vn.inspect)(y,o))}}s.length!==1&&(i=void 0),pe.treeUtils.emitTree(c,{configuration:e,json:this.json,stdout:this.context.stdout,separators:2})}});if(!this.json&&typeof i<"u"){let a=s[0],o=(0,Vn.inspect)(e.getSpecial(a,{hideSecrets:!0,getNativePaths:!0}),{colors:e.get("enableColors")});this.context.stdout.write(`
`),this.context.stdout.write(`${o}
`)}return n.exitCode()}};Pr.paths=[["config"]];Pr.usage=Ht.Command.Usage({description:"display the current configuration",details:`
      This command prints the current active configuration settings.
    `,examples:[["Print the active configuration settings","$0 config"]]});zn.default=Pr});var Ys=p(Oe=>{"use strict";Oe.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1;Oe.find=(t,e)=>t.nodes.find(r=>r.type===e);Oe.exceedsLimit=(t,e,r=1,s)=>s===!1||!Oe.isInteger(t)||!Oe.isInteger(e)?!1:(Number(e)-Number(t))/Number(r)>=s;Oe.escapeNode=(t,e=0,r)=>{let s=t.nodes[e];!s||(r&&s.type===r||s.type==="open"||s.type==="close")&&s.escaped!==!0&&(s.value="\\"+s.value,s.escaped=!0)};Oe.encloseBrace=t=>t.type!=="brace"?!1:t.commas>>0+t.ranges>>0===0?(t.invalid=!0,!0):!1;Oe.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:t.commas>>0+t.ranges>>0===0||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1;Oe.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0;Oe.reduce=t=>t.reduce((e,r)=>(r.type==="text"&&e.push(r.value),r.type==="range"&&(r.type="text"),e),[]);Oe.flatten=(...t)=>{let e=[],r=s=>{for(let i=0;i<s.length;i++){let n=s[i];Array.isArray(n)?r(n,e):n!==void 0&&e.push(n)}return e};return r(t),e}});var Ks=p((H1,Nf)=>{"use strict";var Df=Ys();Nf.exports=(t,e={})=>{let r=(s,i={})=>{let n=e.escapeInvalid&&Df.isInvalidBrace(i),a=s.invalid===!0&&e.escapeInvalid===!0,o="";if(s.value)return(n||a)&&Df.isOpenOrClose(s)?"\\"+s.value:s.value;if(s.value)return s.value;if(s.nodes)for(let l of s.nodes)o+=r(l);return o};return r(t)}});var $f=p((F1,jf)=>{"use strict";jf.exports=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1}});var Kf=p((G1,Yf)=>{"use strict";var Lf=$f(),bt=(t,e,r)=>{if(Lf(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(Lf(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let s={relaxZeros:!0,...r};typeof s.strictZeros=="boolean"&&(s.relaxZeros=s.strictZeros===!1);let i=String(s.relaxZeros),n=String(s.shorthand),a=String(s.capture),o=String(s.wrap),l=t+":"+e+"="+i+n+a+o;if(bt.cache.hasOwnProperty(l))return bt.cache[l].result;let c=Math.min(t,e),u=Math.max(t,e);if(Math.abs(c-u)===1){let b=t+"|"+e;return s.capture?`(${b})`:s.wrap===!1?b:`(?:${b})`}let h=Wf(t)||Wf(e),d={min:t,max:e,a:c,b:u},y=[],f=[];if(h&&(d.isPadded=h,d.maxLen=String(d.max).length),c<0){let b=u<0?Math.abs(u):1;f=Mf(b,Math.abs(c),d,s),c=d.a=0}return u>=0&&(y=Mf(c,u,d,s)),d.negatives=f,d.positives=y,d.result=UA(f,y,s),s.capture===!0?d.result=`(${d.result})`:s.wrap!==!1&&y.length+f.length>1&&(d.result=`(?:${d.result})`),bt.cache[l]=d,d.result};function UA(t,e,r){let s=Qn(t,e,"-",!1,r)||[],i=Qn(e,t,"",!1,r)||[],n=Qn(t,e,"-?",!0,r)||[];return s.concat(n).concat(i).join("|")}function IA(t,e){let r=1,s=1,i=Hf(t,r),n=new Set([e]);for(;t<=i&&i<=e;)n.add(i),r+=1,i=Hf(t,r);for(i=Ff(e+1,s)-1;t<i&&i<=e;)n.add(i),s+=1,i=Ff(e+1,s)-1;return n=[...n],n.sort(jA),n}function DA(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let s=NA(t,e),i=s.length,n="",a=0;for(let o=0;o<i;o++){let[l,c]=s[o];l===c?n+=l:l!=="0"||c!=="9"?n+=$A(l,c,r):a++}return a&&(n+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:n,count:[a],digits:i}}function Mf(t,e,r,s){let i=IA(t,e),n=[],a=t,o;for(let l=0;l<i.length;l++){let c=i[l],u=DA(String(a),String(c),s),h="";if(!r.isPadded&&o&&o.pattern===u.pattern){o.count.length>1&&o.count.pop(),o.count.push(u.count[0]),o.string=o.pattern+Gf(o.count),a=c+1;continue}r.isPadded&&(h=LA(c,r,s)),u.string=h+u.pattern+Gf(u.count),n.push(u),a=c+1,o=u}return n}function Qn(t,e,r,s,i){let n=[];for(let a of t){let{string:o}=a;!s&&!Bf(e,"string",o)&&n.push(r+o),s&&Bf(e,"string",o)&&n.push(r+o)}return n}function NA(t,e){let r=[];for(let s=0;s<t.length;s++)r.push([t[s],e[s]]);return r}function jA(t,e){return t>e?1:e>t?-1:0}function Bf(t,e,r){return t.some(s=>s[e]===r)}function Hf(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function Ff(t,e){return t-t%Math.pow(10,e)}function Gf(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function $A(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function Wf(t){return/^-?(0+)\d/.test(t)}function LA(t,e,r){if(!e.isPadded)return t;let s=Math.abs(e.maxLen-String(t).length),i=r.relaxZeros!==!1;switch(s){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${s}}`:`0{${s}}`}}bt.cache={};bt.clearCache=()=>bt.cache={};Yf.exports=bt});var Zn=p((W1,tg)=>{"use strict";var MA=m("util"),Qf=Kf(),Vf=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),BA=t=>e=>t===!0?Number(e):String(e),Xn=t=>typeof t=="number"||typeof t=="string"&&t!=="",qr=t=>Number.isInteger(+t),Jn=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},HA=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,FA=(t,e,r)=>{if(e>0){let s=t[0]==="-"?"-":"";s&&(t=t.slice(1)),t=s+t.padStart(s?e-1:e,"0")}return r===!1?String(t):t},zf=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},GA=(t,e)=>{t.negatives.sort((a,o)=>a<o?-1:a>o?1:0),t.positives.sort((a,o)=>a<o?-1:a>o?1:0);let r=e.capture?"":"?:",s="",i="",n;return t.positives.length&&(s=t.positives.join("|")),t.negatives.length&&(i=`-(${r}${t.negatives.join("|")})`),s&&i?n=`${s}|${i}`:n=s||i,e.wrap?`(${r}${n})`:n},Xf=(t,e,r,s)=>{if(r)return Qf(t,e,{wrap:!1,...s});let i=String.fromCharCode(t);if(t===e)return i;let n=String.fromCharCode(e);return`[${i}-${n}]`},Jf=(t,e,r)=>{if(Array.isArray(t)){let s=r.wrap===!0,i=r.capture?"":"?:";return s?`(${i}${t.join("|")})`:t.join("|")}return Qf(t,e,r)},Zf=(...t)=>new RangeError("Invalid range arguments: "+MA.inspect(...t)),eg=(t,e,r)=>{if(r.strictRanges===!0)throw Zf([t,e]);return[]},WA=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},YA=(t,e,r=1,s={})=>{let i=Number(t),n=Number(e);if(!Number.isInteger(i)||!Number.isInteger(n)){if(s.strictRanges===!0)throw Zf([t,e]);return[]}i===0&&(i=0),n===0&&(n=0);let a=i>n,o=String(t),l=String(e),c=String(r);r=Math.max(Math.abs(r),1);let u=Jn(o)||Jn(l)||Jn(c),h=u?Math.max(o.length,l.length,c.length):0,d=u===!1&&HA(t,e,s)===!1,y=s.transform||BA(d);if(s.toRegex&&r===1)return Xf(zf(t,h),zf(e,h),!0,s);let f={negatives:[],positives:[]},b=x=>f[x<0?"negatives":"positives"].push(Math.abs(x)),g=[],v=0;for(;a?i>=n:i<=n;)s.toRegex===!0&&r>1?b(i):g.push(FA(y(i,v),h,d)),i=a?i-r:i+r,v++;return s.toRegex===!0?r>1?GA(f,s):Jf(g,null,{wrap:!1,...s}):g},KA=(t,e,r=1,s={})=>{if(!qr(t)&&t.length>1||!qr(e)&&e.length>1)return eg(t,e,s);let i=s.transform||(d=>String.fromCharCode(d)),n=`${t}`.charCodeAt(0),a=`${e}`.charCodeAt(0),o=n>a,l=Math.min(n,a),c=Math.max(n,a);if(s.toRegex&&r===1)return Xf(l,c,!1,s);let u=[],h=0;for(;o?n>=a:n<=a;)u.push(i(n,h)),n=o?n-r:n+r,h++;return s.toRegex===!0?Jf(u,null,{wrap:!1,options:s}):u},Vs=(t,e,r,s={})=>{if(e==null&&Xn(t))return[t];if(!Xn(t)||!Xn(e))return eg(t,e,s);if(typeof r=="function")return Vs(t,e,1,{transform:r});if(Vf(r))return Vs(t,e,0,r);let i={...s};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,qr(r)?qr(t)&&qr(e)?YA(t,e,r,i):KA(t,e,Math.max(Math.abs(r),1),i):r!=null&&!Vf(r)?WA(r,i):Vs(t,e,1,r)};tg.exports=Vs});var ig=p((Y1,sg)=>{"use strict";var VA=Zn(),rg=Ys(),zA=(t,e={})=>{let r=(s,i={})=>{let n=rg.isInvalidBrace(i),a=s.invalid===!0&&e.escapeInvalid===!0,o=n===!0||a===!0,l=e.escapeInvalid===!0?"\\":"",c="";if(s.isOpen===!0||s.isClose===!0)return l+s.value;if(s.type==="open")return o?l+s.value:"(";if(s.type==="close")return o?l+s.value:")";if(s.type==="comma")return s.prev.type==="comma"?"":o?s.value:"|";if(s.value)return s.value;if(s.nodes&&s.ranges>0){let u=rg.reduce(s.nodes),h=VA(...u,{...e,wrap:!1,toRegex:!0});if(h.length!==0)return u.length>1&&h.length>1?`(${h})`:h}if(s.nodes)for(let u of s.nodes)c+=r(u,s);return c};return r(t)};sg.exports=zA});var og=p((K1,ag)=>{"use strict";var QA=Zn(),ng=Ks(),Ft=Ys(),vt=(t="",e="",r=!1)=>{let s=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?Ft.flatten(e).map(i=>`{${i}}`):e;for(let i of t)if(Array.isArray(i))for(let n of i)s.push(vt(n,e,r));else for(let n of e)r===!0&&typeof n=="string"&&(n=`{${n}}`),s.push(Array.isArray(n)?vt(i,n,r):i+n);return Ft.flatten(s)},XA=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,s=(i,n={})=>{i.queue=[];let a=n,o=n.queue;for(;a.type!=="brace"&&a.type!=="root"&&a.parent;)a=a.parent,o=a.queue;if(i.invalid||i.dollar){o.push(vt(o.pop(),ng(i,e)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){o.push(vt(o.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let h=Ft.reduce(i.nodes);if(Ft.exceedsLimit(...h,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let d=QA(...h,e);d.length===0&&(d=ng(i,e)),o.push(vt(o.pop(),d)),i.nodes=[];return}let l=Ft.encloseBrace(i),c=i.queue,u=i;for(;u.type!=="brace"&&u.type!=="root"&&u.parent;)u=u.parent,c=u.queue;for(let h=0;h<i.nodes.length;h++){let d=i.nodes[h];if(d.type==="comma"&&i.type==="brace"){h===1&&c.push(""),c.push("");continue}if(d.type==="close"){o.push(vt(o.pop(),c,l));continue}if(d.value&&d.type!=="open"){c.push(vt(c.pop(),d.value));continue}d.nodes&&s(d,i)}return c};return Ft.flatten(s(t))};ag.exports=XA});var cg=p((V1,lg)=>{"use strict";lg.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var fg=p((z1,dg)=>{"use strict";var JA=Ks(),{MAX_LENGTH:ug,CHAR_BACKSLASH:ea,CHAR_BACKTICK:ZA,CHAR_COMMA:eT,CHAR_DOT:tT,CHAR_LEFT_PARENTHESES:rT,CHAR_RIGHT_PARENTHESES:sT,CHAR_LEFT_CURLY_BRACE:iT,CHAR_RIGHT_CURLY_BRACE:nT,CHAR_LEFT_SQUARE_BRACKET:hg,CHAR_RIGHT_SQUARE_BRACKET:pg,CHAR_DOUBLE_QUOTE:aT,CHAR_SINGLE_QUOTE:oT,CHAR_NO_BREAK_SPACE:lT,CHAR_ZERO_WIDTH_NOBREAK_SPACE:cT}=cg(),uT=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let r=e||{},s=typeof r.maxLength=="number"?Math.min(ug,r.maxLength):ug;if(t.length>s)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${s})`);let i={type:"root",input:t,nodes:[]},n=[i],a=i,o=i,l=0,c=t.length,u=0,h=0,d,y={},f=()=>t[u++],b=g=>{if(g.type==="text"&&o.type==="dot"&&(o.type="text"),o&&o.type==="text"&&g.type==="text"){o.value+=g.value;return}return a.nodes.push(g),g.parent=a,g.prev=o,o=g,g};for(b({type:"bos"});u<c;)if(a=n[n.length-1],d=f(),!(d===cT||d===lT)){if(d===ea){b({type:"text",value:(e.keepEscaping?d:"")+f()});continue}if(d===pg){b({type:"text",value:"\\"+d});continue}if(d===hg){l++;let g=!0,v;for(;u<c&&(v=f());){if(d+=v,v===hg){l++;continue}if(v===ea){d+=f();continue}if(v===pg&&(l--,l===0))break}b({type:"text",value:d});continue}if(d===rT){a=b({type:"paren",nodes:[]}),n.push(a),b({type:"text",value:d});continue}if(d===sT){if(a.type!=="paren"){b({type:"text",value:d});continue}a=n.pop(),b({type:"text",value:d}),a=n[n.length-1];continue}if(d===aT||d===oT||d===ZA){let g=d,v;for(e.keepQuotes!==!0&&(d="");u<c&&(v=f());){if(v===ea){d+=v+f();continue}if(v===g){e.keepQuotes===!0&&(d+=v);break}d+=v}b({type:"text",value:d});continue}if(d===iT){h++;let v={type:"brace",open:!0,close:!1,dollar:o.value&&o.value.slice(-1)==="$"||a.dollar===!0,depth:h,commas:0,ranges:0,nodes:[]};a=b(v),n.push(a),b({type:"open",value:d});continue}if(d===nT){if(a.type!=="brace"){b({type:"text",value:d});continue}let g="close";a=n.pop(),a.close=!0,b({type:g,value:d}),h--,a=n[n.length-1];continue}if(d===eT&&h>0){if(a.ranges>0){a.ranges=0;let g=a.nodes.shift();a.nodes=[g,{type:"text",value:JA(a)}]}b({type:"comma",value:d}),a.commas++;continue}if(d===tT&&h>0&&a.commas===0){let g=a.nodes;if(h===0||g.length===0){b({type:"text",value:d});continue}if(o.type==="dot"){if(a.range=[],o.value+=d,o.type="range",a.nodes.length!==3&&a.nodes.length!==5){a.invalid=!0,a.ranges=0,o.type="text";continue}a.ranges++,a.args=[];continue}if(o.type==="range"){g.pop();let v=g[g.length-1];v.value+=o.value+d,o=v,a.ranges--;continue}b({type:"dot",value:d});continue}b({type:"text",value:d})}do if(a=n.pop(),a.type!=="root"){a.nodes.forEach(x=>{x.nodes||(x.type==="open"&&(x.isOpen=!0),x.type==="close"&&(x.isClose=!0),x.nodes||(x.type="text"),x.invalid=!0)});let g=n[n.length-1],v=g.nodes.indexOf(a);g.nodes.splice(v,1,...a.nodes)}while(n.length>0);return b({type:"eos"}),i};dg.exports=uT});var yg=p((Q1,mg)=>{"use strict";var gg=Ks(),hT=ig(),pT=og(),dT=fg(),Ce=(t,e={})=>{let r=[];if(Array.isArray(t))for(let s of t){let i=Ce.create(s,e);Array.isArray(i)?r.push(...i):r.push(i)}else r=[].concat(Ce.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};Ce.parse=(t,e={})=>dT(t,e);Ce.stringify=(t,e={})=>gg(typeof t=="string"?Ce.parse(t,e):t,e);Ce.compile=(t,e={})=>(typeof t=="string"&&(t=Ce.parse(t,e)),hT(t,e));Ce.expand=(t,e={})=>{typeof t=="string"&&(t=Ce.parse(t,e));let r=pT(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r};Ce.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Ce.compile(t,e):Ce.expand(t,e);mg.exports=Ce});var Ur=p((X1,_g)=>{"use strict";var fT=m("path"),Fe="\\\\/",wg=`[^${Fe}]`,ze="\\.",gT="\\+",mT="\\?",zs="\\/",yT="(?=.)",bg="[^/]",ta=`(?:${zs}|$)`,vg=`(?:^|${zs})`,ra=`${ze}{1,2}${ta}`,wT=`(?!${ze})`,bT=`(?!${vg}${ra})`,vT=`(?!${ze}{0,1}${ta})`,xT=`(?!${ra})`,_T=`[^.${zs}]`,ET=`${bg}*?`,xg={DOT_LITERAL:ze,PLUS_LITERAL:gT,QMARK_LITERAL:mT,SLASH_LITERAL:zs,ONE_CHAR:yT,QMARK:bg,END_ANCHOR:ta,DOTS_SLASH:ra,NO_DOT:wT,NO_DOTS:bT,NO_DOT_SLASH:vT,NO_DOTS_SLASH:xT,QMARK_NO_DOT:_T,STAR:ET,START_ANCHOR:vg},kT={...xg,SLASH_LITERAL:`[${Fe}]`,QMARK:wg,STAR:`${wg}*?`,DOTS_SLASH:`${ze}{1,2}(?:[${Fe}]|$)`,NO_DOT:`(?!${ze})`,NO_DOTS:`(?!(?:^|[${Fe}])${ze}{1,2}(?:[${Fe}]|$))`,NO_DOT_SLASH:`(?!${ze}{0,1}(?:[${Fe}]|$))`,NO_DOTS_SLASH:`(?!${ze}{1,2}(?:[${Fe}]|$))`,QMARK_NO_DOT:`[^.${Fe}]`,START_ANCHOR:`(?:^|[${Fe}])`,END_ANCHOR:`(?:[${Fe}]|$)`},CT={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};_g.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:CT,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:fT.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?kT:xg}}});var Ir=p(be=>{"use strict";var RT=m("path"),ST=process.platform==="win32",{REGEX_BACKSLASH:AT,REGEX_REMOVE_BACKSLASH:TT,REGEX_SPECIAL_CHARS:OT,REGEX_SPECIAL_CHARS_GLOBAL:PT}=Ur();be.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);be.hasRegexChars=t=>OT.test(t);be.isRegexChar=t=>t.length===1&&be.hasRegexChars(t);be.escapeRegex=t=>t.replace(PT,"\\$1");be.toPosixSlashes=t=>t.replace(AT,"/");be.removeBackslashes=t=>t.replace(TT,e=>e==="\\"?"":e);be.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};be.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:ST===!0||RT.sep==="\\";be.escapeLast=(t,e,r)=>{let s=t.lastIndexOf(e,r);return s===-1?t:t[s-1]==="\\"?be.escapeLast(t,e,s-1):`${t.slice(0,s)}\\${t.slice(s)}`};be.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};be.wrapOutput=(t,e={},r={})=>{let s=r.contains?"":"^",i=r.contains?"":"$",n=`${s}(?:${t})${i}`;return e.negated===!0&&(n=`(?:^(?!${n}).*$)`),n}});var Og=p((Z1,Tg)=>{"use strict";var Eg=Ir(),{CHAR_ASTERISK:sa,CHAR_AT:qT,CHAR_BACKWARD_SLASH:Dr,CHAR_COMMA:UT,CHAR_DOT:ia,CHAR_EXCLAMATION_MARK:na,CHAR_FORWARD_SLASH:Ag,CHAR_LEFT_CURLY_BRACE:aa,CHAR_LEFT_PARENTHESES:oa,CHAR_LEFT_SQUARE_BRACKET:IT,CHAR_PLUS:DT,CHAR_QUESTION_MARK:kg,CHAR_RIGHT_CURLY_BRACE:NT,CHAR_RIGHT_PARENTHESES:Cg,CHAR_RIGHT_SQUARE_BRACKET:jT}=Ur(),Rg=t=>t===Ag||t===Dr,Sg=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},$T=(t,e)=>{let r=e||{},s=t.length-1,i=r.parts===!0||r.scanToEnd===!0,n=[],a=[],o=[],l=t,c=-1,u=0,h=0,d=!1,y=!1,f=!1,b=!1,g=!1,v=!1,x=!1,w=!1,C=!1,R=!1,P=0,q,A,I={value:"",depth:0,isGlob:!1},D=()=>c>=s,_=()=>l.charCodeAt(c+1),L=()=>(q=A,l.charCodeAt(++c));for(;c<s;){A=L();let ue;if(A===Dr){x=I.backslashes=!0,A=L(),A===aa&&(v=!0);continue}if(v===!0||A===aa){for(P++;D()!==!0&&(A=L());){if(A===Dr){x=I.backslashes=!0,L();continue}if(A===aa){P++;continue}if(v!==!0&&A===ia&&(A=L())===ia){if(d=I.isBrace=!0,f=I.isGlob=!0,R=!0,i===!0)continue;break}if(v!==!0&&A===UT){if(d=I.isBrace=!0,f=I.isGlob=!0,R=!0,i===!0)continue;break}if(A===NT&&(P--,P===0)){v=!1,d=I.isBrace=!0,R=!0;break}}if(i===!0)continue;break}if(A===Ag){if(n.push(c),a.push(I),I={value:"",depth:0,isGlob:!1},R===!0)continue;if(q===ia&&c===u+1){u+=2;continue}h=c+1;continue}if(r.noext!==!0&&(A===DT||A===qT||A===sa||A===kg||A===na)===!0&&_()===oa){if(f=I.isGlob=!0,b=I.isExtglob=!0,R=!0,A===na&&c===u&&(C=!0),i===!0){for(;D()!==!0&&(A=L());){if(A===Dr){x=I.backslashes=!0,A=L();continue}if(A===Cg){f=I.isGlob=!0,R=!0;break}}continue}break}if(A===sa){if(q===sa&&(g=I.isGlobstar=!0),f=I.isGlob=!0,R=!0,i===!0)continue;break}if(A===kg){if(f=I.isGlob=!0,R=!0,i===!0)continue;break}if(A===IT){for(;D()!==!0&&(ue=L());){if(ue===Dr){x=I.backslashes=!0,L();continue}if(ue===jT){y=I.isBracket=!0,f=I.isGlob=!0,R=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&A===na&&c===u){w=I.negated=!0,u++;continue}if(r.noparen!==!0&&A===oa){if(f=I.isGlob=!0,i===!0){for(;D()!==!0&&(A=L());){if(A===oa){x=I.backslashes=!0,A=L();continue}if(A===Cg){R=!0;break}}continue}break}if(f===!0){if(R=!0,i===!0)continue;break}}r.noext===!0&&(b=!1,f=!1);let H=l,ce="",E="";u>0&&(ce=l.slice(0,u),l=l.slice(u),h-=u),H&&f===!0&&h>0?(H=l.slice(0,h),E=l.slice(h)):f===!0?(H="",E=l):H=l,H&&H!==""&&H!=="/"&&H!==l&&Rg(H.charCodeAt(H.length-1))&&(H=H.slice(0,-1)),r.unescape===!0&&(E&&(E=Eg.removeBackslashes(E)),H&&x===!0&&(H=Eg.removeBackslashes(H)));let k={prefix:ce,input:t,start:u,base:H,glob:E,isBrace:d,isBracket:y,isGlob:f,isExtglob:b,isGlobstar:g,negated:w,negatedExtglob:C};if(r.tokens===!0&&(k.maxDepth=0,Rg(A)||a.push(I),k.tokens=a),r.parts===!0||r.tokens===!0){let ue;for(let F=0;F<n.length;F++){let Be=ue?ue+1:u,He=n[F],_e=t.slice(Be,He);r.tokens&&(F===0&&u!==0?(a[F].isPrefix=!0,a[F].value=ce):a[F].value=_e,Sg(a[F]),k.maxDepth+=a[F].depth),(F!==0||_e!=="")&&o.push(_e),ue=He}if(ue&&ue+1<t.length){let F=t.slice(ue+1);o.push(F),r.tokens&&(a[a.length-1].value=F,Sg(a[a.length-1]),k.maxDepth+=a[a.length-1].depth)}k.slashes=n,k.parts=o}return k};Tg.exports=$T});var Ug=p((eU,qg)=>{"use strict";var Qs=Ur(),Re=Ir(),{MAX_LENGTH:Xs,POSIX_REGEX_SOURCE:LT,REGEX_NON_SPECIAL_CHARS:MT,REGEX_SPECIAL_CHARS_BACKREF:BT,REPLACEMENTS:Pg}=Qs,HT=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(i=>Re.escapeRegex(i)).join("..")}return r},Gt=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,la=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=Pg[t]||t;let r={...e},s=typeof r.maxLength=="number"?Math.min(Xs,r.maxLength):Xs,i=t.length;if(i>s)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${s}`);let n={type:"bos",value:"",output:r.prepend||""},a=[n],o=r.capture?"":"?:",l=Re.isWindows(e),c=Qs.globChars(l),u=Qs.extglobChars(c),{DOT_LITERAL:h,PLUS_LITERAL:d,SLASH_LITERAL:y,ONE_CHAR:f,DOTS_SLASH:b,NO_DOT:g,NO_DOT_SLASH:v,NO_DOTS_SLASH:x,QMARK:w,QMARK_NO_DOT:C,STAR:R,START_ANCHOR:P}=c,q=O=>`(${o}(?:(?!${P}${O.dot?b:h}).)*?)`,A=r.dot?"":g,I=r.dot?w:C,D=r.bash===!0?q(r):R;r.capture&&(D=`(${D})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let _={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};t=Re.removePrefix(t,_),i=t.length;let L=[],H=[],ce=[],E=n,k,ue=()=>_.index===i-1,F=_.peek=(O=1)=>t[_.index+O],Be=_.advance=()=>t[++_.index]||"",He=()=>t.slice(_.index+1),_e=(O="",K=0)=>{_.consumed+=O,_.index+=K},gs=O=>{_.output+=O.output!=null?O.output:O.value,_e(O.value)},Gy=()=>{let O=1;for(;F()==="!"&&(F(2)!=="("||F(3)==="?");)Be(),_.start++,O++;return O%2===0?!1:(_.negated=!0,_.start++,!0)},ms=O=>{_[O]++,ce.push(O)},ht=O=>{_[O]--,ce.pop()},M=O=>{if(E.type==="globstar"){let K=_.braces>0&&(O.type==="comma"||O.type==="brace"),T=O.extglob===!0||L.length&&(O.type==="pipe"||O.type==="paren");O.type!=="slash"&&O.type!=="paren"&&!K&&!T&&(_.output=_.output.slice(0,-E.output.length),E.type="star",E.value="*",E.output=D,_.output+=E.output)}if(L.length&&O.type!=="paren"&&(L[L.length-1].inner+=O.value),(O.value||O.output)&&gs(O),E&&E.type==="text"&&O.type==="text"){E.value+=O.value,E.output=(E.output||"")+O.value;return}O.prev=E,a.push(O),E=O},ys=(O,K)=>{let T={...u[K],conditions:1,inner:""};T.prev=E,T.parens=_.parens,T.output=_.output;let $=(r.capture?"(":"")+T.open;ms("parens"),M({type:O,value:K,output:_.output?"":f}),M({type:"paren",extglob:!0,value:Be(),output:$}),L.push(T)},Wy=O=>{let K=O.close+(r.capture?")":""),T;if(O.type==="negate"){let $=D;if(O.inner&&O.inner.length>1&&O.inner.includes("/")&&($=q(r)),($!==D||ue()||/^\)+$/.test(He()))&&(K=O.close=`)$))${$}`),O.inner.includes("*")&&(T=He())&&/^\.[^\\/.]+$/.test(T)){let Q=la(T,{...e,fastpaths:!1}).output;K=O.close=`)${Q})${$})`}O.prev.type==="bos"&&(_.negatedExtglob=!0)}M({type:"paren",extglob:!0,value:k,output:K}),ht("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let O=!1,K=t.replace(BT,(T,$,Q,ye,ie,di)=>ye==="\\"?(O=!0,T):ye==="?"?$?$+ye+(ie?w.repeat(ie.length):""):di===0?I+(ie?w.repeat(ie.length):""):w.repeat(Q.length):ye==="."?h.repeat(Q.length):ye==="*"?$?$+ye+(ie?D:""):D:$?T:`\\${T}`);return O===!0&&(r.unescape===!0?K=K.replace(/\\/g,""):K=K.replace(/\\+/g,T=>T.length%2===0?"\\\\":T?"\\":"")),K===t&&r.contains===!0?(_.output=t,_):(_.output=Re.wrapOutput(K,_,e),_)}for(;!ue();){if(k=Be(),k==="\0")continue;if(k==="\\"){let T=F();if(T==="/"&&r.bash!==!0||T==="."||T===";")continue;if(!T){k+="\\",M({type:"text",value:k});continue}let $=/^\\+/.exec(He()),Q=0;if($&&$[0].length>2&&(Q=$[0].length,_.index+=Q,Q%2!==0&&(k+="\\")),r.unescape===!0?k=Be():k+=Be(),_.brackets===0){M({type:"text",value:k});continue}}if(_.brackets>0&&(k!=="]"||E.value==="["||E.value==="[^")){if(r.posix!==!1&&k===":"){let T=E.value.slice(1);if(T.includes("[")&&(E.posix=!0,T.includes(":"))){let $=E.value.lastIndexOf("["),Q=E.value.slice(0,$),ye=E.value.slice($+2),ie=LT[ye];if(ie){E.value=Q+ie,_.backtrack=!0,Be(),!n.output&&a.indexOf(E)===1&&(n.output=f);continue}}}(k==="["&&F()!==":"||k==="-"&&F()==="]")&&(k=`\\${k}`),k==="]"&&(E.value==="["||E.value==="[^")&&(k=`\\${k}`),r.posix===!0&&k==="!"&&E.value==="["&&(k="^"),E.value+=k,gs({value:k});continue}if(_.quotes===1&&k!=='"'){k=Re.escapeRegex(k),E.value+=k,gs({value:k});continue}if(k==='"'){_.quotes=_.quotes===1?0:1,r.keepQuotes===!0&&M({type:"text",value:k});continue}if(k==="("){ms("parens"),M({type:"paren",value:k});continue}if(k===")"){if(_.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Gt("opening","("));let T=L[L.length-1];if(T&&_.parens===T.parens+1){Wy(L.pop());continue}M({type:"paren",value:k,output:_.parens?")":"\\)"}),ht("parens");continue}if(k==="["){if(r.nobracket===!0||!He().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Gt("closing","]"));k=`\\${k}`}else ms("brackets");M({type:"bracket",value:k});continue}if(k==="]"){if(r.nobracket===!0||E&&E.type==="bracket"&&E.value.length===1){M({type:"text",value:k,output:`\\${k}`});continue}if(_.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Gt("opening","["));M({type:"text",value:k,output:`\\${k}`});continue}ht("brackets");let T=E.value.slice(1);if(E.posix!==!0&&T[0]==="^"&&!T.includes("/")&&(k=`/${k}`),E.value+=k,gs({value:k}),r.literalBrackets===!1||Re.hasRegexChars(T))continue;let $=Re.escapeRegex(E.value);if(_.output=_.output.slice(0,-E.value.length),r.literalBrackets===!0){_.output+=$,E.value=$;continue}E.value=`(${o}${$}|${E.value})`,_.output+=E.value;continue}if(k==="{"&&r.nobrace!==!0){ms("braces");let T={type:"brace",value:k,output:"(",outputIndex:_.output.length,tokensIndex:_.tokens.length};H.push(T),M(T);continue}if(k==="}"){let T=H[H.length-1];if(r.nobrace===!0||!T){M({type:"text",value:k,output:k});continue}let $=")";if(T.dots===!0){let Q=a.slice(),ye=[];for(let ie=Q.length-1;ie>=0&&(a.pop(),Q[ie].type!=="brace");ie--)Q[ie].type!=="dots"&&ye.unshift(Q[ie].value);$=HT(ye,r),_.backtrack=!0}if(T.comma!==!0&&T.dots!==!0){let Q=_.output.slice(0,T.outputIndex),ye=_.tokens.slice(T.tokensIndex);T.value=T.output="\\{",k=$="\\}",_.output=Q;for(let ie of ye)_.output+=ie.output||ie.value}M({type:"brace",value:k,output:$}),ht("braces"),H.pop();continue}if(k==="|"){L.length>0&&L[L.length-1].conditions++,M({type:"text",value:k});continue}if(k===","){let T=k,$=H[H.length-1];$&&ce[ce.length-1]==="braces"&&($.comma=!0,T="|"),M({type:"comma",value:k,output:T});continue}if(k==="/"){if(E.type==="dot"&&_.index===_.start+1){_.start=_.index+1,_.consumed="",_.output="",a.pop(),E=n;continue}M({type:"slash",value:k,output:y});continue}if(k==="."){if(_.braces>0&&E.type==="dot"){E.value==="."&&(E.output=h);let T=H[H.length-1];E.type="dots",E.output+=k,E.value+=k,T.dots=!0;continue}if(_.braces+_.parens===0&&E.type!=="bos"&&E.type!=="slash"){M({type:"text",value:k,output:h});continue}M({type:"dot",value:k,output:h});continue}if(k==="?"){if(!(E&&E.value==="(")&&r.noextglob!==!0&&F()==="("&&F(2)!=="?"){ys("qmark",k);continue}if(E&&E.type==="paren"){let $=F(),Q=k;if($==="<"&&!Re.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(E.value==="("&&!/[!=<:]/.test($)||$==="<"&&!/<([!=]|\w+>)/.test(He()))&&(Q=`\\${k}`),M({type:"text",value:k,output:Q});continue}if(r.dot!==!0&&(E.type==="slash"||E.type==="bos")){M({type:"qmark",value:k,output:C});continue}M({type:"qmark",value:k,output:w});continue}if(k==="!"){if(r.noextglob!==!0&&F()==="("&&(F(2)!=="?"||!/[!=<:]/.test(F(3)))){ys("negate",k);continue}if(r.nonegate!==!0&&_.index===0){Gy();continue}}if(k==="+"){if(r.noextglob!==!0&&F()==="("&&F(2)!=="?"){ys("plus",k);continue}if(E&&E.value==="("||r.regex===!1){M({type:"plus",value:k,output:d});continue}if(E&&(E.type==="bracket"||E.type==="paren"||E.type==="brace")||_.parens>0){M({type:"plus",value:k});continue}M({type:"plus",value:d});continue}if(k==="@"){if(r.noextglob!==!0&&F()==="("&&F(2)!=="?"){M({type:"at",extglob:!0,value:k,output:""});continue}M({type:"text",value:k});continue}if(k!=="*"){(k==="$"||k==="^")&&(k=`\\${k}`);let T=MT.exec(He());T&&(k+=T[0],_.index+=T[0].length),M({type:"text",value:k});continue}if(E&&(E.type==="globstar"||E.star===!0)){E.type="star",E.star=!0,E.value+=k,E.output=D,_.backtrack=!0,_.globstar=!0,_e(k);continue}let O=He();if(r.noextglob!==!0&&/^\([^?]/.test(O)){ys("star",k);continue}if(E.type==="star"){if(r.noglobstar===!0){_e(k);continue}let T=E.prev,$=T.prev,Q=T.type==="slash"||T.type==="bos",ye=$&&($.type==="star"||$.type==="globstar");if(r.bash===!0&&(!Q||O[0]&&O[0]!=="/")){M({type:"star",value:k,output:""});continue}let ie=_.braces>0&&(T.type==="comma"||T.type==="brace"),di=L.length&&(T.type==="pipe"||T.type==="paren");if(!Q&&T.type!=="paren"&&!ie&&!di){M({type:"star",value:k,output:""});continue}for(;O.slice(0,3)==="/**";){let ws=t[_.index+4];if(ws&&ws!=="/")break;O=O.slice(3),_e("/**",3)}if(T.type==="bos"&&ue()){E.type="globstar",E.value+=k,E.output=q(r),_.output=E.output,_.globstar=!0,_e(k);continue}if(T.type==="slash"&&T.prev.type!=="bos"&&!ye&&ue()){_.output=_.output.slice(0,-(T.output+E.output).length),T.output=`(?:${T.output}`,E.type="globstar",E.output=q(r)+(r.strictSlashes?")":"|$)"),E.value+=k,_.globstar=!0,_.output+=T.output+E.output,_e(k);continue}if(T.type==="slash"&&T.prev.type!=="bos"&&O[0]==="/"){let ws=O[1]!==void 0?"|$":"";_.output=_.output.slice(0,-(T.output+E.output).length),T.output=`(?:${T.output}`,E.type="globstar",E.output=`${q(r)}${y}|${y}${ws})`,E.value+=k,_.output+=T.output+E.output,_.globstar=!0,_e(k+Be()),M({type:"slash",value:"/",output:""});continue}if(T.type==="bos"&&O[0]==="/"){E.type="globstar",E.value+=k,E.output=`(?:^|${y}|${q(r)}${y})`,_.output=E.output,_.globstar=!0,_e(k+Be()),M({type:"slash",value:"/",output:""});continue}_.output=_.output.slice(0,-E.output.length),E.type="globstar",E.output=q(r),E.value+=k,_.output+=E.output,_.globstar=!0,_e(k);continue}let K={type:"star",value:k,output:D};if(r.bash===!0){K.output=".*?",(E.type==="bos"||E.type==="slash")&&(K.output=A+K.output),M(K);continue}if(E&&(E.type==="bracket"||E.type==="paren")&&r.regex===!0){K.output=k,M(K);continue}(_.index===_.start||E.type==="slash"||E.type==="dot")&&(E.type==="dot"?(_.output+=v,E.output+=v):r.dot===!0?(_.output+=x,E.output+=x):(_.output+=A,E.output+=A),F()!=="*"&&(_.output+=f,E.output+=f)),M(K)}for(;_.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Gt("closing","]"));_.output=Re.escapeLast(_.output,"["),ht("brackets")}for(;_.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Gt("closing",")"));_.output=Re.escapeLast(_.output,"("),ht("parens")}for(;_.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Gt("closing","}"));_.output=Re.escapeLast(_.output,"{"),ht("braces")}if(r.strictSlashes!==!0&&(E.type==="star"||E.type==="bracket")&&M({type:"maybe_slash",value:"",output:`${y}?`}),_.backtrack===!0){_.output="";for(let O of _.tokens)_.output+=O.output!=null?O.output:O.value,O.suffix&&(_.output+=O.suffix)}return _};la.fastpaths=(t,e)=>{let r={...e},s=typeof r.maxLength=="number"?Math.min(Xs,r.maxLength):Xs,i=t.length;if(i>s)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${s}`);t=Pg[t]||t;let n=Re.isWindows(e),{DOT_LITERAL:a,SLASH_LITERAL:o,ONE_CHAR:l,DOTS_SLASH:c,NO_DOT:u,NO_DOTS:h,NO_DOTS_SLASH:d,STAR:y,START_ANCHOR:f}=Qs.globChars(n),b=r.dot?h:u,g=r.dot?d:u,v=r.capture?"":"?:",x={negated:!1,prefix:""},w=r.bash===!0?".*?":y;r.capture&&(w=`(${w})`);let C=A=>A.noglobstar===!0?w:`(${v}(?:(?!${f}${A.dot?c:a}).)*?)`,R=A=>{switch(A){case"*":return`${b}${l}${w}`;case".*":return`${a}${l}${w}`;case"*.*":return`${b}${w}${a}${l}${w}`;case"*/*":return`${b}${w}${o}${l}${g}${w}`;case"**":return b+C(r);case"**/*":return`(?:${b}${C(r)}${o})?${g}${l}${w}`;case"**/*.*":return`(?:${b}${C(r)}${o})?${g}${w}${a}${l}${w}`;case"**/.*":return`(?:${b}${C(r)}${o})?${a}${l}${w}`;default:{let I=/^(.*?)\.(\w+)$/.exec(A);if(!I)return;let D=R(I[1]);return D?D+a+I[2]:void 0}}},P=Re.removePrefix(t,x),q=R(P);return q&&r.strictSlashes!==!0&&(q+=`${o}?`),q};qg.exports=la});var Dg=p((tU,Ig)=>{"use strict";var FT=m("path"),GT=Og(),ca=Ug(),ua=Ir(),WT=Ur(),YT=t=>t&&typeof t=="object"&&!Array.isArray(t),re=(t,e,r=!1)=>{if(Array.isArray(t)){let u=t.map(d=>re(d,e,r));return d=>{for(let y of u){let f=y(d);if(f)return f}return!1}}let s=YT(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},n=ua.isWindows(e),a=s?re.compileRe(t,e):re.makeRe(t,e,!1,!0),o=a.state;delete a.state;let l=()=>!1;if(i.ignore){let u={...e,ignore:null,onMatch:null,onResult:null};l=re(i.ignore,u,r)}let c=(u,h=!1)=>{let{isMatch:d,match:y,output:f}=re.test(u,a,e,{glob:t,posix:n}),b={glob:t,state:o,regex:a,posix:n,input:u,output:f,match:y,isMatch:d};return typeof i.onResult=="function"&&i.onResult(b),d===!1?(b.isMatch=!1,h?b:!1):l(u)?(typeof i.onIgnore=="function"&&i.onIgnore(b),b.isMatch=!1,h?b:!1):(typeof i.onMatch=="function"&&i.onMatch(b),h?b:!0)};return r&&(c.state=o),c};re.test=(t,e,r,{glob:s,posix:i}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let n=r||{},a=n.format||(i?ua.toPosixSlashes:null),o=t===s,l=o&&a?a(t):t;return o===!1&&(l=a?a(t):t,o=l===s),(o===!1||n.capture===!0)&&(n.matchBase===!0||n.basename===!0?o=re.matchBase(t,e,r,i):o=e.exec(l)),{isMatch:Boolean(o),match:o,output:l}};re.matchBase=(t,e,r,s=ua.isWindows(r))=>(e instanceof RegExp?e:re.makeRe(e,r)).test(FT.basename(t));re.isMatch=(t,e,r)=>re(e,r)(t);re.parse=(t,e)=>Array.isArray(t)?t.map(r=>re.parse(r,e)):ca(t,{...e,fastpaths:!1});re.scan=(t,e)=>GT(t,e);re.compileRe=(t,e,r=!1,s=!1)=>{if(r===!0)return t.output;let i=e||{},n=i.contains?"":"^",a=i.contains?"":"$",o=`${n}(?:${t.output})${a}`;t&&t.negated===!0&&(o=`^(?!${o}).*$`);let l=re.toRegex(o,e);return s===!0&&(l.state=t),l};re.makeRe=(t,e={},r=!1,s=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(i.output=ca.fastpaths(t,e)),i.output||(i=ca(t,e)),re.compileRe(i,e,r,s)};re.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};re.constants=WT;Ig.exports=re});var jg=p((rU,Ng)=>{"use strict";Ng.exports=Dg()});var Wt=p((sU,Bg)=>{"use strict";var Lg=m("util"),Mg=yg(),Ge=jg(),ha=Ir(),$g=t=>t===""||t==="./",z=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let s=new Set,i=new Set,n=new Set,a=0,o=u=>{n.add(u.output),r&&r.onResult&&r.onResult(u)};for(let u=0;u<e.length;u++){let h=Ge(String(e[u]),{...r,onResult:o},!0),d=h.state.negated||h.state.negatedExtglob;d&&a++;for(let y of t){let f=h(y,!0);!(d?!f.isMatch:f.isMatch)||(d?s.add(f.output):(s.delete(f.output),i.add(f.output)))}}let c=(a===e.length?[...n]:[...i]).filter(u=>!s.has(u));if(r&&c.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(u=>u.replace(/\\/g,"")):e}return c};z.match=z;z.matcher=(t,e)=>Ge(t,e);z.isMatch=(t,e,r)=>Ge(e,r)(t);z.any=z.isMatch;z.not=(t,e,r={})=>{e=[].concat(e).map(String);let s=new Set,i=[],n=o=>{r.onResult&&r.onResult(o),i.push(o.output)},a=new Set(z(t,e,{...r,onResult:n}));for(let o of i)a.has(o)||s.add(o);return[...s]};z.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Lg.inspect(t)}"`);if(Array.isArray(e))return e.some(s=>z.contains(t,s,r));if(typeof e=="string"){if($g(t)||$g(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return z.isMatch(t,e,{...r,contains:!0})};z.matchKeys=(t,e,r)=>{if(!ha.isObject(t))throw new TypeError("Expected the first argument to be an object");let s=z(Object.keys(t),e,r),i={};for(let n of s)i[n]=t[n];return i};z.some=(t,e,r)=>{let s=[].concat(t);for(let i of[].concat(e)){let n=Ge(String(i),r);if(s.some(a=>n(a)))return!0}return!1};z.every=(t,e,r)=>{let s=[].concat(t);for(let i of[].concat(e)){let n=Ge(String(i),r);if(!s.every(a=>n(a)))return!1}return!0};z.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Lg.inspect(t)}"`);return[].concat(e).every(s=>Ge(s,r)(t))};z.capture=(t,e,r)=>{let s=ha.isWindows(r),n=Ge.makeRe(String(t),{...r,capture:!0}).exec(s?ha.toPosixSlashes(e):e);if(n)return n.slice(1).map(a=>a===void 0?"":a)};z.makeRe=(...t)=>Ge.makeRe(...t);z.scan=(...t)=>Ge.scan(...t);z.parse=(t,e)=>{let r=[];for(let s of[].concat(t||[]))for(let i of Mg(String(s),e))r.push(Ge.parse(i,e));return r};z.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!/\{.*\}/.test(t)?[t]:Mg(t,e)};z.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return z.braces(t,{...e,expand:!0})};Bg.exports=z});var da=p(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.acceptedStrategies=_t.Strategy=void 0;_t.dedupe=QT;var KT=le(),xt=m("@yarnpkg/core"),Pe=m("@yarnpkg/core"),VT=KT.__importDefault(Wt()),pa;(function(t){t.HIGHEST="highest"})(pa||(_t.Strategy=pa={}));_t.acceptedStrategies=new Set(Object.values(pa));var zT={highest:async(t,e,{resolver:r,fetcher:s,resolveOptions:i,fetchOptions:n})=>{let a=new Map;for(let[l,c]of t.storedResolutions){let u=t.storedDescriptors.get(l);if(typeof u>"u")throw new Error(`Assertion failed: The descriptor (${l}) should have been registered`);xt.miscUtils.getSetWithDefault(a,u.identHash).add(c)}let o=new Map(xt.miscUtils.mapAndFilter(t.storedDescriptors.values(),l=>Pe.structUtils.isVirtualDescriptor(l)?xt.miscUtils.mapAndFilter.skip:[l.descriptorHash,xt.miscUtils.makeDeferred()]));for(let l of t.storedDescriptors.values()){let c=o.get(l.descriptorHash);if(typeof c>"u")throw new Error(`Assertion failed: The descriptor (${l.descriptorHash}) should have been registered`);let u=t.storedResolutions.get(l.descriptorHash);if(typeof u>"u")throw new Error(`Assertion failed: The resolution (${l.descriptorHash}) should have been registered`);let h=t.originalPackages.get(u);if(typeof h>"u")throw new Error(`Assertion failed: The package (${u}) should have been registered`);Promise.resolve().then(async()=>{let d=r.getResolutionDependencies(l,i),y=Object.fromEntries(await xt.miscUtils.allSettledSafe(Object.entries(d).map(async([w,C])=>{let R=o.get(C.descriptorHash);if(typeof R>"u")throw new Error(`Assertion failed: The descriptor (${C.descriptorHash}) should have been registered`);let P=await R.promise;if(!P)throw new Error("Assertion failed: Expected the dependency to have been through the dedupe process itself");return[w,P.updatedPackage]})));if(e.length&&!VT.default.isMatch(Pe.structUtils.stringifyIdent(l),e)||!r.shouldPersistResolution(h,i))return h;let f=a.get(l.identHash);if(typeof f>"u")throw new Error(`Assertion failed: The resolutions (${l.identHash}) should have been registered`);if(f.size===1)return h;let b=[...f].map(w=>{let C=t.originalPackages.get(w);if(typeof C>"u")throw new Error(`Assertion failed: The package (${w}) should have been registered`);return C}),g=await r.getSatisfying(l,y,b,i),v=g.locators?.[0];if(typeof v>"u"||!g.sorted)return h;let x=t.originalPackages.get(v.locatorHash);if(typeof x>"u")throw new Error(`Assertion failed: The package (${v.locatorHash}) should have been registered`);return x}).then(async d=>{let y=await t.preparePackage(d,{resolver:r,resolveOptions:i});c.resolve({descriptor:l,currentPackage:h,updatedPackage:d,resolvedPackage:y})}).catch(d=>{c.reject(d)})}return[...o.values()].map(l=>l.promise)}};async function QT(t,{strategy:e,patterns:r,cache:s,report:i}){let{configuration:n}=t,a=new xt.ThrowReport,o=n.makeResolver(),l=n.makeFetcher(),c={cache:s,checksums:t.storedChecksums,fetcher:l,project:t,report:a,cacheOptions:{skipIntegrityCheck:!0}},u={project:t,resolver:o,report:a,fetchOptions:c};return await i.startTimerPromise("Deduplication step",async()=>{let h=zT[e],d=await h(t,r,{resolver:o,resolveOptions:u,fetcher:l,fetchOptions:c}),y=xt.Report.progressViaCounter(d.length);await i.reportProgress(y);let f=0;await Promise.all(d.map(v=>v.then(x=>{if(x===null||x.currentPackage.locatorHash===x.updatedPackage.locatorHash)return;f++;let{descriptor:w,currentPackage:C,updatedPackage:R}=x;i.reportInfo(Pe.MessageName.UNNAMED,`${Pe.structUtils.prettyDescriptor(n,w)} can be deduped from ${Pe.structUtils.prettyLocator(n,C)} to ${Pe.structUtils.prettyLocator(n,R)}`),i.reportJson({descriptor:Pe.structUtils.stringifyDescriptor(w),currentResolution:Pe.structUtils.stringifyLocator(C),updatedResolution:Pe.structUtils.stringifyLocator(R)}),t.storedResolutions.set(w.descriptorHash,R.locatorHash)}).finally(()=>y.tick())));let b;switch(f){case 0:b="No packages";break;case 1:b="One package";break;default:b=`${f} packages`}let g=Pe.formatUtils.pretty(n,e,Pe.formatUtils.Type.CODE);return i.reportInfo(Pe.MessageName.UNNAMED,`${b} can be deduped using the ${g} strategy`),f})}});var Gg=p(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});var Fg=le(),XT=m("@yarnpkg/cli"),Nr=m("@yarnpkg/core"),Yt=m("clipanion"),Hg=Fg.__importStar(m("typanion")),fa=Fg.__importStar(da()),jr=class extends XT.BaseCommand{constructor(){super(...arguments),this.strategy=Yt.Option.String("-s,--strategy",fa.Strategy.HIGHEST,{description:"The strategy to use when deduping dependencies",validator:Hg.isEnum(fa.Strategy)}),this.check=Yt.Option.Boolean("-c,--check",!1,{description:"Exit with exit code 1 when duplicates are found, without persisting the dependency tree"}),this.json=Yt.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"}),this.mode=Yt.Option.String("--mode",{description:"Change what artifacts installs generate",validator:Hg.isEnum(Nr.InstallMode)}),this.patterns=Yt.Option.Rest()}async execute(){let e=await Nr.Configuration.find(this.context.cwd,this.context.plugins),{project:r}=await Nr.Project.find(e,this.context.cwd),s=await Nr.Cache.find(e);await r.restoreInstallState({restoreResolutions:!1});let i=0,n=await Nr.StreamReport.start({configuration:e,includeFooter:!1,stdout:this.context.stdout,json:this.json},async a=>{i=await fa.dedupe(r,{strategy:this.strategy,patterns:this.patterns,cache:s,report:a})});return n.hasErrors()?n.exitCode():this.check?i?1:0:await r.installWithNewReport({json:this.json,stdout:this.context.stdout},{cache:s,mode:this.mode})}};jr.paths=[["dedupe"]];jr.usage=Yt.Command.Usage({description:"deduplicate dependencies with overlapping ranges",details:"\n      Duplicates are defined as descriptors with overlapping ranges being resolved and locked to different locators. They are a natural consequence of Yarn's deterministic installs, but they can sometimes pile up and unnecessarily increase the size of your project.\n\n      This command dedupes dependencies in the current project using different strategies (only one is implemented at the moment):\n\n      - `highest`: Reuses (where possible) the locators with the highest versions. This means that dependencies can only be upgraded, never downgraded. It's also guaranteed that it never takes more than a single pass to dedupe the entire dependency tree.\n\n      **Note:** Even though it never produces a wrong dependency tree, this command should be used with caution, as it modifies the dependency tree, which can sometimes cause problems when packages don't strictly follow semver recommendations. Because of this, it is recommended to also review the changes manually.\n\n      If set, the `-c,--check` flag will only report the found duplicates, without persisting the modified dependency tree. If changes are found, the command will exit with a non-zero exit code, making it suitable for CI purposes.\n\n      If the `--mode=<mode>` option is set, Yarn will change which artifacts are generated. The modes currently supported are:\n\n      - `skip-build` will not run the build scripts at all. Note that this is different from setting `enableScripts` to false because the latter will disable build scripts, and thus affect the content of the artifacts generated on disk, whereas the former will just disable the build step - but not the scripts themselves, which just won't run.\n\n      - `update-lockfile` will skip the link step altogether, and only fetch packages that are missing from the lockfile (or that have no associated checksums). This mode is typically used by tools like Renovate or Dependabot to keep a lockfile up-to-date without incurring the full install cost.\n\n      This command accepts glob patterns as arguments (if valid Idents and supported by [micromatch](https://github.com/micromatch/micromatch)). Make sure to escape the patterns, to prevent your own shell from trying to expand them.\n\n      ### In-depth explanation:\n\n      Yarn doesn't deduplicate dependencies by default, otherwise installs wouldn't be deterministic and the lockfile would be useless. What it actually does is that it tries to not duplicate dependencies in the first place.\n\n      **Example:** If `foo@^2.3.4` (a dependency of a dependency) has already been resolved to `foo@2.3.4`, running `yarn add foo@*`will cause Yarn to reuse `foo@2.3.4`, even if the latest `foo` is actually `foo@2.10.14`, thus preventing unnecessary duplication.\n\n      Duplication happens when Yarn can't unlock dependencies that have already been locked inside the lockfile.\n\n      **Example:** If `foo@^2.3.4` (a dependency of a dependency) has already been resolved to `foo@2.3.4`, running `yarn add foo@2.10.14` will cause Yarn to install `foo@2.10.14` because the existing resolution doesn't satisfy the range `2.10.14`. This behavior can lead to (sometimes) unwanted duplication, since now the lockfile contains 2 separate resolutions for the 2 `foo` descriptors, even though they have overlapping ranges, which means that the lockfile can be simplified so that both descriptors resolve to `foo@2.10.14`.\n    ",examples:[["Dedupe all packages","$0 dedupe"],["Dedupe all packages using a specific strategy","$0 dedupe --strategy highest"],["Dedupe a specific package","$0 dedupe lodash"],["Dedupe all packages with the `@babel/*` scope","$0 dedupe '@babel/*'"],["Check for duplicates (can be used as a CI step)","$0 dedupe --check"]]});ga.default=jr});var Wg=p((aU,JT)=>{JT.exports={name:"@yarnpkg/cli",version:"4.2.2",license:"BSD-2-Clause",main:"./lib/index.js",exports:{".":"./lib/index.js","./package.json":"./package.json"},dependencies:{"@yarnpkg/core":"^4.0.5","@yarnpkg/fslib":"^3.1.0","@yarnpkg/libzip":"^3.1.0","@yarnpkg/parsers":"^3.0.2","@yarnpkg/plugin-compat":"^4.0.5","@yarnpkg/plugin-constraints":"^4.0.2","@yarnpkg/plugin-dlx":"^4.0.0","@yarnpkg/plugin-essentials":"^4.1.2","@yarnpkg/plugin-exec":"^3.0.0","@yarnpkg/plugin-file":"^3.0.0","@yarnpkg/plugin-git":"^3.0.0","@yarnpkg/plugin-github":"^3.0.0","@yarnpkg/plugin-http":"^3.0.1","@yarnpkg/plugin-init":"^4.0.1","@yarnpkg/plugin-interactive-tools":"^4.0.0","@yarnpkg/plugin-link":"^3.0.0","@yarnpkg/plugin-nm":"^4.0.2","@yarnpkg/plugin-npm":"^3.0.1","@yarnpkg/plugin-npm-cli":"^4.0.4","@yarnpkg/plugin-pack":"^4.0.0","@yarnpkg/plugin-patch":"^4.0.1","@yarnpkg/plugin-pnp":"^4.0.5","@yarnpkg/plugin-pnpm":"^2.0.0","@yarnpkg/plugin-stage":"^4.0.0","@yarnpkg/plugin-typescript":"^4.1.1","@yarnpkg/plugin-version":"^4.0.3","@yarnpkg/plugin-workspace-tools":"^4.1.0","@yarnpkg/shell":"^4.0.2","ci-info":"^3.2.0",clipanion:"^4.0.0-rc.2",semver:"^7.1.2",tslib:"^2.4.0",typanion:"^3.14.0"},devDependencies:{"@types/semver":"^7.1.0","@yarnpkg/builder":"^4.1.1","@yarnpkg/monorepo":"^0.0.0","@yarnpkg/pnpify":"^4.1.0"},peerDependencies:{"@yarnpkg/core":"^4.0.5"},scripts:{postpack:"rm -rf lib",prepack:'run build:compile "$(pwd)"',"build:cli+hook":"run build:pnp:hook && builder build bundle","build:cli":"builder build bundle","run:cli":"builder run","update-local":"run build:cli --no-git-hash && rsync -a --delete bundles/ bin/"},publishConfig:{main:"./lib/index.js",bin:null,exports:{".":"./lib/index.js","./package.json":"./package.json"}},files:["/lib/**/*","!/lib/pluginConfiguration.*","!/lib/cli.*"],"@yarnpkg/builder":{bundles:{standard:["@yarnpkg/plugin-essentials","@yarnpkg/plugin-compat","@yarnpkg/plugin-constraints","@yarnpkg/plugin-dlx","@yarnpkg/plugin-exec","@yarnpkg/plugin-file","@yarnpkg/plugin-git","@yarnpkg/plugin-github","@yarnpkg/plugin-http","@yarnpkg/plugin-init","@yarnpkg/plugin-interactive-tools","@yarnpkg/plugin-link","@yarnpkg/plugin-nm","@yarnpkg/plugin-npm","@yarnpkg/plugin-npm-cli","@yarnpkg/plugin-pack","@yarnpkg/plugin-patch","@yarnpkg/plugin-pnp","@yarnpkg/plugin-pnpm","@yarnpkg/plugin-stage","@yarnpkg/plugin-typescript","@yarnpkg/plugin-version","@yarnpkg/plugin-workspace-tools"]}},repository:{type:"git",url:"ssh://git@github.com/yarnpkg/berry.git",directory:"packages/yarnpkg-cli"},engines:{node:">=18.12.0"}}});var Yg=p(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});var ZT=m("@yarnpkg/cli"),e0=m("@yarnpkg/core"),t0=m("clipanion"),Js=class extends ZT.BaseCommand{async execute(){let{plugins:e}=await e0.Configuration.find(this.context.cwd,this.context.plugins),r=[];for(let a of e){let{commands:o}=a[1];if(o){let c=t0.Cli.from(o).definitions();r.push([a[0],c])}}let s=this.cli.definitions(),i=(a,o)=>a.split(" ").slice(1).join()===o.split(" ").slice(1).join(),n=Wg()["@yarnpkg/builder"].bundles.standard;for(let a of r){let o=a[1];for(let l of o)s.find(c=>i(c.path,l.path)).plugin={name:a[0],isDefault:n.includes(a[0])}}this.context.stdout.write(`${JSON.stringify(s,null,2)}
`)}};Js.paths=[["--clipanion=definitions"]];ma.default=Js});var Kg=p(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});var r0=m("@yarnpkg/cli"),Zs=class extends r0.BaseCommand{async execute(){this.context.stdout.write(this.cli.usage(null))}};Zs.paths=[["help"],["--help"],["-h"]];ya.default=Zs});var Qg=p(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});var s0=m("@yarnpkg/cli"),i0=m("@yarnpkg/core"),Vg=m("@yarnpkg/fslib"),zg=m("clipanion"),wa=class extends s0.BaseCommand{constructor(){super(...arguments),this.leadingArgument=zg.Option.String(),this.args=zg.Option.Proxy()}async execute(){if(this.leadingArgument.match(/[\\/]/)&&!i0.structUtils.tryParseIdent(this.leadingArgument)){let e=Vg.ppath.resolve(this.context.cwd,Vg.npath.toPortablePath(this.leadingArgument));return await this.cli.run(this.args,{cwd:e})}else return await this.cli.run(["run",this.leadingArgument,...this.args])}};ba.default=wa});var Xg=p(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});var n0=m("@yarnpkg/cli"),a0=m("@yarnpkg/core"),ei=class extends n0.BaseCommand{async execute(){this.context.stdout.write(`${a0.YarnVersion||"<unknown>"}
`)}};ei.paths=[["-v"],["--version"]];va.default=ei});var Zg=p(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});var o0=m("@yarnpkg/cli"),Jg=m("@yarnpkg/core"),l0=m("@yarnpkg/core"),xa=m("clipanion"),$r=class extends o0.BaseCommand{constructor(){super(...arguments),this.commandName=xa.Option.String(),this.args=xa.Option.Proxy()}async execute(){let e=await Jg.Configuration.find(this.context.cwd,this.context.plugins),{project:r,locator:s}=await Jg.Project.find(e,this.context.cwd);return await r.restoreInstallState(),await l0.scriptUtils.executePackageShellcode(s,this.commandName,this.args,{cwd:this.context.cwd,stdin:this.context.stdin,stdout:this.context.stdout,stderr:this.context.stderr,project:r})}};$r.paths=[["exec"]];$r.usage=xa.Command.Usage({description:"execute a shell script",details:`
      This command simply executes a shell script within the context of the root directory of the active workspace using the portable shell.

      It also makes sure to call it in a way that's compatible with the current project (for example, on PnP projects the environment will be setup in such a way that PnP will be correctly injected into the environment).
    `,examples:[["Execute a single shell command","$0 exec echo Hello World"],["Execute a shell script",'$0 exec "tsc & babel src --out-dir lib"']]});_a.default=$r});var rm=p(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.explainPeerRequirements=tm;var c0=le(),u0=m("@yarnpkg/cli"),G=m("@yarnpkg/core"),em=m("clipanion"),Ea=c0.__importStar(m("typanion")),Lr=class extends u0.BaseCommand{constructor(){super(...arguments),this.hash=em.Option.String({validator:Ea.cascade(Ea.isString(),[Ea.matchesRegExp(/^p[0-9a-f]{5}$/)])})}async execute(){let e=await G.Configuration.find(this.context.cwd,this.context.plugins),{project:r}=await G.Project.find(e,this.context.cwd);return await r.restoreInstallState({restoreResolutions:!1}),await r.applyLightResolution(),await tm(this.hash,r,{stdout:this.context.stdout})}};Lr.paths=[["explain","peer-requirements"]];Lr.usage=em.Command.Usage({description:"explain a set of peer requirements",details:`
      A set of peer requirements represents all peer requirements that a dependent must satisfy when providing a given peer request to a requester and its descendants.

      When the hash argument is specified, this command prints a detailed explanation of all requirements of the set corresponding to the hash and whether they're satisfied or not.

      When used without arguments, this command lists all sets of peer requirements and the corresponding hash that can be used to get detailed information about a given set.

      **Note:** A hash is a six-letter p-prefixed code that can be obtained from peer dependency warnings or from the list of all peer requirements (\`yarn explain peer-requirements\`).
    `,examples:[["Explain the corresponding set of peer requirements for a hash","$0 explain peer-requirements p1a4ed"],["List all sets of peer requirements","$0 explain peer-requirements"]]});ti.default=Lr;async function tm(t,e,r){let s=e.peerWarnings.find(n=>n.hash===t);if(typeof s>"u")throw new Error(`No peerDependency requirements found for hash: "${t}"`);return(await G.StreamReport.start({configuration:e.configuration,stdout:r.stdout,includeFooter:!1,includePrefix:!1},async n=>{let a=G.formatUtils.mark(e.configuration);switch(s.type){case G.PeerWarningType.NotCompatibleAggregate:{n.reportInfo(G.MessageName.UNNAMED,`We have a problem with ${G.formatUtils.pretty(e.configuration,s.requested,G.formatUtils.Type.IDENT)}, which is provided with version ${G.structUtils.prettyReference(e.configuration,s.version)}.`),n.reportInfo(G.MessageName.UNNAMED,"It is needed by the following direct dependencies of workspaces in your project:"),n.reportSeparator();for(let c of s.requesters.values()){let u=e.storedPackages.get(c.locatorHash);if(!u)throw new Error("Assertion failed: Expected the package to be registered");let h=u?.peerDependencies.get(s.requested.identHash);if(!h)throw new Error("Assertion failed: Expected the package to list the peer dependency");let d=G.semverUtils.satisfiesWithPrereleases(s.version,h.range)?a.Check:a.Cross;n.reportInfo(null,`  ${d} ${G.structUtils.prettyLocator(e.configuration,c)} (via ${G.structUtils.prettyRange(e.configuration,h.range)})`)}let o=[...s.links.values()].filter(c=>!s.requesters.has(c.locatorHash));if(o.length>0){n.reportSeparator(),n.reportInfo(G.MessageName.UNNAMED,`However, those packages themselves have more dependencies listing ${G.structUtils.prettyIdent(e.configuration,s.requested)} as peer dependency:`),n.reportSeparator();for(let c of o){let u=e.storedPackages.get(c.locatorHash);if(!u)throw new Error("Assertion failed: Expected the package to be registered");let h=u?.peerDependencies.get(s.requested.identHash);if(!h)throw new Error("Assertion failed: Expected the package to list the peer dependency");let d=G.semverUtils.satisfiesWithPrereleases(s.version,h.range)?a.Check:a.Cross;n.reportInfo(null,`  ${d} ${G.structUtils.prettyLocator(e.configuration,c)} (via ${G.structUtils.prettyRange(e.configuration,h.range)})`)}}let l=Array.from(s.links.values(),c=>{let u=e.storedPackages.get(c.locatorHash);if(typeof u>"u")throw new Error("Assertion failed: Expected the package to be registered");let h=u.peerDependencies.get(s.requested.identHash);if(typeof h>"u")throw new Error("Assertion failed: Expected the ident to be registered");return h.range});if(l.length>1){let c=G.semverUtils.simplifyRanges(l);n.reportSeparator(),c===null?(n.reportInfo(G.MessageName.UNNAMED,"Unfortunately, put together, we found no single range that can satisfy all those peer requirements."),n.reportInfo(G.MessageName.UNNAMED,`Your best option may be to try to upgrade some dependencies with ${G.formatUtils.pretty(e.configuration,"yarn up",G.formatUtils.Type.CODE)}, or silence the warning via ${G.formatUtils.pretty(e.configuration,"logFilters",G.formatUtils.Type.CODE)}.`)):n.reportInfo(G.MessageName.UNNAMED,`Put together, the final range we computed is ${G.formatUtils.pretty(e.configuration,c,G.formatUtils.Type.RANGE)}`)}}break;default:n.reportInfo(G.MessageName.UNNAMED,`The ${G.formatUtils.pretty(e.configuration,"yarn explain peer-requirements",G.formatUtils.Type.CODE)} command doesn't support this warning type yet.`);break}})).exitCode()}});var si=p(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.resolveRange=sm;Kt.resolveTag=ri;Kt.setVersion=im;var h0=le(),p0=m("@yarnpkg/cli"),me=m("@yarnpkg/core"),ee=m("@yarnpkg/core"),Z=m("@yarnpkg/fslib"),ct=m("clipanion"),d0=h0.__importDefault(m("semver")),Mr=class extends p0.BaseCommand{constructor(){super(...arguments),this.useYarnPath=ct.Option.Boolean("--yarn-path",{description:"Set the yarnPath setting even if the version can be accessed by Corepack"}),this.onlyIfNeeded=ct.Option.Boolean("--only-if-needed",!1,{description:"Only lock the Yarn version if it isn't already locked"}),this.version=ct.Option.String()}async execute(){let e=await me.Configuration.find(this.context.cwd,this.context.plugins);if(this.onlyIfNeeded&&e.get("yarnPath")){let a=e.sources.get("yarnPath");if(!a)throw new Error("Assertion failed: Expected 'yarnPath' to have a source");let o=e.projectCwd??e.startingCwd;if(Z.ppath.contains(o,a))return 0}let r=()=>{if(typeof me.YarnVersion>"u")throw new ct.UsageError("The --install flag can only be used without explicit version specifier from the Yarn CLI");return`file://${process.argv[1]}`},s,i=(a,o)=>({version:o,url:a.replace(/\{\}/g,o)});if(this.version==="self")s={url:r(),version:me.YarnVersion??"self"};else if(this.version==="latest"||this.version==="berry"||this.version==="stable")s=i("https://repo.yarnpkg.com/{}/packages/yarnpkg-cli/bin/yarn.js",await ri(e,"stable"));else if(this.version==="canary")s=i("https://repo.yarnpkg.com/{}/packages/yarnpkg-cli/bin/yarn.js",await ri(e,"canary"));else if(this.version==="classic")s={url:"https://classic.yarnpkg.com/latest.js",version:"classic"};else if(this.version.match(/^https?:/))s={url:this.version,version:"remote"};else if(this.version.match(/^\.{0,2}[\\/]/)||Z.npath.isAbsolute(this.version))s={url:`file://${Z.ppath.resolve(Z.npath.toPortablePath(this.version))}`,version:"file"};else if(ee.semverUtils.satisfiesWithPrereleases(this.version,">=2.0.0"))s=i("https://repo.yarnpkg.com/{}/packages/yarnpkg-cli/bin/yarn.js",this.version);else if(ee.semverUtils.satisfiesWithPrereleases(this.version,"^0.x || ^1.x"))s=i("https://github.com/yarnpkg/yarn/releases/download/v{}/yarn-{}.js",this.version);else if(ee.semverUtils.validRange(this.version))s=i("https://repo.yarnpkg.com/{}/packages/yarnpkg-cli/bin/yarn.js",await sm(e,this.version));else throw new ct.UsageError(`Invalid version descriptor "${this.version}"`);return(await me.StreamReport.start({configuration:e,stdout:this.context.stdout,includeLogs:!this.context.quiet},async a=>{let o=async()=>{let l="file://";return s.url.startsWith(l)?(a.reportInfo(me.MessageName.UNNAMED,`Retrieving ${ee.formatUtils.pretty(e,s.url,ee.formatUtils.Type.PATH)}`),await Z.xfs.readFilePromise(s.url.slice(l.length))):(a.reportInfo(me.MessageName.UNNAMED,`Downloading ${ee.formatUtils.pretty(e,s.url,ee.formatUtils.Type.URL)}`),await ee.httpUtils.get(s.url,{configuration:e}))};await im(e,s.version,o,{report:a,useYarnPath:this.useYarnPath})})).exitCode()}};Mr.paths=[["set","version"]];Mr.usage=ct.Command.Usage({description:"lock the Yarn version used by the project",details:"\n      This command will set a specific release of Yarn to be used by Corepack: https://nodejs.org/api/corepack.html.\n\n      By default it only will set the `packageManager` field at the root of your project, but if the referenced release cannot be represented this way, if you already have `yarnPath` configured, or if you set the `--yarn-path` command line flag, then the release will also be downloaded from the Yarn GitHub repository, stored inside your project, and referenced via the `yarnPath` settings from your project `.yarnrc.yml` file.\n\n      A very good use case for this command is to enforce the version of Yarn used by any single member of your team inside the same project - by doing this you ensure that you have control over Yarn upgrades and downgrades (including on your deployment servers), and get rid of most of the headaches related to someone using a slightly different version and getting different behavior.\n\n      The version specifier can be:\n\n      - a tag:\n        - `latest` / `berry` / `stable` -> the most recent stable berry (`>=2.0.0`) release\n        - `canary` -> the most recent canary (release candidate) berry (`>=2.0.0`) release\n        - `classic` -> the most recent classic (`^0.x || ^1.x`) release\n\n      - a semver range (e.g. `2.x`) -> the most recent version satisfying the range (limited to berry releases)\n\n      - a semver version (e.g. `2.4.1`, `1.22.1`)\n\n      - a local file referenced through either a relative or absolute path\n\n      - `self` -> the version used to invoke the command\n    ",examples:[["Download the latest release from the Yarn repository","$0 set version latest"],["Download the latest canary release from the Yarn repository","$0 set version canary"],["Download the latest classic release from the Yarn repository","$0 set version classic"],["Download the most recent Yarn 3 build","$0 set version 3.x"],["Download a specific Yarn 2 build","$0 set version 2.0.0-rc.30"],["Switch back to a specific Yarn 1 release","$0 set version 1.22.1"],["Use a release from the local filesystem","$0 set version ./yarn.cjs"],["Use a release from a URL","$0 set version https://repo.yarnpkg.com/3.1.0/packages/yarnpkg-cli/bin/yarn.js"],["Download the version used to invoke the command","$0 set version self"]]});Kt.default=Mr;async function sm(t,e){let s=(await ee.httpUtils.get("https://repo.yarnpkg.com/tags",{configuration:t,jsonResponse:!0})).tags.filter(i=>ee.semverUtils.satisfiesWithPrereleases(i,e));if(s.length===0)throw new ct.UsageError(`No matching release found for range ${ee.formatUtils.pretty(t,e,ee.formatUtils.Type.RANGE)}.`);return s[0]}async function ri(t,e){let r=await ee.httpUtils.get("https://repo.yarnpkg.com/tags",{configuration:t,jsonResponse:!0});if(!r.latest[e])throw new ct.UsageError(`Tag ${ee.formatUtils.pretty(t,e,ee.formatUtils.Type.RANGE)} not found`);return r.latest[e]}async function im(t,e,r,{report:s,useYarnPath:i}){let n,a=async()=>(typeof n>"u"&&(n=await r()),n);if(e===null){let w=await a();await Z.xfs.mktempPromise(async C=>{let R=Z.ppath.join(C,"yarn.cjs");await Z.xfs.writeFilePromise(R,w);let{stdout:P}=await ee.execUtils.execvp(process.execPath,[Z.npath.fromPortablePath(R),"--version"],{cwd:C,env:{...t.env,YARN_IGNORE_PATH:"1"}});if(e=P.trim(),!d0.default.valid(e))throw new Error(`Invalid semver version. ${ee.formatUtils.pretty(t,"yarn --version",ee.formatUtils.Type.CODE)} returned:
${e}`)})}let o=t.projectCwd??t.startingCwd,l=Z.ppath.resolve(o,".yarn/releases"),c=Z.ppath.resolve(l,`yarn-${e}.cjs`),u=Z.ppath.relative(t.startingCwd,c),h=ee.miscUtils.isTaggedYarnVersion(e),d=t.get("yarnPath"),y=!h,f=y||!!d||!!i;if(i===!1){if(y)throw new me.ReportError(me.MessageName.UNNAMED,"You explicitly opted out of yarnPath usage in your command line, but the version you specified cannot be represented by Corepack");f=!1}else!f&&!process.env.COREPACK_ROOT&&(s.reportWarning(me.MessageName.UNNAMED,`You don't seem to have ${ee.formatUtils.applyHyperlink(t,"Corepack","https://nodejs.org/api/corepack.html")} enabled; we'll have to rely on ${ee.formatUtils.applyHyperlink(t,"yarnPath","https://yarnpkg.com/configuration/yarnrc#yarnPath")} instead`),f=!0);if(f){let w=await a();s.reportInfo(me.MessageName.UNNAMED,`Saving the new release in ${ee.formatUtils.pretty(t,u,"magenta")}`),await Z.xfs.removePromise(Z.ppath.dirname(c)),await Z.xfs.mkdirPromise(Z.ppath.dirname(c),{recursive:!0}),await Z.xfs.writeFilePromise(c,w,{mode:493}),await me.Configuration.updateConfiguration(o,{yarnPath:Z.ppath.relative(o,c)})}else await Z.xfs.removePromise(Z.ppath.dirname(c)),await me.Configuration.updateConfiguration(o,{yarnPath:me.Configuration.deleteProperty});let b=await me.Manifest.tryFind(o)||new me.Manifest;b.packageManager=`yarn@${h?e:await ri(t,"stable")}`;let g={};b.exportTo(g);let v=Z.ppath.join(o,me.Manifest.fileName),x=`${JSON.stringify(g,null,b.indent)}
`;return await Z.xfs.changeFilePromise(v,x,{automaticNewlines:!0}),{bundleVersion:e}}});var om=p(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.getErrorCodeDetails=am;var f0=le(),g0=m("@yarnpkg/cli"),te=m("@yarnpkg/core"),Ca=m("clipanion"),ka=f0.__importStar(m("typanion")),m0=si();function nm(t){return te.MessageName[(0,te.parseMessageName)(t)]}var y0=/## (?<code>YN[0-9]{4}) - `(?<name>[A-Z_]+)`\n\n(?<details>(?:.(?!##))+)/gs;async function am(t){let r=`https://repo.yarnpkg.com/${te.miscUtils.isTaggedYarnVersion(te.YarnVersion)?te.YarnVersion:await(0,m0.resolveTag)(t,"canary")}/packages/gatsby/content/advanced/error-codes.md`,s=await te.httpUtils.get(r,{configuration:t});return new Map(Array.from(s.toString().matchAll(y0),({groups:i})=>{if(!i)throw new Error("Assertion failed: Expected the match to have been successful");let n=nm(i.code);if(i.name!==n)throw new Error(`Assertion failed: Invalid error code data: Expected "${i.name}" to be named "${n}"`);return[i.code,i.details]}))}var Br=class extends g0.BaseCommand{constructor(){super(...arguments),this.code=Ca.Option.String({required:!1,validator:ka.applyCascade(ka.isString(),[ka.matchesRegExp(/^YN[0-9]{4}$/)])}),this.json=Ca.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"})}async execute(){let e=await te.Configuration.find(this.context.cwd,this.context.plugins);if(typeof this.code<"u"){let r=nm(this.code),s=te.formatUtils.pretty(e,r,te.formatUtils.Type.CODE),i=this.cli.format().header(`${this.code} - ${s}`),a=(await am(e)).get(this.code),o=typeof a<"u"?te.formatUtils.jsonOrPretty(this.json,e,te.formatUtils.tuple(te.formatUtils.Type.MARKDOWN,{text:a,format:this.cli.format(),paragraphs:!0})):`This error code does not have a description.

You can help us by editing this page on GitHub \u{1F642}:
${te.formatUtils.jsonOrPretty(this.json,e,te.formatUtils.tuple(te.formatUtils.Type.URL,"https://github.com/yarnpkg/berry/blob/master/packages/gatsby/content/advanced/error-codes.md"))}
`;this.json?this.context.stdout.write(`${JSON.stringify({code:this.code,name:r,details:o})}
`):this.context.stdout.write(`${i}

${o}
`)}else{let r={children:te.miscUtils.mapAndFilter(Object.entries(te.MessageName),([s,i])=>Number.isNaN(Number(s))?te.miscUtils.mapAndFilter.skip:{label:(0,te.stringifyMessageName)(Number(s)),value:te.formatUtils.tuple(te.formatUtils.Type.CODE,i)})};te.treeUtils.emitTree(r,{configuration:e,stdout:this.context.stdout,json:this.json})}}};Br.paths=[["explain"]];Br.usage=Ca.Command.Usage({description:"explain an error code",details:`
      When the code argument is specified, this command prints its name and its details.

      When used without arguments, this command lists all error codes and their names.
    `,examples:[["Explain an error code","$0 explain YN0006"],["List all error codes","$0 explain"]]});ii.default=Br});var cm=p(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});var w0=le(),lm=m("@yarnpkg/cli"),N=m("@yarnpkg/core"),b0=m("@yarnpkg/fslib"),qe=m("clipanion"),v0=w0.__importDefault(Wt()),Hr=class extends lm.BaseCommand{constructor(){super(...arguments),this.all=qe.Option.Boolean("-A,--all",!1,{description:"Print versions of a package from the whole project"}),this.recursive=qe.Option.Boolean("-R,--recursive",!1,{description:"Print information for all packages, including transitive dependencies"}),this.extra=qe.Option.Array("-X,--extra",[],{description:"An array of requests of extra data provided by plugins"}),this.cache=qe.Option.Boolean("--cache",!1,{description:"Print information about the cache entry of a package (path, size, checksum)"}),this.dependents=qe.Option.Boolean("--dependents",!1,{description:"Print all dependents for each matching package"}),this.manifest=qe.Option.Boolean("--manifest",!1,{description:"Print data obtained by looking at the package archive (license, homepage, ...)"}),this.nameOnly=qe.Option.Boolean("--name-only",!1,{description:"Only print the name for the matching packages"}),this.virtuals=qe.Option.Boolean("--virtuals",!1,{description:"Print each instance of the virtual packages"}),this.json=qe.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"}),this.patterns=qe.Option.Rest()}async execute(){let e=await N.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await N.Project.find(e,this.context.cwd),i=await N.Cache.find(e);if(!s&&!this.all)throw new lm.WorkspaceRequiredError(r.cwd,this.context.cwd);await r.restoreInstallState();let n=new Set(this.extra);this.cache&&n.add("cache"),this.dependents&&n.add("dependents"),this.manifest&&n.add("manifest");let a=(w,{recursive:C})=>{let R=w.anchoredLocator.locatorHash,P=new Map,q=[R];for(;q.length>0;){let A=q.shift();if(P.has(A))continue;let I=r.storedPackages.get(A);if(typeof I>"u")throw new Error("Assertion failed: Expected the package to be registered");if(P.set(A,I),N.structUtils.isVirtualLocator(I)&&q.push(N.structUtils.devirtualizeLocator(I).locatorHash),!(!C&&A!==R))for(let D of I.dependencies.values()){let _=r.storedResolutions.get(D.descriptorHash);if(typeof _>"u")throw new Error("Assertion failed: Expected the resolution to be registered");q.push(_)}}return P.values()},o=({recursive:w})=>{let C=new Map;for(let R of r.workspaces)for(let P of a(R,{recursive:w}))C.set(P.locatorHash,P);return C.values()},l=({all:w,recursive:C})=>w&&C?r.storedPackages.values():w?o({recursive:C}):a(s,{recursive:C}),c=({all:w,recursive:C})=>{let R=l({all:w,recursive:C}),P=this.patterns.map(I=>{let D=N.structUtils.parseLocator(I),_=v0.default.makeRe(N.structUtils.stringifyIdent(D)),L=N.structUtils.isVirtualLocator(D),H=L?N.structUtils.devirtualizeLocator(D):D;return ce=>{let E=N.structUtils.stringifyIdent(ce);if(!_.test(E))return!1;if(D.reference==="unknown")return!0;let k=N.structUtils.isVirtualLocator(ce),ue=k?N.structUtils.devirtualizeLocator(ce):ce;return!(L&&k&&D.reference!==ce.reference||H.reference!==ue.reference)}}),q=N.miscUtils.sortMap([...R],I=>N.structUtils.stringifyLocator(I));return{selection:q.filter(I=>P.length===0||P.some(D=>D(I))),sortedLookup:q}},{selection:u,sortedLookup:h}=c({all:this.all,recursive:this.recursive});if(u.length===0)throw new qe.UsageError("No package matched your request");let d=new Map;if(this.dependents)for(let w of h)for(let C of w.dependencies.values()){let R=r.storedResolutions.get(C.descriptorHash);if(typeof R>"u")throw new Error("Assertion failed: Expected the resolution to be registered");N.miscUtils.getArrayWithDefault(d,R).push(w)}let y=new Map;for(let w of h){if(!N.structUtils.isVirtualLocator(w))continue;let C=N.structUtils.devirtualizeLocator(w);N.miscUtils.getArrayWithDefault(y,C.locatorHash).push(w)}let f={},b={children:f},g=e.makeFetcher(),v={project:r,fetcher:g,cache:i,checksums:r.storedChecksums,report:new N.ThrowReport,cacheOptions:{skipIntegrityCheck:!0}},x=[async(w,C,R)=>{if(!C.has("manifest"))return;let P=await g.fetch(w,v),q;try{q=await N.Manifest.find(P.prefixPath,{baseFs:P.packageFs})}finally{P.releaseFs?.()}R("Manifest",{License:N.formatUtils.tuple(N.formatUtils.Type.NO_HINT,q.license),Homepage:N.formatUtils.tuple(N.formatUtils.Type.URL,q.raw.homepage??null)})},async(w,C,R)=>{if(!C.has("cache"))return;let P=r.storedChecksums.get(w.locatorHash)??null,q=i.getLocatorPath(w,P),A;if(q!==null)try{A=await b0.xfs.statPromise(q)}catch{}let I=typeof A<"u"?[A.size,N.formatUtils.Type.SIZE]:void 0;R("Cache",{Checksum:N.formatUtils.tuple(N.formatUtils.Type.NO_HINT,P),Path:N.formatUtils.tuple(N.formatUtils.Type.PATH,q),Size:I})}];for(let w of u){let C=N.structUtils.isVirtualLocator(w);if(!this.virtuals&&C)continue;let R={},P={value:[w,N.formatUtils.Type.LOCATOR],children:R};if(f[N.structUtils.stringifyLocator(w)]=P,this.nameOnly){delete P.children;continue}let q=y.get(w.locatorHash);typeof q<"u"&&(R.Instances={label:"Instances",value:N.formatUtils.tuple(N.formatUtils.Type.NUMBER,q.length)}),R.Version={label:"Version",value:N.formatUtils.tuple(N.formatUtils.Type.NO_HINT,w.version)};let A=(D,_)=>{let L={};if(R[D]=L,Array.isArray(_))L.children=_.map(H=>({value:H}));else{let H={};L.children=H;for(let[ce,E]of Object.entries(_))typeof E>"u"||(H[ce]={label:ce,value:E})}};if(!C){for(let D of x)await D(w,n,A);await e.triggerHook(D=>D.fetchPackageInfo,w,n,A)}w.bin.size>0&&!C&&A("Exported Binaries",[...w.bin.keys()].map(D=>N.formatUtils.tuple(N.formatUtils.Type.PATH,D)));let I=d.get(w.locatorHash);typeof I<"u"&&I.length>0&&A("Dependents",I.map(D=>N.formatUtils.tuple(N.formatUtils.Type.LOCATOR,D))),w.dependencies.size>0&&!C&&A("Dependencies",[...w.dependencies.values()].map(D=>{let _=r.storedResolutions.get(D.descriptorHash),L=typeof _<"u"?r.storedPackages.get(_)??null:null;return N.formatUtils.tuple(N.formatUtils.Type.RESOLUTION,{descriptor:D,locator:L})})),w.peerDependencies.size>0&&C&&A("Peer dependencies",[...w.peerDependencies.values()].map(D=>{let _=w.dependencies.get(D.identHash),L=typeof _<"u"?r.storedResolutions.get(_.descriptorHash)??null:null,H=L!==null?r.storedPackages.get(L)??null:null;return N.formatUtils.tuple(N.formatUtils.Type.RESOLUTION,{descriptor:D,locator:H})}))}N.treeUtils.emitTree(b,{configuration:e,json:this.json,stdout:this.context.stdout,separators:this.nameOnly?0:2})}};Hr.paths=[["info"]];Hr.usage=qe.Command.Usage({description:"see information related to packages",details:"\n      This command prints various information related to the specified packages, accepting glob patterns.\n\n      By default, if the locator reference is missing, Yarn will default to print the information about all the matching direct dependencies of the package for the active workspace. To instead print all versions of the package that are direct dependencies of any of your workspaces, use the `-A,--all` flag. Adding the `-R,--recursive` flag will also report transitive dependencies.\n\n      Some fields will be hidden by default in order to keep the output readable, but can be selectively displayed by using additional options (`--dependents`, `--manifest`, `--virtuals`, ...) described in the option descriptions.\n\n      Note that this command will only print the information directly related to the selected packages - if you wish to know why the package is there in the first place, use `yarn why` which will do just that (it also provides a `-R,--recursive` flag that may be of some help).\n    ",examples:[["Show information about Lodash","$0 info lodash"]]});Ra.default=Hr});var dm=p(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});var Aa=le(),um=m("@yarnpkg/cli"),U=m("@yarnpkg/core"),We=m("@yarnpkg/fslib"),hm=m("@yarnpkg/parsers"),Sa=Aa.__importDefault(gi()),se=m("clipanion"),pm=Aa.__importDefault(m("semver")),x0=Aa.__importStar(m("typanion")),_0=[{selector:t=>t===-1,name:"nodeLinker",value:"node-modules"},{selector:t=>t!==-1&&t<8,name:"enableGlobalCache",value:!1},{selector:t=>t!==-1&&t<8,name:"compressionLevel",value:"mixed"}],Fr=class extends um.BaseCommand{constructor(){super(...arguments),this.json=se.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"}),this.immutable=se.Option.Boolean("--immutable",{description:"Abort with an error exit code if the lockfile was to be modified"}),this.immutableCache=se.Option.Boolean("--immutable-cache",{description:"Abort with an error exit code if the cache folder was to be modified"}),this.refreshLockfile=se.Option.Boolean("--refresh-lockfile",{description:"Refresh the package metadata stored in the lockfile"}),this.checkCache=se.Option.Boolean("--check-cache",{description:"Always refetch the packages and ensure that their checksums are consistent"}),this.checkResolutions=se.Option.Boolean("--check-resolutions",{description:"Validates that the package resolutions are coherent"}),this.inlineBuilds=se.Option.Boolean("--inline-builds",{description:"Verbosely print the output of the build steps of dependencies"}),this.mode=se.Option.String("--mode",{description:"Change what artifacts installs generate",validator:x0.isEnum(U.InstallMode)}),this.cacheFolder=se.Option.String("--cache-folder",{hidden:!0}),this.frozenLockfile=se.Option.Boolean("--frozen-lockfile",{hidden:!0}),this.ignoreEngines=se.Option.Boolean("--ignore-engines",{hidden:!0}),this.nonInteractive=se.Option.Boolean("--non-interactive",{hidden:!0}),this.preferOffline=se.Option.Boolean("--prefer-offline",{hidden:!0}),this.production=se.Option.Boolean("--production",{hidden:!0}),this.registry=se.Option.String("--registry",{hidden:!0}),this.silent=se.Option.Boolean("--silent",{hidden:!0}),this.networkTimeout=se.Option.String("--network-timeout",{hidden:!0})}async execute(){let e=await U.Configuration.find(this.context.cwd,this.context.plugins);typeof this.inlineBuilds<"u"&&e.useWithSource("<cli>",{enableInlineBuilds:this.inlineBuilds},e.startingCwd,{overwrite:!0});let r=!!process.env.FUNCTION_TARGET||!!process.env.GOOGLE_RUNTIME,s=await(0,U.reportOptionDeprecations)({configuration:e,stdout:this.context.stdout},[{option:this.ignoreEngines,message:"The --ignore-engines option is deprecated; engine checking isn't a core feature anymore",error:!Sa.default.VERCEL},{option:this.registry,message:"The --registry option is deprecated; prefer setting npmRegistryServer in your .yarnrc.yml file"},{option:this.preferOffline,message:"The --prefer-offline flag is deprecated; use the --cached flag with 'yarn add' instead",error:!Sa.default.VERCEL},{option:this.production,message:"The --production option is deprecated on 'install'; use 'yarn workspaces focus' instead",error:!0},{option:this.nonInteractive,message:"The --non-interactive option is deprecated",error:!r},{option:this.frozenLockfile,message:"The --frozen-lockfile option is deprecated; use --immutable and/or --immutable-cache instead",callback:()=>this.immutable=this.frozenLockfile},{option:this.cacheFolder,message:"The cache-folder option has been deprecated; use rc settings instead",error:!Sa.default.NETLIFY}]);if(s!==null)return s;let i=this.mode===U.InstallMode.UpdateLockfile;if(i&&(this.immutable||this.immutableCache))throw new se.UsageError(`${U.formatUtils.pretty(e,"--immutable",U.formatUtils.Type.CODE)} and ${U.formatUtils.pretty(e,"--immutable-cache",U.formatUtils.Type.CODE)} cannot be used with ${U.formatUtils.pretty(e,"--mode=update-lockfile",U.formatUtils.Type.CODE)}`);let n=(this.immutable??e.get("enableImmutableInstalls"))&&!i,a=this.immutableCache&&!i;if(e.projectCwd!==null){let f=await U.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout,includeFooter:!1},async b=>{let g=!1;await C0(e,n)&&(b.reportInfo(U.MessageName.AUTOMERGE_SUCCESS,"Automatically removed core plugins that are now builtins \u{1F44D}"),g=!0),await k0(e,n)&&(b.reportInfo(U.MessageName.AUTOMERGE_SUCCESS,"Automatically fixed merge conflicts \u{1F44D}"),g=!0),g&&b.reportSeparator()});if(f.hasErrors())return f.exitCode()}if(e.projectCwd!==null){let f=await U.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout,includeFooter:!1},async b=>{if(U.Configuration.telemetry?.isNew)U.Configuration.telemetry.commitTips(),b.reportInfo(U.MessageName.TELEMETRY_NOTICE,"Yarn will periodically gather anonymous telemetry: https://yarnpkg.com/advanced/telemetry"),b.reportInfo(U.MessageName.TELEMETRY_NOTICE,`Run ${U.formatUtils.pretty(e,"yarn config set --home enableTelemetry 0",U.formatUtils.Type.CODE)} to disable`),b.reportSeparator();else if(U.Configuration.telemetry?.shouldShowTips){let g=await U.httpUtils.get("https://repo.yarnpkg.com/tags",{configuration:e,jsonResponse:!0}).catch(()=>null);if(g!==null){let v=null;if(U.YarnVersion!==null){let w=pm.default.prerelease(U.YarnVersion)?"canary":"stable",C=g.latest[w];pm.default.gt(C,U.YarnVersion)&&(v=[w,C])}if(v)U.Configuration.telemetry.commitTips(),b.reportInfo(U.MessageName.VERSION_NOTICE,`${U.formatUtils.applyStyle(e,`A new ${v[0]} version of Yarn is available:`,U.formatUtils.Style.BOLD)} ${U.structUtils.prettyReference(e,v[1])}!`),b.reportInfo(U.MessageName.VERSION_NOTICE,`Upgrade now by running ${U.formatUtils.pretty(e,`yarn set version ${v[1]}`,U.formatUtils.Type.CODE)}`),b.reportSeparator();else{let x=U.Configuration.telemetry.selectTip(g.tips);x&&(b.reportInfo(U.MessageName.TIPS_NOTICE,U.formatUtils.pretty(e,x.message,U.formatUtils.Type.MARKDOWN_INLINE)),x.url&&b.reportInfo(U.MessageName.TIPS_NOTICE,`Learn more at ${x.url}`),b.reportSeparator())}}}});if(f.hasErrors())return f.exitCode()}let{project:o,workspace:l}=await U.Project.find(e,this.context.cwd),c=o.lockfileLastVersion;if(c!==null){let f=await U.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout,includeFooter:!1},async b=>{let g={};for(let v of _0)v.selector(c)&&typeof e.sources.get(v.name)>"u"&&(e.use("<compat>",{[v.name]:v.value},o.cwd,{overwrite:!0}),g[v.name]=v.value);Object.keys(g).length>0&&(await U.Configuration.updateConfiguration(o.cwd,g),b.reportInfo(U.MessageName.MIGRATION_SUCCESS,"Migrated your project to the latest Yarn version \u{1F680}"),b.reportSeparator())});if(f.hasErrors())return f.exitCode()}let u=await U.Cache.find(e,{immutable:a,check:this.checkCache});if(!l)throw new um.WorkspaceRequiredError(o.cwd,this.context.cwd);await o.restoreInstallState({restoreResolutions:!1});let h=e.get("enableHardenedMode");h&&typeof e.sources.get("enableHardenedMode")>"u"&&await U.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout,includeFooter:!1},async f=>{f.reportWarning(U.MessageName.UNNAMED,"Yarn detected that the current workflow is executed from a public pull request. For safety the hardened mode has been enabled."),f.reportWarning(U.MessageName.UNNAMED,`It will prevent malicious lockfile manipulations, in exchange for a slower install time. You can opt-out if necessary; check our ${U.formatUtils.applyHyperlink(e,"documentation","https://yarnpkg.com/features/security#hardened-mode")} for more details.`),f.reportSeparator()}),(this.refreshLockfile??h)&&(o.lockfileNeedsRefresh=!0);let d=this.checkResolutions??h;return(await U.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout,forceSectionAlignment:!0,includeLogs:!0,includeVersion:!0},async f=>{await o.install({cache:u,report:f,immutable:n,checkResolutions:d,mode:this.mode})})).exitCode()}};Fr.paths=[["install"],se.Command.Default];Fr.usage=se.Command.Usage({description:"install the project dependencies",details:"\n      This command sets up your project if needed. The installation is split into four different steps that each have their own characteristics:\n\n      - **Resolution:** First the package manager will resolve your dependencies. The exact way a dependency version is privileged over another isn't standardized outside of the regular semver guarantees. If a package doesn't resolve to what you would expect, check that all dependencies are correctly declared (also check our website for more information: ).\n\n      - **Fetch:** Then we download all the dependencies if needed, and make sure that they're all stored within our cache (check the value of `cacheFolder` in `yarn config` to see where the cache files are stored).\n\n      - **Link:** Then we send the dependency tree information to internal plugins tasked with writing them on the disk in some form (for example by generating the `.pnp.cjs` file you might know).\n\n      - **Build:** Once the dependency tree has been written on the disk, the package manager will now be free to run the build scripts for all packages that might need it, in a topological order compatible with the way they depend on one another. See https://yarnpkg.com/advanced/lifecycle-scripts for detail.\n\n      Note that running this command is not part of the recommended workflow. Yarn supports zero-installs, which means that as long as you store your cache and your `.pnp.cjs` file inside your repository, everything will work without requiring any install right after cloning your repository or switching branches.\n\n      If the `--immutable` option is set (defaults to true on CI), Yarn will abort with an error exit code if the lockfile was to be modified (other paths can be added using the `immutablePatterns` configuration setting). For backward compatibility we offer an alias under the name of `--frozen-lockfile`, but it will be removed in a later release.\n\n      If the `--immutable-cache` option is set, Yarn will abort with an error exit code if the cache folder was to be modified (either because files would be added, or because they'd be removed).\n\n      If the `--refresh-lockfile` option is set, Yarn will keep the same resolution for the packages currently in the lockfile but will refresh their metadata. If used together with `--immutable`, it can validate that the lockfile information are consistent. This flag is enabled by default when Yarn detects it runs within a pull request context.\n\n      If the `--check-cache` option is set, Yarn will always refetch the packages and will ensure that their checksum matches what's 1/ described in the lockfile 2/ inside the existing cache files (if present). This is recommended as part of your CI workflow if you're both following the Zero-Installs model and accepting PRs from third-parties, as they'd otherwise have the ability to alter the checked-in packages before submitting them.\n\n      If the `--inline-builds` option is set, Yarn will verbosely print the output of the build steps of your dependencies (instead of writing them into individual files). This is likely useful mostly for debug purposes only when using Docker-like environments.\n\n      If the `--mode=<mode>` option is set, Yarn will change which artifacts are generated. The modes currently supported are:\n\n      - `skip-build` will not run the build scripts at all. Note that this is different from setting `enableScripts` to false because the latter will disable build scripts, and thus affect the content of the artifacts generated on disk, whereas the former will just disable the build step - but not the scripts themselves, which just won't run.\n\n      - `update-lockfile` will skip the link step altogether, and only fetch packages that are missing from the lockfile (or that have no associated checksums). This mode is typically used by tools like Renovate or Dependabot to keep a lockfile up-to-date without incurring the full install cost.\n    ",examples:[["Install the project","$0 install"],["Validate a project when using Zero-Installs","$0 install --immutable --immutable-cache"],["Validate a project when using Zero-Installs (slightly safer if you accept external PRs)","$0 install --immutable --immutable-cache --check-cache"]]});Ta.default=Fr;var E0="<<<<<<<";async function k0(t,e){if(!t.projectCwd)return!1;let r=We.ppath.join(t.projectCwd,We.Filename.lockfile);if(!await We.xfs.existsPromise(r)||!(await We.xfs.readFilePromise(r,"utf8")).includes(E0))return!1;if(e)throw new U.ReportError(U.MessageName.AUTOMERGE_IMMUTABLE,"Cannot autofix a lockfile when running an immutable install");let i=await U.execUtils.execvp("git",["rev-parse","MERGE_HEAD","HEAD"],{cwd:t.projectCwd});if(i.code!==0&&(i=await U.execUtils.execvp("git",["rev-parse","REBASE_HEAD","HEAD"],{cwd:t.projectCwd})),i.code!==0&&(i=await U.execUtils.execvp("git",["rev-parse","CHERRY_PICK_HEAD","HEAD"],{cwd:t.projectCwd})),i.code!==0)throw new U.ReportError(U.MessageName.AUTOMERGE_GIT_ERROR,"Git returned an error when trying to find the commits pertaining to the conflict");let n=await Promise.all(i.stdout.trim().split(/\n/).map(async o=>{let l=await U.execUtils.execvp("git",["show",`${o}:./${We.Filename.lockfile}`],{cwd:t.projectCwd});if(l.code!==0)throw new U.ReportError(U.MessageName.AUTOMERGE_GIT_ERROR,`Git returned an error when trying to access the lockfile content in ${o}`);try{return(0,hm.parseSyml)(l.stdout)}catch{throw new U.ReportError(U.MessageName.AUTOMERGE_FAILED_TO_PARSE,"A variant of the conflicting lockfile failed to parse")}}));n=n.filter(o=>!!o.__metadata);for(let o of n){if(o.__metadata.version<7)for(let l of Object.keys(o)){if(l==="__metadata")continue;let c=U.structUtils.parseDescriptor(l,!0),u=t.normalizeDependency(c),h=U.structUtils.stringifyDescriptor(u);h!==l&&(o[h]=o[l],delete o[l])}for(let l of Object.keys(o)){if(l==="__metadata")continue;let c=o[l].checksum;typeof c=="string"&&c.includes("/")||(o[l].checksum=`${o.__metadata.cacheKey}/${c}`)}}let a=Object.assign({},...n);a.__metadata.version=`${Math.min(...n.map(o=>parseInt(o.__metadata.version??0)))}`,a.__metadata.cacheKey="merged";for(let[o,l]of Object.entries(a))typeof l=="string"&&delete a[o];return await We.xfs.changeFilePromise(r,(0,hm.stringifySyml)(a),{automaticNewlines:!0}),!0}async function C0(t,e){if(!t.projectCwd)return!1;let r=[],s=We.ppath.join(t.projectCwd,".yarn/plugins/@yarnpkg");return await U.Configuration.updateConfiguration(t.projectCwd,{plugins:n=>{if(!Array.isArray(n))return n;let a=n.filter(o=>{if(!o.path)return!0;let l=We.ppath.resolve(t.projectCwd,o.path),c=U.LEGACY_PLUGINS.has(o.spec)&&We.ppath.contains(s,l);return c&&r.push(l),!c});return a.length===0?U.Configuration.deleteProperty:a.length===n.length?n:a}},{immutable:e})?(await Promise.all(r.map(async n=>{await We.xfs.removePromise(n)})),!0):!1}});var fm=p(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});var Oa=m("@yarnpkg/cli"),Vt=m("@yarnpkg/core"),Pa=m("@yarnpkg/fslib"),Qe=m("clipanion"),Gr=class extends Oa.BaseCommand{constructor(){super(...arguments),this.all=Qe.Option.Boolean("-A,--all",!1,{description:"Link all workspaces belonging to the target projects to the current one"}),this.private=Qe.Option.Boolean("-p,--private",!1,{description:"Also link private workspaces belonging to the target projects to the current one"}),this.relative=Qe.Option.Boolean("-r,--relative",!1,{description:"Link workspaces using relative paths instead of absolute paths"}),this.destinations=Qe.Option.Rest()}async execute(){let e=await Vt.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await Vt.Project.find(e,this.context.cwd),i=await Vt.Cache.find(e);if(!s)throw new Oa.WorkspaceRequiredError(r.cwd,this.context.cwd);await r.restoreInstallState({restoreResolutions:!1});let n=r.topLevelWorkspace,a=[];for(let o of this.destinations){let l=Pa.ppath.resolve(this.context.cwd,Pa.npath.toPortablePath(o)),c=await Vt.Configuration.find(l,this.context.plugins,{useRc:!1,strict:!1}),{project:u,workspace:h}=await Vt.Project.find(c,l);if(r.cwd===u.cwd)throw new Qe.UsageError(`Invalid destination '${o}'; Can't link the project to itself`);if(!h)throw new Oa.WorkspaceRequiredError(u.cwd,l);if(this.all){let d=!1;for(let y of u.workspaces)y.manifest.name&&(!y.manifest.private||this.private)&&(a.push(y),d=!0);if(!d)throw new Qe.UsageError(`No workspace found to be linked in the target project: ${o}`)}else{if(!h.manifest.name)throw new Qe.UsageError(`The target workspace at '${o}' doesn't have a name and thus cannot be linked`);if(h.manifest.private&&!this.private)throw new Qe.UsageError(`The target workspace at '${o}' is marked private - use the --private flag to link it anyway`);a.push(h)}}for(let o of a){let l=Vt.structUtils.stringifyIdent(o.anchoredLocator),c=this.relative?Pa.ppath.relative(r.cwd,o.cwd):o.cwd;n.manifest.resolutions.push({pattern:{descriptor:{fullName:l}},reference:`portal:${c}`})}return await r.installWithNewReport({stdout:this.context.stdout},{cache:i})}};Gr.paths=[["link"]];Gr.usage=Qe.Command.Usage({description:"connect the local project to another one",details:"\n      This command will set a new `resolutions` field in the project-level manifest and point it to the workspace at the specified location (even if part of another project).\n    ",examples:[["Register one or more remote workspaces for use in the current project","$0 link ~/ts-loader ~/jest"],["Register all workspaces from a remote project for use in the current project","$0 link ~/jest --all"]]});qa.default=Gr});var mm=p(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});var R0=m("@yarnpkg/cli"),gm=m("clipanion"),Wr=class extends R0.BaseCommand{constructor(){super(...arguments),this.args=gm.Option.Proxy()}async execute(){return this.cli.run(["exec","node",...this.args])}};Wr.paths=[["node"]];Wr.usage=gm.Command.Usage({description:"run node with the hook already setup",details:`
      This command simply runs Node. It also makes sure to call it in a way that's compatible with the current project (for example, on PnP projects the environment will be setup in such a way that PnP will be correctly injected into the environment).

      The Node process will use the exact same version of Node as the one used to run Yarn itself, which might be a good way to ensure that your commands always use a consistent Node version.
    `,examples:[["Run a Node script","$0 node ./my-script.js"]]});Ua.default=Wr});var wm=p(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});var S0=m("@yarnpkg/cli"),Ye=m("@yarnpkg/core"),ym=m("clipanion"),Yr=class extends S0.BaseCommand{constructor(){super(...arguments),this.json=ym.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"})}async execute(){let e=await Ye.Configuration.find(this.context.cwd,this.context.plugins),r=await Ye.Configuration.findRcFiles(this.context.cwd);return(await Ye.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout},async i=>{for(let n of r)if(!!n.data?.plugins)for(let a of n.data.plugins){if(!a.checksum||!a.spec.match(/^https?:/))continue;let o=await Ye.httpUtils.get(a.spec,{configuration:e}),l=Ye.hashUtils.makeHash(o);if(a.checksum===l)continue;let c=Ye.formatUtils.pretty(e,a.path,Ye.formatUtils.Type.PATH),u=Ye.formatUtils.pretty(e,a.spec,Ye.formatUtils.Type.URL),h=`${c} is different from the file provided by ${u}`;i.reportJson({...a,newChecksum:l}),i.reportError(Ye.MessageName.UNNAMED,h)}})).exitCode()}};Yr.paths=[["plugin","check"]];Yr.usage=ym.Command.Usage({category:"Plugin-related commands",description:"find all third-party plugins that differ from their own spec",details:`
      Check only the plugins from https.

      If this command detects any plugin differences in the CI environment, it will throw an error.
    `,examples:[["find all third-party plugins that differ from their own spec","$0 plugin check"]]});Ia.default=Yr});var zr=p(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.getAvailablePlugins=vm;var A0=m("@yarnpkg/cli"),Kr=m("@yarnpkg/core"),T0=m("@yarnpkg/parsers"),bm=m("clipanion"),O0="https://raw.githubusercontent.com/yarnpkg/berry/master/plugins.yml";async function vm(t,e){let r=await Kr.httpUtils.get(O0,{configuration:t}),s=(0,T0.parseSyml)(r.toString());return Object.fromEntries(Object.entries(s).filter(([i,n])=>!e||Kr.semverUtils.satisfiesWithPrereleases(e,n.range??"<4.0.0-rc.1")))}var Vr=class extends A0.BaseCommand{constructor(){super(...arguments),this.json=bm.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"})}async execute(){let e=await Kr.Configuration.find(this.context.cwd,this.context.plugins);return(await Kr.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout},async s=>{let i=await vm(e,Kr.YarnVersion);for(let[n,{experimental:a,...o}]of Object.entries(i)){let l=n;a&&(l+=" [experimental]"),s.reportJson({name:n,experimental:a,...o}),s.reportInfo(null,l)}})).exitCode()}};Vr.paths=[["plugin","list"]];Vr.usage=bm.Command.Usage({category:"Plugin-related commands",description:"list the available official plugins",details:"\n      This command prints the plugins available directly from the Yarn repository. Only those plugins can be referenced by name in `yarn plugin import`.\n    ",examples:[["List the official plugins","$0 plugin list"]]});ni.default=Vr});var Da=p(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.runWorkflow=ai;Xr.prepareRepo=_m;var P0=m("@yarnpkg/cli"),Ue=m("@yarnpkg/core"),ve=m("@yarnpkg/fslib"),Xe=m("clipanion"),q0=m("os"),U0=Na(),I0=zr(),D0=si(),N0=/^[0-9]+$/,j0=process.platform==="win32";function xm(t){return N0.test(t)?`pull/${t}/head`:t}var $0=({repository:t,branch:e},r)=>[["git","init",ve.npath.fromPortablePath(r)],["git","remote","add","origin",t],["git","fetch","origin","--depth=1",xm(e)],["git","reset","--hard","FETCH_HEAD"]],L0=({branch:t})=>[["git","fetch","origin","--depth=1",xm(t),"--force"],["git","reset","--hard","FETCH_HEAD"],["git","clean","-dfx","-e","packages/yarnpkg-cli/bundles"]],M0=({plugins:t,noMinify:e},r,s)=>[["yarn","build:cli",...new Array().concat(...t.map(i=>["--plugin",ve.ppath.resolve(s,i)])),...e?["--no-minify"]:[],"|"],[j0?"move":"mv","packages/yarnpkg-cli/bundles/yarn.js",ve.npath.fromPortablePath(r),"|"]],Qr=class extends P0.BaseCommand{constructor(){super(...arguments),this.installPath=Xe.Option.String("--path",{description:"The path where the repository should be cloned to"}),this.repository=Xe.Option.String("--repository","https://github.com/yarnpkg/berry.git",{description:"The repository that should be cloned"}),this.branch=Xe.Option.String("--branch","master",{description:"The branch of the repository that should be cloned"}),this.plugins=Xe.Option.Array("--plugin",[],{description:"An array of additional plugins that should be included in the bundle"}),this.dryRun=Xe.Option.Boolean("-n,--dry-run",!1,{description:"If set, the bundle will be built but not added to the project"}),this.noMinify=Xe.Option.Boolean("--no-minify",!1,{description:"Build a bundle for development (debugging) - non-minified and non-mangled"}),this.force=Xe.Option.Boolean("-f,--force",!1,{description:"Always clone the repository instead of trying to fetch the latest commits"}),this.skipPlugins=Xe.Option.Boolean("--skip-plugins",!1,{description:"Skip updating the contrib plugins"})}async execute(){let e=await Ue.Configuration.find(this.context.cwd,this.context.plugins),{project:r}=await Ue.Project.find(e,this.context.cwd),s=typeof this.installPath<"u"?ve.ppath.resolve(this.context.cwd,ve.npath.toPortablePath(this.installPath)):ve.ppath.resolve(ve.npath.toPortablePath((0,q0.tmpdir)()),"yarnpkg-sources",Ue.hashUtils.makeHash(this.repository).slice(0,6));return(await Ue.StreamReport.start({configuration:e,stdout:this.context.stdout},async n=>{await _m(this,{configuration:e,report:n,target:s}),n.reportSeparator(),n.reportInfo(Ue.MessageName.UNNAMED,"Building a fresh bundle"),n.reportSeparator();let a=await Ue.execUtils.execvp("git",["rev-parse","--short","HEAD"],{cwd:s,strict:!0}),o=ve.ppath.join(s,`packages/yarnpkg-cli/bundles/yarn-${a.stdout.trim()}.js`);ve.xfs.existsSync(o)||(await ai(M0(this,o,s),{configuration:e,context:this.context,target:s}),n.reportSeparator());let l=await ve.xfs.readFilePromise(o);if(!this.dryRun){let{bundleVersion:c}=await(0,D0.setVersion)(e,null,async()=>l,{report:n});this.skipPlugins||await B0(this,c,{project:r,report:n,target:s})}})).exitCode()}};Qr.paths=[["set","version","from","sources"]];Qr.usage=Xe.Command.Usage({description:"build Yarn from master",details:`
      This command will clone the Yarn repository into a temporary folder, then build it. The resulting bundle will then be copied into the local project.

      By default, it also updates all contrib plugins to the same commit the bundle is built from. This behavior can be disabled by using the \`--skip-plugins\` flag.
    `,examples:[["Build Yarn from master","$0 set version from sources"]]});Xr.default=Qr;async function ai(t,{configuration:e,context:r,target:s}){for(let[i,...n]of t){let a=n[n.length-1]==="|";if(a&&n.pop(),a)await Ue.execUtils.pipevp(i,n,{cwd:s,stdin:r.stdin,stdout:r.stdout,stderr:r.stderr,strict:!0});else{r.stdout.write(`${Ue.formatUtils.pretty(e,`  $ ${[i,...n].join(" ")}`,"grey")}
`);try{await Ue.execUtils.execvp(i,n,{cwd:s,strict:!0})}catch(o){throw r.stdout.write(o.stdout||o.stack),o}}}}async function _m(t,{configuration:e,report:r,target:s}){let i=!1;if(!t.force&&ve.xfs.existsSync(ve.ppath.join(s,".git"))){r.reportInfo(Ue.MessageName.UNNAMED,"Fetching the latest commits"),r.reportSeparator();try{await ai(L0(t),{configuration:e,context:t.context,target:s}),i=!0}catch{r.reportSeparator(),r.reportWarning(Ue.MessageName.UNNAMED,"Repository update failed; we'll try to regenerate it")}}i||(r.reportInfo(Ue.MessageName.UNNAMED,"Cloning the remote repository"),r.reportSeparator(),await ve.xfs.removePromise(s),await ve.xfs.mkdirPromise(s,{recursive:!0}),await ai($0(t,s),{configuration:e,context:t.context,target:s}))}async function B0(t,e,{project:r,report:s,target:i}){let n=await(0,I0.getAvailablePlugins)(r.configuration,e),a=new Set(Object.keys(n));for(let o of r.configuration.plugins.keys())!a.has(o)||await(0,U0.buildAndSavePlugin)(o,t,{project:r,report:s,target:i})}});var $a=p(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.savePlugin=Em;var H0=le(),F0=m("@yarnpkg/cli"),Se=m("@yarnpkg/core"),de=m("@yarnpkg/core"),Je=m("@yarnpkg/fslib"),ja=m("clipanion"),G0=H0.__importDefault(m("semver")),W0=m("vm"),Y0=zr(),Jr=class extends F0.BaseCommand{constructor(){super(...arguments),this.name=ja.Option.String(),this.checksum=ja.Option.Boolean("--checksum",!0,{description:"Whether to care if this plugin is modified"})}async execute(){let e=await Se.Configuration.find(this.context.cwd,this.context.plugins);return(await Se.StreamReport.start({configuration:e,stdout:this.context.stdout},async s=>{let{project:i}=await Se.Project.find(e,this.context.cwd),n,a;if(this.name.match(/^\.{0,2}[\\/]/)||Je.npath.isAbsolute(this.name)){let o=Je.ppath.resolve(this.context.cwd,Je.npath.toPortablePath(this.name));s.reportInfo(Se.MessageName.UNNAMED,`Reading ${de.formatUtils.pretty(e,o,de.formatUtils.Type.PATH)}`),n=Je.ppath.relative(i.cwd,o),a=await Je.xfs.readFilePromise(o)}else{let o;if(this.name.match(/^https?:/)){try{new URL(this.name)}catch{throw new Se.ReportError(Se.MessageName.INVALID_PLUGIN_REFERENCE,`Plugin specifier "${this.name}" is neither a plugin name nor a valid url`)}n=this.name,o=this.name}else{let l=de.structUtils.parseLocator(this.name.replace(/^((@yarnpkg\/)?plugin-)?/,"@yarnpkg/plugin-"));if(l.reference!=="unknown"&&!G0.default.valid(l.reference))throw new Se.ReportError(Se.MessageName.UNNAMED,"Official plugins only accept strict version references. Use an explicit URL if you wish to download them from another location.");let c=de.structUtils.stringifyIdent(l),u=await(0,Y0.getAvailablePlugins)(e,de.YarnVersion);if(!Object.hasOwn(u,c)){let h=`Couldn't find a plugin named ${de.structUtils.prettyIdent(e,l)} on the remote registry.
`;throw e.plugins.has(c)?h+=`A plugin named ${de.structUtils.prettyIdent(e,l)} is already installed; possibly attempting to import a built-in plugin.`:h+=`Note that only the plugins referenced on our website (${de.formatUtils.pretty(e,"https://github.com/yarnpkg/berry/blob/master/plugins.yml",de.formatUtils.Type.URL)}) can be referenced by their name; any other plugin will have to be referenced through its public url (for example ${de.formatUtils.pretty(e,"https://github.com/yarnpkg/berry/raw/master/packages/plugin-typescript/bin/%40yarnpkg/plugin-typescript.js",de.formatUtils.Type.URL)}).`,new Se.ReportError(Se.MessageName.PLUGIN_NAME_NOT_FOUND,h)}n=c,o=u[c].url,l.reference!=="unknown"?o=o.replace(/\/master\//,`/${c}/${l.reference}/`):de.YarnVersion!==null&&(o=o.replace(/\/master\//,`/@yarnpkg/cli/${de.YarnVersion}/`))}s.reportInfo(Se.MessageName.UNNAMED,`Downloading ${de.formatUtils.pretty(e,o,"green")}`),a=await de.httpUtils.get(o,{configuration:e})}await Em(n,a,{checksum:this.checksum,project:i,report:s})})).exitCode()}};Jr.paths=[["plugin","import"]];Jr.usage=ja.Command.Usage({category:"Plugin-related commands",description:"download a plugin",details:`
      This command downloads the specified plugin from its remote location and updates the configuration to reference it in further CLI invocations.

      Three types of plugin references are accepted:

      - If the plugin is stored within the Yarn repository, it can be referenced by name.
      - Third-party plugins can be referenced directly through their public urls.
      - Local plugins can be referenced by their path on the disk.

      If the \`--no-checksum\` option is set, Yarn will no longer care if the plugin is modified.

      Plugins cannot be downloaded from the npm registry, and aren't allowed to have dependencies (they need to be bundled into a single file, possibly thanks to the \`@yarnpkg/builder\` package).
    `,examples:[['Download and activate the "@yarnpkg/plugin-exec" plugin',"$0 plugin import @yarnpkg/plugin-exec"],['Download and activate the "@yarnpkg/plugin-exec" plugin (shorthand)',"$0 plugin import exec"],["Download and activate a community plugin","$0 plugin import https://example.org/path/to/plugin.js"],["Activate a local plugin","$0 plugin import ./path/to/plugin.js"]]});oi.default=Jr;async function Em(t,e,{checksum:r=!0,project:s,report:i}){let{configuration:n}=s,a={},o={exports:a};(0,W0.runInNewContext)(e.toString(),{module:o,exports:a});let c=`.yarn/plugins/${o.exports.name}.cjs`,u=Je.ppath.resolve(s.cwd,c);i.reportInfo(Se.MessageName.UNNAMED,`Saving the new plugin in ${de.formatUtils.pretty(n,c,"magenta")}`),await Je.xfs.mkdirPromise(Je.ppath.dirname(u),{recursive:!0}),await Je.xfs.writeFilePromise(u,e);let h={path:c,spec:t};r&&(h.checksum=de.hashUtils.makeHash(e)),await Se.Configuration.addPlugin(s.cwd,[h])}});var Na=p(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.buildAndSavePlugin=Cm;var K0=m("@yarnpkg/cli"),li=m("@yarnpkg/core"),zt=m("@yarnpkg/core"),Qt=m("@yarnpkg/fslib"),Et=m("clipanion"),V0=m("os"),km=Da(),z0=$a(),Q0=zr(),X0=({pluginName:t,noMinify:e},r)=>[["yarn",`build:${t}`,...e?["--no-minify"]:[],"|"]],Zr=class extends K0.BaseCommand{constructor(){super(...arguments),this.installPath=Et.Option.String("--path",{description:"The path where the repository should be cloned to"}),this.repository=Et.Option.String("--repository","https://github.com/yarnpkg/berry.git",{description:"The repository that should be cloned"}),this.branch=Et.Option.String("--branch","master",{description:"The branch of the repository that should be cloned"}),this.noMinify=Et.Option.Boolean("--no-minify",!1,{description:"Build a plugin for development (debugging) - non-minified and non-mangled"}),this.force=Et.Option.Boolean("-f,--force",!1,{description:"Always clone the repository instead of trying to fetch the latest commits"}),this.name=Et.Option.String()}async execute(){let e=await zt.Configuration.find(this.context.cwd,this.context.plugins),r=typeof this.installPath<"u"?Qt.ppath.resolve(this.context.cwd,Qt.npath.toPortablePath(this.installPath)):Qt.ppath.resolve(Qt.npath.toPortablePath((0,V0.tmpdir)()),"yarnpkg-sources",li.hashUtils.makeHash(this.repository).slice(0,6));return(await zt.StreamReport.start({configuration:e,stdout:this.context.stdout},async i=>{let{project:n}=await zt.Project.find(e,this.context.cwd),a=li.structUtils.parseIdent(this.name.replace(/^((@yarnpkg\/)?plugin-)?/,"@yarnpkg/plugin-")),o=li.structUtils.stringifyIdent(a),l=await(0,Q0.getAvailablePlugins)(e,li.YarnVersion);if(!Object.hasOwn(l,o))throw new zt.ReportError(zt.MessageName.PLUGIN_NAME_NOT_FOUND,`Couldn't find a plugin named "${o}" on the remote registry. Note that only the plugins referenced on our website (https://github.com/yarnpkg/berry/blob/master/plugins.yml) can be built and imported from sources.`);let c=o;await(0,km.prepareRepo)(this,{configuration:e,report:i,target:r}),await Cm(c,this,{project:n,report:i,target:r})})).exitCode()}};Zr.paths=[["plugin","import","from","sources"]];Zr.usage=Et.Command.Usage({category:"Plugin-related commands",description:"build a plugin from sources",details:`
      This command clones the Yarn repository into a temporary folder, builds the specified contrib plugin and updates the configuration to reference it in further CLI invocations.

      The plugins can be referenced by their short name if sourced from the official Yarn repository.
    `,examples:[['Build and activate the "@yarnpkg/plugin-exec" plugin',"$0 plugin import from sources @yarnpkg/plugin-exec"],['Build and activate the "@yarnpkg/plugin-exec" plugin (shorthand)',"$0 plugin import from sources exec"]]});ci.default=Zr;async function Cm(t,{context:e,noMinify:r},{project:s,report:i,target:n}){let a=t.replace(/@yarnpkg\//,""),{configuration:o}=s;i.reportSeparator(),i.reportInfo(zt.MessageName.UNNAMED,`Building a fresh ${a}`),i.reportSeparator(),await(0,km.runWorkflow)(X0({pluginName:a,noMinify:r},n),{configuration:o,context:e,target:n}),i.reportSeparator();let l=Qt.ppath.resolve(n,`packages/${a}/bundles/${t}.js`),c=await Qt.xfs.readFilePromise(l);await(0,z0.savePlugin)(t,c,{project:s,report:i})}});var Rm=p(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});var J0=m("@yarnpkg/cli"),Me=m("@yarnpkg/core"),La=m("@yarnpkg/fslib"),Ma=m("clipanion"),es=class extends J0.BaseCommand{constructor(){super(...arguments),this.name=Ma.Option.String()}async execute(){let e=await Me.Configuration.find(this.context.cwd,this.context.plugins),{project:r}=await Me.Project.find(e,this.context.cwd);return(await Me.StreamReport.start({configuration:e,stdout:this.context.stdout},async i=>{let n=this.name,a=Me.structUtils.parseIdent(n);if(!e.plugins.has(n))throw new Ma.UsageError(`${Me.structUtils.prettyIdent(e,a)} isn't referenced by the current configuration`);let o=`.yarn/plugins/${n}.cjs`,l=La.ppath.resolve(r.cwd,o);La.xfs.existsSync(l)&&(i.reportInfo(Me.MessageName.UNNAMED,`Removing ${Me.formatUtils.pretty(e,o,Me.formatUtils.Type.PATH)}...`),await La.xfs.removePromise(l)),i.reportInfo(Me.MessageName.UNNAMED,"Updating the configuration..."),await Me.Configuration.updateConfiguration(r.cwd,{plugins:c=>{if(!Array.isArray(c))return c;let u=c.filter(h=>h.path!==o);return u.length===0?Me.Configuration.deleteProperty:u.length===c.length?c:u}})})).exitCode()}};es.paths=[["plugin","remove"]];es.usage=Ma.Command.Usage({category:"Plugin-related commands",description:"remove a plugin",details:`
      This command deletes the specified plugin from the .yarn/plugins folder and removes it from the configuration.

      **Note:** The plugins have to be referenced by their name property, which can be obtained using the \`yarn plugin runtime\` command. Shorthands are not allowed.
   `,examples:[["Remove a plugin imported from the Yarn repository","$0 plugin remove @yarnpkg/plugin-typescript"],["Remove a plugin imported from a local file","$0 plugin remove my-local-plugin"]]});Ba.default=es});var Tm=p(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});var Z0=m("@yarnpkg/cli"),Sm=m("@yarnpkg/core"),Am=m("clipanion"),ts=class extends Z0.BaseCommand{constructor(){super(...arguments),this.json=Am.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"})}async execute(){let e=await Sm.Configuration.find(this.context.cwd,this.context.plugins);return(await Sm.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout},async s=>{for(let i of e.plugins.keys()){let n=this.context.plugins.plugins.has(i),a=i;n&&(a+=" [builtin]"),s.reportJson({name:i,builtin:n}),s.reportInfo(null,`${a}`)}})).exitCode()}};ts.paths=[["plugin","runtime"]];ts.usage=Am.Command.Usage({category:"Plugin-related commands",description:"list the active plugins",details:`
      This command prints the currently active plugins. Will be displayed both builtin plugins and external plugins.
    `,examples:[["List the currently active plugins","$0 plugin runtime"]]});Ha.default=ts});var Um=p(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});var Om=m("@yarnpkg/cli"),Pm=m("@yarnpkg/core"),Fa=m("@yarnpkg/core"),qm=m("clipanion"),rs=class extends Om.BaseCommand{constructor(){super(...arguments),this.idents=qm.Option.Rest()}async execute(){let e=await Pm.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await Fa.Project.find(e,this.context.cwd),i=await Pm.Cache.find(e);if(!s)throw new Om.WorkspaceRequiredError(r.cwd,this.context.cwd);let n=new Set;for(let a of this.idents)n.add(Fa.structUtils.parseIdent(a).identHash);if(await r.restoreInstallState({restoreResolutions:!1}),await r.resolveEverything({cache:i,report:new Fa.ThrowReport}),n.size>0)for(let a of r.storedPackages.values())n.has(a.identHash)&&(r.storedBuildState.delete(a.locatorHash),r.skippedBuilds.delete(a.locatorHash));else r.storedBuildState.clear(),r.skippedBuilds.clear();return await r.installWithNewReport({stdout:this.context.stdout,quiet:this.context.quiet},{cache:i})}};rs.paths=[["rebuild"]];rs.usage=qm.Command.Usage({description:"rebuild the project's native packages",details:`
      This command will automatically cause Yarn to forget about previous compilations of the given packages and to run them again.

      Note that while Yarn forgets the compilation, the previous artifacts aren't erased from the filesystem and may affect the next builds (in good or bad). To avoid this, you may remove the .yarn/unplugged folder, or any other relevant location where packages might have been stored (Yarn may offer a way to do that automatically in the future).

      By default all packages will be rebuilt, but you can filter the list by specifying the names of the packages you want to clear from memory.
    `,examples:[["Rebuild all packages","$0 rebuild"],["Rebuild fsevents only","$0 rebuild fsevents"]]});Ga.default=rs});var Nm=p(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});var Ya=le(),Im=m("@yarnpkg/cli"),ss=m("@yarnpkg/core"),eO=m("@yarnpkg/core"),ui=m("@yarnpkg/core"),is=m("clipanion"),Dm=Ya.__importDefault(Wt()),tO=Ya.__importStar(m("typanion")),Wa=Ya.__importStar(lr()),ns=class extends Im.BaseCommand{constructor(){super(...arguments),this.all=is.Option.Boolean("-A,--all",!1,{description:"Apply the operation to all workspaces from the current project"}),this.mode=is.Option.String("--mode",{description:"Change what artifacts installs generate",validator:tO.isEnum(eO.InstallMode)}),this.patterns=is.Option.Rest()}async execute(){let e=await ss.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await ss.Project.find(e,this.context.cwd),i=await ss.Cache.find(e);if(!s)throw new Im.WorkspaceRequiredError(r.cwd,this.context.cwd);await r.restoreInstallState({restoreResolutions:!1});let n=this.all?r.workspaces:[s],a=[Wa.Target.REGULAR,Wa.Target.DEVELOPMENT,Wa.Target.PEER],o=[],l=!1,c=[];for(let y of this.patterns){let f=!1,b=ui.structUtils.parseIdent(y);for(let g of n){let v=[...g.manifest.peerDependenciesMeta.keys()];for(let x of(0,Dm.default)(v,y))g.manifest.peerDependenciesMeta.delete(x),l=!0,f=!0;for(let x of a){let w=g.manifest.getForScope(x),C=[...w.values()].map(R=>ui.structUtils.stringifyIdent(R));for(let R of(0,Dm.default)(C,ui.structUtils.stringifyIdent(b))){let{identHash:P}=ui.structUtils.parseIdent(R),q=w.get(P);if(typeof q>"u")throw new Error("Assertion failed: Expected the descriptor to be registered");g.manifest[x].delete(P),c.push([g,x,q]),l=!0,f=!0}}}f||o.push(y)}let u=o.length>1?"Patterns":"Pattern",h=o.length>1?"don't":"doesn't",d=this.all?"any":"this";if(o.length>0)throw new is.UsageError(`${u} ${ss.formatUtils.prettyList(e,o,ss.formatUtils.Type.CODE)} ${h} match any packages referenced by ${d} workspace`);return l?(await e.triggerMultipleHooks(y=>y.afterWorkspaceDependencyRemoval,c),await r.installWithNewReport({stdout:this.context.stdout},{cache:i,mode:this.mode})):0}};ns.paths=[["remove"]];ns.usage=is.Command.Usage({description:"remove dependencies from the project",details:`
      This command will remove the packages matching the specified patterns from the current workspace.

      If the \`--mode=<mode>\` option is set, Yarn will change which artifacts are generated. The modes currently supported are:

      - \`skip-build\` will not run the build scripts at all. Note that this is different from setting \`enableScripts\` to false because the latter will disable build scripts, and thus affect the content of the artifacts generated on disk, whereas the former will just disable the build step - but not the scripts themselves, which just won't run.

      - \`update-lockfile\` will skip the link step altogether, and only fetch packages that are missing from the lockfile (or that have no associated checksums). This mode is typically used by tools like Renovate or Dependabot to keep a lockfile up-to-date without incurring the full install cost.

      This command accepts glob patterns as arguments (if valid Idents and supported by [micromatch](https://github.com/micromatch/micromatch)). Make sure to escape the patterns, to prevent your own shell from trying to expand them.
    `,examples:[["Remove a dependency from the current project","$0 remove lodash"],["Remove a dependency from all workspaces at once","$0 remove lodash --all"],["Remove all dependencies starting with `eslint-`","$0 remove 'eslint-*'"],["Remove all dependencies with the `@babel` scope","$0 remove '@babel/*'"],["Remove all dependencies matching `react-dom` or `react-helmet`","$0 remove 'react-{dom,helmet}'"]]});Ka.default=ns});var $m=p(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});var jm=m("@yarnpkg/cli"),Va=m("@yarnpkg/core"),rO=m("@yarnpkg/core"),sO=m("clipanion"),iO=m("util"),hi=class extends jm.BaseCommand{constructor(){super(...arguments),this.json=sO.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"})}async execute(){let e=await Va.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await Va.Project.find(e,this.context.cwd);if(!s)throw new jm.WorkspaceRequiredError(r.cwd,this.context.cwd);return(await Va.StreamReport.start({configuration:e,stdout:this.context.stdout,json:this.json},async n=>{let a=s.manifest.scripts,o=rO.miscUtils.sortMap(a.keys(),u=>u),l={breakLength:1/0,colors:e.get("enableColors"),maxArrayLength:2},c=o.reduce((u,h)=>Math.max(u,h.length),0);for(let[u,h]of a.entries())n.reportInfo(null,`${u.padEnd(c," ")}   ${(0,iO.inspect)(h,l)}`),n.reportJson({name:u,script:h})})).exitCode()}};hi.paths=[["run"]];za.default=hi});var Bm=p(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});var Lm=m("@yarnpkg/cli"),Mm=m("@yarnpkg/core"),kt=m("@yarnpkg/core"),xe=m("clipanion"),as=class extends Lm.BaseCommand{constructor(){super(...arguments),this.inspect=xe.Option.String("--inspect",!1,{tolerateBoolean:!0,description:"Forwarded to the underlying Node process when executing a binary"}),this.inspectBrk=xe.Option.String("--inspect-brk",!1,{tolerateBoolean:!0,description:"Forwarded to the underlying Node process when executing a binary"}),this.topLevel=xe.Option.Boolean("-T,--top-level",!1,{description:"Check the root workspace for scripts and/or binaries instead of the current one"}),this.binariesOnly=xe.Option.Boolean("-B,--binaries-only",!1,{description:"Ignore any user defined scripts and only check for binaries"}),this.require=xe.Option.String("--require",{description:"Forwarded to the underlying Node process when executing a binary"}),this.silent=xe.Option.Boolean("--silent",{hidden:!0}),this.scriptName=xe.Option.String(),this.args=xe.Option.Proxy()}async execute(){let e=await Mm.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s,locator:i}=await Mm.Project.find(e,this.context.cwd);await r.restoreInstallState();let n=this.topLevel?r.topLevelWorkspace.anchoredLocator:i;if(!this.binariesOnly&&await kt.scriptUtils.hasPackageScript(n,this.scriptName,{project:r}))return await kt.scriptUtils.executePackageScript(n,this.scriptName,this.args,{project:r,stdin:this.context.stdin,stdout:this.context.stdout,stderr:this.context.stderr});let a=await kt.scriptUtils.getPackageAccessibleBinaries(n,{project:r});if(a.get(this.scriptName)){let l=[];return this.inspect&&(typeof this.inspect=="string"?l.push(`--inspect=${this.inspect}`):l.push("--inspect")),this.inspectBrk&&(typeof this.inspectBrk=="string"?l.push(`--inspect-brk=${this.inspectBrk}`):l.push("--inspect-brk")),this.require&&l.push(`--require=${this.require}`),await kt.scriptUtils.executePackageAccessibleBinary(n,this.scriptName,this.args,{cwd:this.context.cwd,project:r,stdin:this.context.stdin,stdout:this.context.stdout,stderr:this.context.stderr,nodeArgs:l,packageAccessibleBinaries:a})}if(!this.topLevel&&!this.binariesOnly&&s&&this.scriptName.includes(":")){let c=(await Promise.all(r.workspaces.map(async u=>u.manifest.scripts.has(this.scriptName)?u:null))).filter(u=>u!==null);if(c.length===1)return await kt.scriptUtils.executeWorkspaceScript(c[0],this.scriptName,this.args,{stdin:this.context.stdin,stdout:this.context.stdout,stderr:this.context.stderr})}if(this.topLevel)throw this.scriptName==="node-gyp"?new xe.UsageError(`Couldn't find a script name "${this.scriptName}" in the top-level (used by ${kt.structUtils.prettyLocator(e,i)}). This typically happens because some package depends on "node-gyp" to build itself, but didn't list it in their dependencies. To fix that, please run "yarn add node-gyp" into your top-level workspace. You also can open an issue on the repository of the specified package to suggest them to use an optional peer dependency.`):new xe.UsageError(`Couldn't find a script name "${this.scriptName}" in the top-level (used by ${kt.structUtils.prettyLocator(e,i)}).`);{if(this.scriptName==="global")throw new xe.UsageError("The 'yarn global' commands have been removed in 2.x - consider using 'yarn dlx' or a third-party plugin instead");let l=[this.scriptName].concat(this.args);for(let[c,u]of Lm.pluginCommands)for(let h of u)if(l.length>=h.length&&JSON.stringify(l.slice(0,h.length))===JSON.stringify(h))throw new xe.UsageError(`Couldn't find a script named "${this.scriptName}", but a matching command can be found in the ${c} plugin. You can install it with "yarn plugin import ${c}".`);throw new xe.UsageError(`Couldn't find a script named "${this.scriptName}".`)}}};as.paths=[["run"]];as.usage=xe.Command.Usage({description:"run a script defined in the package.json",details:`
      This command will run a tool. The exact tool that will be executed will depend on the current state of your workspace:

      - If the \`scripts\` field from your local package.json contains a matching script name, its definition will get executed.

      - Otherwise, if one of the local workspace's dependencies exposes a binary with a matching name, this binary will get executed.

      - Otherwise, if the specified name contains a colon character and if one of the workspaces in the project contains exactly one script with a matching name, then this script will get executed.

      Whatever happens, the cwd of the spawned process will be the workspace that declares the script (which makes it possible to call commands cross-workspaces using the third syntax).
    `,examples:[["Run the tests from the local workspace","$0 run test"],['Same thing, but without the "run" keyword',"$0 test"],["Inspect Webpack while running","$0 run --inspect-brk webpack"]]});Qa.default=as});var Gm=p(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});var Hm=m("@yarnpkg/cli"),Xa=m("@yarnpkg/core"),Fm=m("@yarnpkg/core"),Ja=m("clipanion"),os=class extends Hm.BaseCommand{constructor(){super(...arguments),this.descriptor=Ja.Option.String(),this.resolution=Ja.Option.String()}async execute(){let e=await Xa.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await Xa.Project.find(e,this.context.cwd),i=await Xa.Cache.find(e);if(await r.restoreInstallState({restoreResolutions:!1}),!s)throw new Hm.WorkspaceRequiredError(r.cwd,this.context.cwd);let n=Fm.structUtils.parseDescriptor(this.descriptor,!0),a=Fm.structUtils.makeDescriptor(n,this.resolution);return r.storedDescriptors.set(n.descriptorHash,n),r.storedDescriptors.set(a.descriptorHash,a),r.resolutionAliases.set(n.descriptorHash,a.descriptorHash),await r.installWithNewReport({stdout:this.context.stdout},{cache:i})}};os.paths=[["set","resolution"]];os.usage=Ja.Command.Usage({description:"enforce a package resolution",details:'\n      This command updates the resolution table so that `descriptor` is resolved by `resolution`.\n\n      Note that by default this command only affect the current resolution table - meaning that this "manual override" will disappear if you remove the lockfile, or if the package disappear from the table. If you wish to make the enforced resolution persist whatever happens, edit the `resolutions` field in your top-level manifest.\n\n      Note that no attempt is made at validating that `resolution` is a valid resolution entry for `descriptor`.\n    ',examples:[["Force all instances of lodash@npm:^1.2.3 to resolve to 1.5.0","$0 set resolution lodash@npm:^1.2.3 1.5.0"]]});Za.default=os});var Ym=p(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});var nO=le(),eo=m("@yarnpkg/cli"),ut=m("@yarnpkg/core"),Wm=m("@yarnpkg/fslib"),ls=m("clipanion"),aO=nO.__importDefault(Wt()),cs=class extends eo.BaseCommand{constructor(){super(...arguments),this.all=ls.Option.Boolean("-A,--all",!1,{description:"Unlink all workspaces belonging to the target project from the current one"}),this.leadingArguments=ls.Option.Rest()}async execute(){let e=await ut.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await ut.Project.find(e,this.context.cwd),i=await ut.Cache.find(e);if(!s)throw new eo.WorkspaceRequiredError(r.cwd,this.context.cwd);let n=r.topLevelWorkspace,a=new Set;if(this.leadingArguments.length===0&&this.all)for(let{pattern:o,reference:l}of n.manifest.resolutions)l.startsWith("portal:")&&a.add(o.descriptor.fullName);if(this.leadingArguments.length>0)for(let o of this.leadingArguments){let l=Wm.ppath.resolve(this.context.cwd,Wm.npath.toPortablePath(o));if(ut.miscUtils.isPathLike(o)){let c=await ut.Configuration.find(l,this.context.plugins,{useRc:!1,strict:!1}),{project:u,workspace:h}=await ut.Project.find(c,l);if(!h)throw new eo.WorkspaceRequiredError(u.cwd,l);if(this.all){for(let d of u.workspaces)d.manifest.name&&a.add(ut.structUtils.stringifyIdent(d.anchoredLocator));if(a.size===0)throw new ls.UsageError("No workspace found to be unlinked in the target project")}else{if(!h.manifest.name)throw new ls.UsageError("The target workspace doesn't have a name and thus cannot be unlinked");a.add(ut.structUtils.stringifyIdent(h.anchoredLocator))}}else{let c=[...n.manifest.resolutions.map(({pattern:u})=>u.descriptor.fullName)];for(let u of(0,aO.default)(c,o))a.add(u)}}return n.manifest.resolutions=n.manifest.resolutions.filter(({pattern:o})=>!a.has(o.descriptor.fullName)),await r.installWithNewReport({stdout:this.context.stdout,quiet:this.context.quiet},{cache:i})}};cs.paths=[["unlink"]];cs.usage=ls.Command.Usage({description:"disconnect the local project from another one",details:`
      This command will remove any resolutions in the project-level manifest that would have been added via a yarn link with similar arguments.
    `,examples:[["Unregister a remote workspace in the current project","$0 unlink ~/ts-loader"],["Unregister all workspaces from a remote project in the current project","$0 unlink ~/jest --all"],["Unregister all previously linked workspaces","$0 unlink --all"],["Unregister all workspaces matching a glob","$0 unlink '@babel/*' 'pkg-{a,b}'"]]});to.default=cs});var Vm=p(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});var no=le(),ro=m("@yarnpkg/cli"),Ae=m("@yarnpkg/core"),so=m("@yarnpkg/core"),Ie=m("@yarnpkg/core"),De=m("clipanion"),oO=on(),Km=no.__importDefault(Wt()),io=no.__importStar(m("typanion")),Ke=no.__importStar(lr()),Xt=class extends ro.BaseCommand{constructor(){super(...arguments),this.interactive=De.Option.Boolean("-i,--interactive",{description:"Offer various choices, depending on the detected upgrade paths"}),this.fixed=De.Option.Boolean("-F,--fixed",!1,{description:"Store dependency tags as-is instead of resolving them"}),this.exact=De.Option.Boolean("-E,--exact",!1,{description:"Don't use any semver modifier on the resolved range"}),this.tilde=De.Option.Boolean("-T,--tilde",!1,{description:"Use the `~` semver modifier on the resolved range"}),this.caret=De.Option.Boolean("-C,--caret",!1,{description:"Use the `^` semver modifier on the resolved range"}),this.recursive=De.Option.Boolean("-R,--recursive",!1,{description:"Resolve again ALL resolutions for those packages"}),this.mode=De.Option.String("--mode",{description:"Change what artifacts installs generate",validator:io.isEnum(so.InstallMode)}),this.patterns=De.Option.Rest()}async execute(){return this.recursive?await this.executeUpRecursive():await this.executeUpClassic()}async executeUpRecursive(){let e=await Ie.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await so.Project.find(e,this.context.cwd),i=await Ie.Cache.find(e);if(!s)throw new ro.WorkspaceRequiredError(r.cwd,this.context.cwd);await r.restoreInstallState({restoreResolutions:!1});let n=[...r.storedDescriptors.values()],a=n.map(c=>Ae.structUtils.stringifyIdent(c)),o=new Set;for(let c of this.patterns){if(Ae.structUtils.parseDescriptor(c).range!=="unknown")throw new De.UsageError("Ranges aren't allowed when using --recursive");for(let u of(0,Km.default)(a,c)){let h=Ae.structUtils.parseIdent(u);o.add(h.identHash)}}let l=n.filter(c=>o.has(c.identHash));for(let c of l)r.storedDescriptors.delete(c.descriptorHash),r.storedResolutions.delete(c.descriptorHash);return await r.installWithNewReport({stdout:this.context.stdout},{cache:i,mode:this.mode})}async executeUpClassic(){let e=await Ie.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await so.Project.find(e,this.context.cwd),i=await Ie.Cache.find(e);if(!s)throw new ro.WorkspaceRequiredError(r.cwd,this.context.cwd);await r.restoreInstallState({restoreResolutions:!1});let n=this.fixed,a=this.interactive??e.get("preferInteractive"),o=Ke.getModifier(this,r),l=a?[Ke.Strategy.KEEP,Ke.Strategy.REUSE,Ke.Strategy.PROJECT,Ke.Strategy.LATEST]:[Ke.Strategy.PROJECT,Ke.Strategy.LATEST],c=[],u=[];for(let b of this.patterns){let g=!1,v=Ae.structUtils.parseDescriptor(b),x=Ae.structUtils.stringifyIdent(v);for(let w of r.workspaces)for(let C of[Ke.Target.REGULAR,Ke.Target.DEVELOPMENT]){let P=[...w.manifest.getForScope(C).values()].map(A=>Ae.structUtils.stringifyIdent(A)),q=x==="*"?P:(0,Km.default)(P,x);for(let A of q){let I=Ae.structUtils.parseIdent(A),D=w.manifest[C].get(I.identHash);if(typeof D>"u")throw new Error("Assertion failed: Expected the descriptor to be registered");let _=Ae.structUtils.makeDescriptor(I,v.range);c.push(Promise.resolve().then(async()=>[w,C,D,await Ke.getSuggestedDescriptors(_,{project:r,workspace:w,cache:i,target:C,fixed:n,modifier:o,strategies:l})])),g=!0}}g||u.push(b)}if(u.length>1)throw new De.UsageError(`Patterns ${Ie.formatUtils.prettyList(e,u,Ie.formatUtils.Type.CODE)} don't match any packages referenced by any workspace`);if(u.length>0)throw new De.UsageError(`Pattern ${Ie.formatUtils.prettyList(e,u,Ie.formatUtils.Type.CODE)} doesn't match any packages referenced by any workspace`);let h=await Promise.all(c),d=await Ie.LightReport.start({configuration:e,stdout:this.context.stdout,suggestInstall:!1},async b=>{for(let[,,g,{suggestions:v,rejections:x}]of h){let w=v.filter(C=>C.descriptor!==null);if(w.length===0){let[C]=x;if(typeof C>"u")throw new Error("Assertion failed: Expected an error to have been set");let R=this.cli.error(C);r.configuration.get("enableNetwork")?b.reportError(Ie.MessageName.CANT_SUGGEST_RESOLUTIONS,`${Ae.structUtils.prettyDescriptor(e,g)} can't be resolved to a satisfying range

${R}`):b.reportError(Ie.MessageName.CANT_SUGGEST_RESOLUTIONS,`${Ae.structUtils.prettyDescriptor(e,g)} can't be resolved to a satisfying range (note: network resolution has been disabled)

${R}`)}else w.length>1&&!a&&b.reportError(Ie.MessageName.CANT_SUGGEST_RESOLUTIONS,`${Ae.structUtils.prettyDescriptor(e,g)} has multiple possible upgrade strategies; use -i to disambiguate manually`)}});if(d.hasErrors())return d.exitCode();let y=!1,f=[];for(let[b,g,,{suggestions:v}]of h){let x,w=v.filter(q=>q.descriptor!==null),C=w[0].descriptor,R=w.every(q=>Ae.structUtils.areDescriptorsEqual(q.descriptor,C));w.length===1||R?x=C:(y=!0,{answer:x}=await(0,oO.prompt)({type:"select",name:"answer",message:`Which range do you want to use in ${Ae.structUtils.prettyWorkspace(e,b)} \u276F ${g}?`,choices:v.map(({descriptor:q,name:A,reason:I})=>q?{name:A,hint:I,descriptor:q}:{name:A,hint:I,disabled:!0}),onCancel:()=>process.exit(130),result(q){return this.find(q,"descriptor")},stdin:this.context.stdin,stdout:this.context.stdout}));let P=b.manifest[g].get(x.identHash);if(typeof P>"u")throw new Error("Assertion failed: This descriptor should have a matching entry");if(P.descriptorHash!==x.descriptorHash)b.manifest[g].set(x.identHash,x),f.push([b,g,P,x]);else{let q=e.makeResolver(),A={project:r,resolver:q},I=e.normalizeDependency(P),D=q.bindDescriptor(I,b.anchoredLocator,A);r.forgetResolution(D)}}return await e.triggerMultipleHooks(b=>b.afterWorkspaceDependencyReplacement,f),y&&this.context.stdout.write(`
`),await r.installWithNewReport({stdout:this.context.stdout},{cache:i,mode:this.mode})}};Xt.paths=[["up"]];Xt.usage=De.Command.Usage({description:"upgrade dependencies across the project",details:"\n      This command upgrades the packages matching the list of specified patterns to their latest available version across the whole project (regardless of whether they're part of `dependencies` or `devDependencies` - `peerDependencies` won't be affected). This is a project-wide command: all workspaces will be upgraded in the process.\n\n      If `-R,--recursive` is set the command will change behavior and no other switch will be allowed. When operating under this mode `yarn up` will force all ranges matching the selected packages to be resolved again (often to the highest available versions) before being stored in the lockfile. It however won't touch your manifests anymore, so depending on your needs you might want to run both `yarn up` and `yarn up -R` to cover all bases.\n\n      If `-i,--interactive` is set (or if the `preferInteractive` settings is toggled on) the command will offer various choices, depending on the detected upgrade paths. Some upgrades require this flag in order to resolve ambiguities.\n\n      The, `-C,--caret`, `-E,--exact` and  `-T,--tilde` options have the same meaning as in the `add` command (they change the modifier used when the range is missing or a tag, and are ignored when the range is explicitly set).\n\n      If the `--mode=<mode>` option is set, Yarn will change which artifacts are generated. The modes currently supported are:\n\n      - `skip-build` will not run the build scripts at all. Note that this is different from setting `enableScripts` to false because the latter will disable build scripts, and thus affect the content of the artifacts generated on disk, whereas the former will just disable the build step - but not the scripts themselves, which just won't run.\n\n      - `update-lockfile` will skip the link step altogether, and only fetch packages that are missing from the lockfile (or that have no associated checksums). This mode is typically used by tools like Renovate or Dependabot to keep a lockfile up-to-date without incurring the full install cost.\n\n      Generally you can see `yarn up` as a counterpart to what was `yarn upgrade --latest` in Yarn 1 (ie it ignores the ranges previously listed in your manifests), but unlike `yarn upgrade` which only upgraded dependencies in the current workspace, `yarn up` will upgrade all workspaces at the same time.\n\n      This command accepts glob patterns as arguments (if valid Descriptors and supported by [micromatch](https://github.com/micromatch/micromatch)). Make sure to escape the patterns, to prevent your own shell from trying to expand them.\n\n      **Note:** The ranges have to be static, only the package scopes and names can contain glob patterns.\n    ",examples:[["Upgrade all instances of lodash to the latest release","$0 up lodash"],["Upgrade all instances of lodash to the latest release, but ask confirmation for each","$0 up lodash -i"],["Upgrade all instances of lodash to 1.2.3","$0 up lodash@1.2.3"],["Upgrade all instances of packages with the `@babel` scope to the latest release","$0 up '@babel/*'"],["Upgrade all instances of packages containing the word `jest` to the latest release","$0 up '*jest*'"],["Upgrade all instances of packages with the `@babel` scope to 7.0.0","$0 up '@babel/*@7.0.0'"]]});Xt.schema=[io.hasKeyRelationship("recursive",io.KeyRelationship.Forbids,["interactive","exact","tilde","caret"],{ignore:[void 0,!1]})];ao.default=Xt});var Qm=p(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});var zm=m("@yarnpkg/cli"),Ct=m("@yarnpkg/core"),lO=m("@yarnpkg/core"),Ze=m("@yarnpkg/core"),us=m("clipanion"),hs=class extends zm.BaseCommand{constructor(){super(...arguments),this.recursive=us.Option.Boolean("-R,--recursive",!1,{description:"List, for each workspace, what are all the paths that lead to the dependency"}),this.json=us.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"}),this.peers=us.Option.Boolean("--peers",!1,{description:"Also print the peer dependencies that match the specified name"}),this.package=us.Option.String()}async execute(){let e=await Ct.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await lO.Project.find(e,this.context.cwd);if(!s)throw new zm.WorkspaceRequiredError(r.cwd,this.context.cwd);await r.restoreInstallState();let i=Ze.structUtils.parseIdent(this.package).identHash,n=this.recursive?uO(r,i,{configuration:e,peers:this.peers}):cO(r,i,{configuration:e,peers:this.peers});Ze.treeUtils.emitTree(n,{configuration:e,stdout:this.context.stdout,json:this.json,separators:1})}};hs.paths=[["why"]];hs.usage=us.Command.Usage({description:"display the reason why a package is needed",details:`
      This command prints the exact reasons why a package appears in the dependency tree.

      If \`-R,--recursive\` is set, the listing will go in depth and will list, for each workspaces, what are all the paths that lead to the dependency. Note that the display is somewhat optimized in that it will not print the package listing twice for a single package, so if you see a leaf named "Foo" when looking for "Bar", it means that "Foo" already got printed higher in the tree.
    `,examples:[["Explain why lodash is used in your project","$0 why lodash"]]});oo.default=hs;function cO(t,e,{configuration:r,peers:s}){let i=Ze.miscUtils.sortMap(t.storedPackages.values(),o=>Ze.structUtils.stringifyLocator(o)),n={},a={children:n};for(let o of i){let l={};for(let u of o.dependencies.values()){if(!s&&o.peerDependencies.has(u.identHash))continue;let h=t.storedResolutions.get(u.descriptorHash);if(!h)throw new Error("Assertion failed: The resolution should have been registered");let d=t.storedPackages.get(h);if(!d)throw new Error("Assertion failed: The package should have been registered");if(d.identHash!==e)continue;{let f=Ze.structUtils.stringifyLocator(o);n[f]={value:[o,Ct.formatUtils.Type.LOCATOR],children:l}}let y=Ze.structUtils.stringifyLocator(d);l[y]={value:[{descriptor:u,locator:d},Ct.formatUtils.Type.DEPENDENT]}}}return a}function uO(t,e,{configuration:r,peers:s}){let i=Ze.miscUtils.sortMap(t.workspaces,d=>Ze.structUtils.stringifyLocator(d.anchoredLocator)),n=new Set,a=new Set,o=d=>{if(n.has(d.locatorHash))return a.has(d.locatorHash);if(n.add(d.locatorHash),d.identHash===e)return a.add(d.locatorHash),!0;let y=!1;d.identHash===e&&(y=!0);for(let f of d.dependencies.values()){if(!s&&d.peerDependencies.has(f.identHash))continue;let b=t.storedResolutions.get(f.descriptorHash);if(!b)throw new Error("Assertion failed: The resolution should have been registered");let g=t.storedPackages.get(b);if(!g)throw new Error("Assertion failed: The package should have been registered");o(g)&&(y=!0)}return y&&a.add(d.locatorHash),y};for(let d of i)o(d.anchoredPackage);let l=new Set,c={},u={children:c},h=(d,y,f)=>{if(!a.has(d.locatorHash))return;let b=f!==null?Ct.formatUtils.tuple(Ct.formatUtils.Type.DEPENDENT,{locator:d,descriptor:f}):Ct.formatUtils.tuple(Ct.formatUtils.Type.LOCATOR,d),g={},v={value:b,children:g},x=Ze.structUtils.stringifyLocator(d);if(y[x]=v,!(f!==null&&t.tryWorkspaceByLocator(d))&&!l.has(d.locatorHash)){l.add(d.locatorHash);for(let w of d.dependencies.values()){if(!s&&d.peerDependencies.has(w.identHash))continue;let C=t.storedResolutions.get(w.descriptorHash);if(!C)throw new Error("Assertion failed: The resolution should have been registered");let R=t.storedPackages.get(C);if(!R)throw new Error("Assertion failed: The package should have been registered");h(R,g,w)}}};for(let d of i)h(d.anchoredPackage,c,null);return u}});var Xm=p(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});var hO=m("@yarnpkg/cli"),Jt=m("@yarnpkg/core"),pO=m("@yarnpkg/plugin-git"),Zt=m("clipanion"),ps=class extends hO.BaseCommand{constructor(){super(...arguments),this.since=Zt.Option.String("--since",{description:"Only include workspaces that have been changed since the specified ref.",tolerateBoolean:!0}),this.recursive=Zt.Option.Boolean("-R,--recursive",!1,{description:"Find packages via dependencies/devDependencies instead of using the workspaces field"}),this.noPrivate=Zt.Option.Boolean("--no-private",{description:"Exclude workspaces that have the private field set to true"}),this.verbose=Zt.Option.Boolean("-v,--verbose",!1,{description:"Also return the cross-dependencies between workspaces"}),this.json=Zt.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"})}async execute(){let e=await Jt.Configuration.find(this.context.cwd,this.context.plugins),{project:r}=await Jt.Project.find(e,this.context.cwd);return(await Jt.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout},async i=>{let n=this.since?await pO.gitUtils.fetchChangedWorkspaces({ref:this.since,project:r}):r.workspaces,a=new Set(n);if(this.recursive)for(let o of[...n].map(l=>l.getRecursiveWorkspaceDependents()))for(let l of o)a.add(l);for(let o of a){let{manifest:l}=o;if(l.private&&this.noPrivate)continue;let c;if(this.verbose){let u=new Set,h=new Set;for(let d of Jt.Manifest.hardDependencies)for(let[y,f]of l.getForScope(d)){let b=r.tryWorkspaceByDescriptor(f);b===null?r.workspacesByIdent.has(y)&&h.add(f):u.add(b)}c={workspaceDependencies:Array.from(u).map(d=>d.relativeCwd),mismatchedWorkspaceDependencies:Array.from(h).map(d=>Jt.structUtils.stringifyDescriptor(d))}}i.reportInfo(null,`${o.relativeCwd}`),i.reportJson({location:o.relativeCwd,name:l.name?Jt.structUtils.stringifyIdent(l.name):null,...c})}})).exitCode()}};ps.paths=[["workspaces","list"]];ps.usage=Zt.Command.Usage({category:"Workspace-related commands",description:"list all available workspaces",details:"\n      This command will print the list of all workspaces in the project.\n\n      - If `--since` is set, Yarn will only list workspaces that have been modified since the specified ref. By default Yarn will use the refs specified by the `changesetBaseRefs` configuration option.\n\n      - If `-R,--recursive` is set, Yarn will find workspaces to run the command on by recursively evaluating `dependencies` and `devDependencies` fields, instead of looking at the `workspaces` fields.\n\n      - If `--no-private` is set, Yarn will not list any workspaces that have the `private` field set to `true`.\n\n      - If both the `-v,--verbose` and `--json` options are set, Yarn will also return the cross-dependencies between each workspaces (useful when you wish to automatically generate Buck / Bazel rules).\n    "});lo.default=ps});var ey=p(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});var Jm=m("@yarnpkg/cli"),Zm=m("@yarnpkg/core"),dO=m("@yarnpkg/core"),ds=m("clipanion"),fs=class extends Jm.BaseCommand{constructor(){super(...arguments),this.workspaceName=ds.Option.String(),this.commandName=ds.Option.String(),this.args=ds.Option.Proxy()}async execute(){let e=await Zm.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await Zm.Project.find(e,this.context.cwd);if(!s)throw new Jm.WorkspaceRequiredError(r.cwd,this.context.cwd);let i=r.workspaces,n=new Map(i.map(o=>[dO.structUtils.stringifyIdent(o.anchoredLocator),o])),a=n.get(this.workspaceName);if(a===void 0){let o=Array.from(n.keys()).sort();throw new ds.UsageError(`Workspace '${this.workspaceName}' not found. Did you mean any of the following:
  - ${o.join(`
  - `)}?`)}return this.cli.run([this.commandName,...this.args],{cwd:a.cwd})}};fs.paths=[["workspace"]];fs.usage=ds.Command.Usage({category:"Workspace-related commands",description:"run a command within the specified workspace",details:`
      This command will run a given sub-command on a single workspace.
    `,examples:[["Add a package to a single workspace","yarn workspace components add -D react"],["Run build script on a single workspace","yarn workspace components run build"]]});co.default=fs});var Ly=p(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.suggestUtils=S.dedupeUtils=S.WorkspaceCommand=S.WorkspacesListCommand=S.WhyCommand=S.UpCommand=S.UnlinkCommand=S.SetVersionCommand=S.SetVersionSourcesCommand=S.SetResolutionCommand=S.RunCommand=S.RunIndexCommand=S.RemoveCommand=S.RebuildCommand=S.PluginRuntimeCommand=S.PluginRemoveCommand=S.PluginListCommand=S.PluginImportCommand=S.PluginCheckCommand=S.PluginImportSourcesCommand=S.NodeCommand=S.LinkCommand=S.YarnCommand=S.InfoCommand=S.ExplainCommand=S.ExplainPeerRequirementsCommand=S.ExecCommand=S.VersionCommand=S.EntryCommand=S.HelpCommand=S.ClipanionCommand=S.DedupeCommand=S.ConfigCommand=S.ConfigUnsetCommand=S.ConfigSetCommand=S.ConfigGetCommand=S.CacheCleanCommand=S.BinCommand=S.AddCommand=void 0;var j=le(),uo=m("@yarnpkg/core"),fO=gi(),ty=j.__importDefault($c());S.AddCommand=ty.default;var ry=j.__importDefault(Lc());S.BinCommand=ry.default;var sy=j.__importDefault(Bc());S.CacheCleanCommand=sy.default;var iy=j.__importDefault(Th());S.ConfigGetCommand=iy.default;var ny=j.__importDefault(mf());S.ConfigSetCommand=ny.default;var ay=j.__importDefault(Uf());S.ConfigUnsetCommand=ay.default;var oy=j.__importDefault(If());S.ConfigCommand=oy.default;var ly=j.__importDefault(Gg());S.DedupeCommand=ly.default;var cy=j.__importDefault(Yg());S.ClipanionCommand=cy.default;var uy=j.__importDefault(Kg());S.HelpCommand=uy.default;var hy=j.__importDefault(Qg());S.EntryCommand=hy.default;var py=j.__importDefault(Xg());S.VersionCommand=py.default;var dy=j.__importDefault(Zg());S.ExecCommand=dy.default;var fy=j.__importDefault(rm());S.ExplainPeerRequirementsCommand=fy.default;var gy=j.__importDefault(om());S.ExplainCommand=gy.default;var my=j.__importDefault(cm());S.InfoCommand=my.default;var yy=j.__importDefault(dm());S.YarnCommand=yy.default;var wy=j.__importDefault(fm());S.LinkCommand=wy.default;var by=j.__importDefault(mm());S.NodeCommand=by.default;var vy=j.__importDefault(wm());S.PluginCheckCommand=vy.default;var xy=j.__importDefault(Na());S.PluginImportSourcesCommand=xy.default;var _y=j.__importDefault($a());S.PluginImportCommand=_y.default;var Ey=j.__importDefault(zr());S.PluginListCommand=Ey.default;var ky=j.__importDefault(Rm());S.PluginRemoveCommand=ky.default;var Cy=j.__importDefault(Tm());S.PluginRuntimeCommand=Cy.default;var Ry=j.__importDefault(Um());S.RebuildCommand=Ry.default;var Sy=j.__importDefault(Nm());S.RemoveCommand=Sy.default;var Ay=j.__importDefault($m());S.RunIndexCommand=Ay.default;var Ty=j.__importDefault(Bm());S.RunCommand=Ty.default;var Oy=j.__importDefault(Gm());S.SetResolutionCommand=Oy.default;var Py=j.__importDefault(Da());S.SetVersionSourcesCommand=Py.default;var qy=j.__importDefault(si());S.SetVersionCommand=qy.default;var Uy=j.__importDefault(Ym());S.UnlinkCommand=Uy.default;var Iy=j.__importDefault(Vm());S.UpCommand=Iy.default;var Dy=j.__importDefault(Qm());S.WhyCommand=Dy.default;var Ny=j.__importDefault(Xm());S.WorkspacesListCommand=Ny.default;var jy=j.__importDefault(ey());S.WorkspaceCommand=jy.default;var gO=j.__importStar(da());S.dedupeUtils=gO;var $y=j.__importStar(lr());S.suggestUtils=$y;var mO={configuration:{enableImmutableInstalls:{description:"If true (the default on CI), prevents the install command from modifying the lockfile",type:uo.SettingsType.BOOLEAN,default:fO.isCI},defaultSemverRangePrefix:{description:"The default save prefix: '^', '~' or ''",type:uo.SettingsType.STRING,values:["^","~",""],default:$y.Modifier.CARET},preferReuse:{description:"If true, `yarn add` will attempt to reuse the most common dependency range in other workspaces.",type:uo.SettingsType.BOOLEAN,default:!1}},commands:[sy.default,iy.default,ny.default,ay.default,Oy.default,Py.default,qy.default,Ny.default,cy.default,uy.default,hy.default,py.default,ty.default,ry.default,oy.default,ly.default,dy.default,fy.default,gy.default,my.default,yy.default,wy.default,Uy.default,by.default,vy.default,xy.default,_y.default,ky.default,Ey.default,Cy.default,Ry.default,Sy.default,Ay.default,Ty.default,Iy.default,Dy.default,jy.default]};S.default=mO});var yO={};Xy(yO,{SetVersionCommand:()=>Rt,default:()=>Fy});var My=m("@yarnpkg/cli"),By=m("@yarnpkg/core"),Hy=Jy(Ly(),1),pi=m("clipanion"),Rt=class extends My.BaseCommand{constructor(){super(...arguments);this.useYarnPath=pi.Option.Boolean("--yarn-path",{description:"Set the yarnPath setting even if the version can be accessed by Corepack"});this.onlyIfNeeded=pi.Option.Boolean("--only-if-needed",!1,{description:"Only lock the Yarn version if it isn't already locked"});this.version=pi.Option.String()}async execute(){let r=["set","version","original"];this.useYarnPath===!0&&r.push("--yarn-path"),this.onlyIfNeeded&&r.push("--only-if-needed"),r.push(this.version);let s=await this.cli.run(r),i=await By.Configuration.find(this.context.cwd,this.context.plugins);return await i.triggerHook(n=>n.afterYarnVersionSet,i,this.context),s}};Rt.paths=[["set","version"]],Rt.usage=Hy.SetVersionCommand.usage;var Fy={commands:[Rt]};return Zy(yO);})();
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */
return plugin;
}
};
